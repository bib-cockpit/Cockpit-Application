<ion-header class="ion-no-border">
  <page-header #PageHeader>
    <page-header-menu
      [Filterorigin]="Auswahlservice.Auswahloriginvarianten.Aufgabenliste_Zeitfilter"
      (ShowProjektauswahlEvent)="ShowProjektauswahlEventHandler()"
      (ShowProjektfilesEvent)="ShowProjektfilesHandler()">
    </page-header-menu>
  </page-header>
</ion-header>
<ion-content>


  <div *ngIf="DBProjekte.CurrentProjekt !== null" style="padding: 4px; width: 100%">

    <table class="docinnertable" width="100%">
      <tr>
        <td style="width: 400px; height: 32px;"><b>Anlagengruppe</b></td>
        <td style="width: 120px; text-align: center"><b>Leistungsphase</b></td>
        <td style="width: 200px;"><b>Anrechenbare Kosten</b></td>
        <td style="width: 140px;"><b>Honorar</b></td>
        <td style="width: 140px; text-align: center;"><b>Besondere<br>Leistung</b></td>
        <td style="width: auto"></td>

      </tr>
      <ng-container *ngFor="let Anlagegruppennummer of Anlagengruppenliste;">
        <tr>
          <td colspan="5" style="padding: 0px; !important;">
            <div class="anlagengruppeheader">
              {{Anlagegruppennummer}}. {{DB.GetAnlagengruppeByNummer(Anlagegruppennummer).Name}}
            </div>
          </td>
        </tr>
        <ng-container *ngFor="let Tabelle of Pool.Simontabellenliste[DBProjekte.CurrentProjekt.Projektkey]">
          <tr *ngIf="Tabelle.Anlagengruppe === Anlagegruppennummer">
            <td></td>
            <td>
              <div (click)="SimontabelleClicked($event, Tabelle)" class="simontabelleeintragdiv">
                {{Tabelle.Leistungsphase}}
              </div>
            </td>
            <td style="text-align: right">
              {{Tabelle.Kosten.toFixed(2)}} €
            </td>
            <td style="text-align: right">
              {{Tabelle.Honorar.toFixed(2)}} €
            </td>
            <td style="text-align: center" [style.color]="Tabelle.Besondereleistungenliste.length > 0 ? 'red' : 'black'">{{Tabelle.Besondereleistungenliste.length}}</td>
            <td style="width: auto;"></td>
          </tr>
        </ng-container>
      </ng-container>
    </table>
  </div>


</ion-content>
<ion-footer>
  <page-footer #PageFooter>

    <div class="rootbuttonclass" (click)="AddSimontabelleButtonClicked()">
      <ion-icon style="font-size: 28px" color="weiss" name="add-circle-outline"></ion-icon>
    </div>

  </page-footer>
</ion-footer>

<pj-simontabelle-editor *ngIf="ShowEditor === true"
                        [ZIndex]="3000"
                        [PositionY]="0"
                        [Dialogbreite]="1400"
                        (CancelClickedEvent)="ShowEditor = false" (OkClickedEvent)="ShowEditor = false"
                        (AnlagengruppeClickedEvent)="AnlagengruppeClickedEventHandler()"
                        (AddLeistungClickedEvent)="AddLeistungClickedEventHandler()"
                        (EditLeistungClickedEvent)="EditLeistungClickedEventHandler($event)"
                        (LeistungsphaseClickedEvent)="LeistungsphaseClickedEventHandler()">

</pj-simontabelle-editor>

<pj-simontabelle-leistungeneditor *ngIf="ShowLeistungeditor === true"
  [ZIndex]="4000"
  [PositionY]="100"
  [Dialogbreite]="400"
  (DeleteClickedEvent)="DeleteLeistungClickedHandler()"
  (CancelClickedEvent)="ShowLeistungeditor = false"
  (OkClickedEvent)="ShowLeistungeditor = false">
</pj-simontabelle-leistungeneditor>

<pj-projekte-schnellauswahl *ngIf="ShowProjektschnellauswahl"
                            [ZIndex]="5000"
                            [Dialogbreite]="800"
                            [Dialoghoehe]="Auswahlhoehe"
                            [Titel]="'Projekt wechsel'" [Iconname]="'star-outline'"
                            (ProjektClickedEvent)="ProjektSchnellauswahlProjektClickedEventHandler($event)"
                            (CancelClickedEvent)="ShowProjektschnellauswahl = false"
                            (OkClickedEvent)="ShowProjektschnellauswahl = false">
</pj-projekte-schnellauswahl>


<auswahl-dialog *ngIf="ShowAuswahl" [Auswahlliste]="Auswahlliste" [Auswahlindex]="Auswahlindex" [ZIndex]="5000"
                [Dialogbreite]="400"  [PositionY]="100"
                [Titel]="Auswahltitel" [Iconname]="''"
                (OkClickedEvent)="AuswahlOkButtonClicked($event)"
                (CancelClickedEvent)="ShowAuswahl = false">
</auswahl-dialog>






