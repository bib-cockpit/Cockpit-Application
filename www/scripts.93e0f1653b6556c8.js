!function(){"use strict";var ef=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},Qr=function(t){return{eq:t}},Rx=Qr(function(t,e){return t===e}),nf=function(t){return Qr(function(e,n){if(e.length!==n.length)return!1;for(var o=e.length,r=0;r<o;r++)if(!t.eq(e[r],n[r]))return!1;return!0})},of=function(t){return Qr(function(e,n){var l,c,u,o=Object.keys(e),r=Object.keys(n);if(!(l=Rx,c=nf(l),u=function(c){return Array.prototype.slice.call(c).sort(void 0)},Qr(function(g,p){return c.eq(u(g),u(p))})).eq(o,r))return!1;for(var s=o.length,a=0;a<s;a++){var i=o[a];if(!t.eq(e[i],n[i]))return!1}return!0})},Ml=Qr(function(t,e){if(t===e)return!0;var n=ef(t);return n===ef(e)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(n)?t===e:"array"===n?nf(Ml).eq(t,e):"object"===n&&of(Ml).eq(t,e))});const Ax=Object.getPrototypeOf,rf=(t,e,n)=>{var o;return!!n(t,e.prototype)||(null===(o=t.constructor)||void 0===o?void 0:o.name)===e.name},Il=t=>e=>(n=>{const o=typeof n;return null===n?"null":"object"===o&&Array.isArray(n)?"array":"object"===o&&rf(n,String,(r,s)=>s.isPrototypeOf(r))?"string":o})(e)===t,Fl=t=>e=>typeof e===t,sf=t=>e=>t===e,ka=(t,e)=>le(t)&&rf(t,e,(n,o)=>Ax(n)===o),at=Il("string"),le=Il("object"),af=t=>ka(t,Object),Ht=Il("array"),Ge=sf(null),wo=Fl("boolean"),me=sf(void 0),zt=t=>null==t,Y=t=>!zt(t),Ct=Fl("function"),Ze=Fl("number"),cr=(t,e)=>{if(Ht(t)){for(let n=0,o=t.length;n<o;++n)if(!e(t[n]))return!1;return!0}return!1},bt=()=>{},xo=(t,e)=>(...n)=>t(e.apply(null,n)),lf=(t,e)=>n=>t(e(n)),G=t=>()=>t,fe=t=>t,Ox=(t,e)=>t===e;function Z(t,...e){return(...n)=>{const o=e.concat(n);return t.apply(null,o)}}const Ea=t=>e=>!t(e),df=t=>()=>{throw new Error(t)},Ul=t=>t(),Jr=t=>{t()},Bt=G(!1),jt=G(!0);class C{constructor(e,n){this.tag=e,this.value=n}static some(e){return new C(!0,e)}static none(){return C.singletonNone}fold(e,n){return this.tag?n(this.value):e()}isSome(){return this.tag}isNone(){return!this.tag}map(e){return this.tag?C.some(e(this.value)):C.none()}bind(e){return this.tag?e(this.value):C.none()}exists(e){return this.tag&&e(this.value)}forall(e){return!this.tag||e(this.value)}filter(e){return!this.tag||e(this.value)?this:C.none()}getOr(e){return this.tag?this.value:e}or(e){return this.tag?this:e}getOrThunk(e){return this.tag?this.value:e()}orThunk(e){return this.tag?this:e()}getOrDie(e){if(this.tag)return this.value;throw new Error(e??"Called getOrDie on None")}static from(e){return Y(e)?C.some(e):C.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(e){this.tag&&e(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}C.singletonNone=new C(!1);const zl=Array.prototype.slice,Tx=Array.prototype.indexOf,Bx=Array.prototype.push,cf=(t,e)=>Tx.call(t,e),St=(t,e)=>cf(t,e)>-1,It=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return!0;return!1},yt=(t,e)=>{const n=t.length,o=new Array(n);for(let r=0;r<n;r++)o[r]=e(t[r],r);return o},H=(t,e)=>{for(let n=0,o=t.length;n<o;n++)e(t[n],n)},uf=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},Zr=(t,e)=>{const n=[],o=[];for(let r=0,s=t.length;r<s;r++){const a=t[r];(e(a,r)?n:o).push(a)}return{pass:n,fail:o}},ct=(t,e)=>{const n=[];for(let o=0,r=t.length;o<r;o++){const s=t[o];e(s,o)&&n.push(s)}return n},ts=(t,e,n)=>(uf(t,(o,r)=>{n=e(n,o,r)}),n),Re=(t,e,n)=>(H(t,(o,r)=>{n=e(n,o,r)}),n),mf=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++){const s=t[o];if(e(s,o))return C.some(s);if(n(s,o))break}return C.none()},$t=(t,e)=>mf(t,e,Bt),es=(t,e)=>{for(let n=0,o=t.length;n<o;n++)if(e(t[n],n))return C.some(n);return C.none()},ff=t=>{const e=[];for(let n=0,o=t.length;n<o;++n){if(!Ht(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);Bx.apply(e,t[n])}return e},fn=(t,e)=>ff(yt(t,e)),Yn=(t,e)=>{for(let n=0,o=t.length;n<o;++n)if(!0!==e(t[n],n))return!1;return!0},ns=t=>{const e=zl.call(t,0);return e.reverse(),e},Sa=(t,e)=>ct(t,n=>!St(e,n)),jl=(t,e)=>{const n={};for(let o=0,r=t.length;o<r;o++){const s=t[o];n[String(s)]=e(s,o)}return n},ko=(t,e)=>{const n=zl.call(t,0);return n.sort(e),n},_a=(t,e)=>e>=0&&e<t.length?C.some(t[e]):C.none(),we=t=>_a(t,0),Eo=t=>_a(t,t.length-1),Ae=Ct(Array.from)?Array.from:t=>zl.call(t),ur=(t,e)=>{for(let n=0;n<t.length;n++){const o=e(t[n],n);if(o.isSome())return o}return C.none()},Oe=Object.keys,Dx=Object.hasOwnProperty,_t=(t,e)=>{const n=Oe(t);for(let o=0,r=n.length;o<r;o++){const s=n[o];e(t[s],s)}},Na=(t,e)=>Px(t,(n,o)=>({k:o,v:e(n,o)})),Px=(t,e)=>{const n={};return _t(t,(o,r)=>{const s=e(o,r);n[s.k]=s.v}),n},Hl=t=>(e,n)=>{t[n]=e},gf=(t,e,n,o)=>{_t(t,(r,s)=>{(e(r,s)?n:o)(r,s)})},os=(t,e)=>{const n={};return gf(t,e,Hl(n),bt),n},$l=(t,e)=>{const n=[];return _t(t,(o,r)=>{n.push(e(o,r))}),n},Vl=t=>$l(t,fe),Rt=(t,e)=>pt(t,e)?C.from(t[e]):C.none(),pt=(t,e)=>Dx.call(t,e),mr=(t,e)=>pt(t,e)&&null!=t[e],pf=t=>{const e={};return H(t,n=>{e[n]={}}),Oe(e)},hf=t=>void 0!==t.length,ql=Array.isArray,Ra=(t,e,n)=>{if(!t)return!1;if(n=n||t,hf(t)){for(let o=0,r=t.length;o<r;o++)if(!1===e.call(n,t[o],o,t))return!1}else for(const o in t)if(pt(t,o)&&!1===e.call(n,t[o],o,t))return!1;return!0},Wl=(t,e)=>{const n=[];return Ra(t,(o,r)=>{n.push(e(o,r,t))}),n},rs=(t,e)=>{const n=[];return Ra(t,(o,r)=>{e&&!e(o,r,t)||n.push(o)}),n},Aa=(t,e,n,o)=>{let r=me(n)?t[0]:n;for(let s=0;s<t.length;s++)r=e.call(o,r,t[s],s);return r},bf=(t,e,n)=>{for(let o=0,r=t.length;o<r;o++)if(e.call(n,t[o],o,t))return o;return-1},So=t=>t[t.length-1],_o=t=>{let e,n=!1;return(...o)=>(n||(n=!0,e=t.apply(null,o)),e)},vf=()=>Kl(0,0),Kl=(t,e)=>({major:t,minor:e}),ss={nu:Kl,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?vf():((o,r)=>{const s=((i,l)=>{for(let d=0;d<i.length;d++){const c=i[d];if(c.test(l))return c}})(o,r);if(!s)return{major:0,minor:0};const a=i=>Number(r.replace(s,"$"+i));return Kl(a(1),a(2))})(t,n)},unknown:vf},yf=(t,e)=>{const n=String(e).toLowerCase();return $t(t,o=>o.search(n))},Cf=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,wf=(t,e)=>te(t,e)?t.substring(e.length):t,re=(t,e,n=0,o)=>{const r=t.indexOf(e,n);return-1!==r&&(!!me(o)||r+e.length<=o)},te=(t,e)=>Cf(t,e,0),xf=(t,e)=>Cf(t,e,t.length-e.length),Gl=t=>e=>e.replace(t,""),fr=Gl(/^\s+|\s+$/g),Lx=Gl(/^\s+/g),kf=Gl(/\s+$/g),gn=t=>t.length>0,as=t=>!gn(t),Oa=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?C.none():C.some(n)},Yl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Pn=t=>e=>re(e,t),Mx=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>re(t,"edge/")&&re(t,"chrome")&&re(t,"safari")&&re(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Yl],search:t=>re(t,"chrome")&&!re(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>re(t,"msie")||re(t,"trident")},{name:"Opera",versionRegexes:[Yl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Pn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Pn("firefox")},{name:"Safari",versionRegexes:[Yl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(re(t,"safari")||re(t,"mobile/"))&&re(t,"applewebkit")}],Ix=[{name:"Windows",search:Pn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>re(t,"iphone")||re(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Pn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Pn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Pn("linux"),versionRegexes:[]},{name:"Solaris",search:Pn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Pn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Pn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Ef={browsers:G(Mx),oses:G(Ix)},_f="Chromium",Rf="Firefox",Of=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isEdge:o("Edge"),isChromium:o(_f),isIE:o("IE"),isOpera:o("Opera"),isFirefox:o(Rf),isSafari:o("Safari")}},Fx=()=>Of({current:void 0,version:ss.unknown()}),Ux=Of,Tf=(G("Edge"),G(_f),G("IE"),G("Opera"),G(Rf),G("Safari"),"Windows"),Bf="Android",Lf="Solaris",Mf="FreeBSD",If="ChromeOS",Ff=t=>{const e=t.current,o=r=>()=>e===r;return{current:e,version:t.version,isWindows:o(Tf),isiOS:o("iOS"),isAndroid:o(Bf),isMacOS:o("macOS"),isLinux:o("Linux"),isSolaris:o(Lf),isFreeBSD:o(Mf),isChromeOS:o(If)}},zx=()=>Ff({current:void 0,version:ss.unknown()}),jx=Ff,Hx=(G(Tf),G("iOS"),G(Bf),G("Linux"),G("macOS"),G(Lf),G(Mf),G(If),t=>window.matchMedia(t).matches);let $x=_o(()=>((t,e,n)=>{const o=Ef.browsers(),r=Ef.oses(),s=e.bind(l=>{return d=o,ur(l.brands,u=>{const g=u.brand.toLowerCase();return $t(d,p=>{var f;return g===(null===(f=p.brand)||void 0===f?void 0:f.toLowerCase())}).map(p=>({current:p.name,version:ss.nu(parseInt(u.version,10),0)}))});var d}).orThunk(()=>{return yf(o,d=t).map(c=>{const u=ss.detect(c.versionRegexes,d);return{current:c.name,version:u}});var d}).fold(Fx,Ux),a=(l=r,d=t,yf(l,d).map(c=>{const u=ss.detect(c.versionRegexes,d);return{current:c.name,version:u}})).fold(zx,jx),i=((l,d,c,u)=>{const g=l.isiOS()&&!0===/ipad/i.test(c),p=l.isiOS()&&!g,f=l.isiOS()||l.isAndroid(),h=f||u("(pointer:coarse)"),m=g||!p&&f&&u("(min-device-width:768px)"),b=p||f&&!m,v=d.isSafari()&&l.isiOS()&&!1===/safari/i.test(c),y=!b&&!m&&!v;return{isiPad:G(g),isiPhone:G(p),isTablet:G(m),isPhone:G(b),isTouch:G(h),isAndroid:l.isAndroid,isiOS:l.isiOS,isWebView:G(v),isDesktop:G(y)}})(a,s,t,n);var l,d;return{browser:s,os:a,deviceType:i}})(navigator.userAgent,C.from(navigator.userAgentData),Hx));const Xn=()=>$x(),Vx=navigator.userAgent,Xl=Xn(),pn=Xl.browser,hn=Xl.os,No=Xl.deviceType,qx=-1!==Vx.indexOf("Windows Phone"),vt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:pn.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!pn.isIE(),windowsPhone:qx,browser:{current:pn.current,version:pn.version,isChromium:pn.isChromium,isEdge:pn.isEdge,isFirefox:pn.isFirefox,isIE:pn.isIE,isOpera:pn.isOpera,isSafari:pn.isSafari},os:{current:hn.current,version:hn.version,isAndroid:hn.isAndroid,isChromeOS:hn.isChromeOS,isFreeBSD:hn.isFreeBSD,isiOS:hn.isiOS,isLinux:hn.isLinux,isMacOS:hn.isMacOS,isSolaris:hn.isSolaris,isWindows:hn.isWindows},deviceType:{isDesktop:No.isDesktop,isiPad:No.isiPad,isiPhone:No.isiPhone,isPhone:No.isPhone,isTablet:No.isTablet,isTouch:No.isTouch,isWebView:No.isWebView}},Wx=/^\s*|\s*$/g,Uf=t=>zt(t)?"":(""+t).replace(Wx,""),zf=function(t,e,n,o){o=o||this,t&&(n&&(t=t[n]),Ra(t,(r,s)=>!1!==e.call(o,r,s,n)&&(zf(r,e,n,o),!0)))},$={trim:Uf,isArray:ql,is:(t,e)=>e?!("array"!==e||!ql(t))||typeof t===e:void 0!==t,toArray:t=>{if(ql(t))return t;{const e=[];for(let n=0,o=t.length;n<o;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const o=at(t)?t.split(e||","):t||[];let r=o.length;for(;r--;)n[o[r]]={};return n},each:Ra,map:Wl,grep:rs,inArray:(t,e)=>{if(t)for(let n=0,o=t.length;n<o;n++)if(t[n]===e)return n;return-1},hasOwn:pt,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const o=e[n];for(const r in o)if(pt(o,r)){const s=o[r];void 0!==s&&(t[r]=s)}}return t},walk:zf,resolve:(t,e=window)=>{const n=t.split(".");for(let o=0,r=n.length;o<r&&(e=e[n[o]]);o++);return e},explode:(t,e)=>Ht(t)?t:""===t?[]:Wl(t.split(e||","),Uf),_addCacheSuffix:t=>{const e=vt.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},gr=(t,e,n=Ox)=>t.exists(o=>n(o,e)),ge=(t,e,n)=>t.isSome()&&e.isSome()?C.some(n(t.getOrDie(),e.getOrDie())):C.none(),is=(t,e)=>t?C.some(e):C.none(),Kx=typeof window<"u"?window:Function("return this;")(),jf=(t,e)=>((n,o)=>{let r=o??Kx;for(let s=0;s<n.length&&null!=r;++s)r=r[n[s]];return r})(t.split("."),e),Gx=Object.getPrototypeOf,At=t=>t.dom.nodeName.toLowerCase(),Hf=t=>t.dom.nodeType,Ta=t=>e=>Hf(e)===t,xe=Ta(1),Pe=Ta(3),Xx=Ta(9),Qx=Ta(11),Ql=t=>e=>xe(e)&&At(e)===t,$f=(t,e,n)=>{if(!(at(n)||wo(n)||Ze(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Xt=(t,e,n)=>{$f(t.dom,e,n)},Qn=(t,e)=>{const n=t.dom;_t(e,(o,r)=>{$f(n,r,o)})},Le=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},Ln=(t,e)=>C.from(Le(t,e)),Ba=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},ee=(t,e)=>{t.dom.removeAttribute(e)},Vf=t=>Re(t.dom.attributes,(e,n)=>(e[n.name]=n.value,e),{}),Jl=(t,e)=>{const n=Le(t,e);return void 0===n||""===n?[]:n.split(" ")},ls=t=>void 0!==t.dom.classList,qf=t=>Jl(t,"class"),Wf=(t,e)=>((n,o,r)=>{const s=Jl(n,o).concat([r]);return Xt(n,o,s.join(" ")),!0})(t,"class",e),Kf=(t,e)=>((n,o,r)=>{const s=ct(Jl(n,o),a=>a!==r);return s.length>0?Xt(n,o,s.join(" ")):ee(n,o),!1})(t,"class",e),pr=(t,e)=>{ls(t)?t.dom.classList.add(e):Wf(t,e)},Gf=t=>{0===(ls(t)?t.dom.classList:qf(t)).length&&ee(t,"class")},ds=(t,e)=>{ls(t)?t.dom.classList.remove(e):Kf(t,e),Gf(t)},Zl=(t,e)=>ls(t)&&t.dom.classList.contains(e),cs=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},Da=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const o="HTML does not have a single root node";throw console.error(o,t),new Error(o)}return cs(n.childNodes[0])},Qt=(t,e)=>{const n=(e||document).createElement(t);return cs(n)},hr=(t,e)=>{const n=(e||document).createTextNode(t);return cs(n)},N=cs,Yf=(t,e)=>{const n=[],o=s=>(n.push(s),e(s));let r=e(t);do{r=r.bind(o)}while(r.isSome());return n},tn=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const o=n;if(void 0!==o.matches)return o.matches(e);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(e);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(e);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},Xf=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,wt=(t,e)=>t.dom===e.dom,Mn=(t,e)=>{const n=t.dom,o=e.dom;return n!==o&&n.contains(o)},Qf=t=>N(t.dom.ownerDocument),In=t=>Xx(t)?t:Qf(t),us=t=>N(In(t).dom.defaultView),en=t=>C.from(t.dom.parentNode).map(N),td=t=>C.from(t.dom.parentElement).map(N),Jf=(t,e)=>{const n=Ct(e)?e:Bt;let o=t.dom;const r=[];for(;null!=o.parentNode;){const s=o.parentNode,a=N(s);if(r.push(a),!0===n(a))break;o=s}return r},Ro=t=>C.from(t.dom.previousSibling).map(N),ms=t=>C.from(t.dom.nextSibling).map(N),Zf=t=>ns(Yf(t,Ro)),tg=t=>Yf(t,ms),ne=t=>yt(t.dom.childNodes,N),Pa=(t,e)=>C.from(t.dom.childNodes[e]).map(N),ed=t=>Pa(t,0),nd=t=>Pa(t,t.dom.childNodes.length-1),eg=t=>t.dom.childNodes.length,od=t=>Qx(t)&&Y(t.dom.host),ng=Ct(Element.prototype.attachShadow)&&Ct(Node.prototype.getRootNode),Zx=G(ng),Jn=ng?t=>N(t.dom.getRootNode()):In,rd=t=>od(t)?t:(e=>{const n=e.dom.head;if(null==n)throw new Error("Head is not available yet");return N(n)})(In(t)),tk=t=>N(t.dom.host),og=t=>{if(Zx()&&Y(t.target)){const e=N(t.target);if(xe(e)&&ek(e)&&t.composed&&t.composedPath){const n=t.composedPath();if(n)return we(n)}}return C.from(t.target)},ek=t=>Y(t.dom.shadowRoot),br=t=>{const e=Pe(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(o=>{const r=Jn(o);return od(r)?C.some(r):C.none()})(N(e)).fold(()=>n.body.contains(e),lf(br,tk))};var rg=(t,e,n,o,r)=>t(n,o)?C.some(n):Ct(r)&&r(n)?C.none():e(n,o,r);const Fn=(t,e,n)=>{let o=t.dom;const r=Ct(n)?n:Bt;for(;o.parentNode;){o=o.parentNode;const s=N(o);if(e(s))return C.some(s);if(r(s))break}return C.none()},Ao=(t,e,n)=>rg((o,r)=>r(o),Fn,t,e,n),fs=(t,e,n)=>Fn(t,o=>tn(o,e),n),gs=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return Xf(r)?C.none():C.from(r.querySelector(n)).map(N)})(e,t),Oo=(t,e,n)=>rg((o,r)=>tn(o,r),fs,t,e,n),La=(t,e=!1)=>{return br(t)?t.dom.isContentEditable:(n=t,Oo(n,"[contenteditable]")).fold(G(e),o=>"true"===nk(o));var n},nk=t=>t.dom.contentEditable,ps=t=>void 0!==t.style&&Ct(t.style.getPropertyValue),sg=(t,e,n)=>{if(!at(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);ps(t)&&t.style.setProperty(e,n)},ag=(t,e,n)=>{sg(t.dom,e,n)},Ma=(t,e)=>{const n=t.dom;_t(e,(o,r)=>{sg(n,r,o)})},bn=(t,e)=>{const n=t.dom,o=window.getComputedStyle(n).getPropertyValue(e);return""!==o||br(t)?o:ig(n,e)},ig=(t,e)=>ps(t)?t.style.getPropertyValue(e):"",Ia=(t,e)=>{const o=ig(t.dom,e);return C.from(o).filter(r=>r.length>0)},lg=t=>{const e={},n=t.dom;if(ps(n))for(let o=0;o<n.style.length;o++){const r=n.style.item(o);e[r]=n.style[r]}return e},dg=(t,e)=>{var n,o;o=e,ps(n=t.dom)&&n.style.removeProperty(o),gr(Ln(t,"style").map(fr),"")&&ee(t,"style")},Me=(t,e)=>{en(t).each(n=>{n.dom.insertBefore(e.dom,t.dom)})},Zn=(t,e)=>{ms(t).fold(()=>{en(t).each(n=>{Vt(n,e)})},n=>{Me(n,e)})},cg=(t,e)=>{ed(t).fold(()=>{Vt(t,e)},n=>{t.dom.insertBefore(e.dom,n.dom)})},Vt=(t,e)=>{t.dom.appendChild(e.dom)},ug=(t,e)=>{Me(t,e),Vt(e,t)},To=(t,e)=>{H(e,n=>{Vt(t,n)})},vr=t=>{t.dom.textContent="",H(ne(t),e=>{Ot(e)})},Ot=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},Un=t=>{const e=ne(t);var n,o;e.length>0&&(n=t,H(o=e,(r,s)=>{Zn(0===s?n:o[s-1],r)})),Ot(t)},mg=t=>yt(t,N),fg=t=>t.dom.innerHTML,Fa=(t,e)=>{const n=Qf(t).dom,o=N(n.createDocumentFragment()),r=((s,a)=>{const i=(a||document).createElement("div");return i.innerHTML=s,ne(N(i))})(e,n);To(o,r),vr(t),Vt(t,o)},rk=(t,e,n,o)=>{t.dom.removeEventListener(e,n,o)},gg=(t,e)=>({left:t,top:e,translate:(n,o)=>gg(t+n,e+o)}),yr=gg,Ua=(t,e)=>void 0!==t?t:void 0!==e?e:0,sd=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?yr(n.offsetLeft,n.offsetTop):br(t)?(o=>{const r=o.getBoundingClientRect();return yr(r.left,r.top)})(e):yr(0,0)},ad=t=>{const e=void 0!==t?t.dom:document;return yr(e.body.scrollLeft||e.documentElement.scrollLeft,e.body.scrollTop||e.documentElement.scrollTop)},pg=(t,e)=>{Xn().browser.isSafari()&&Ct(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},hg=(t,e,n,o)=>({x:t,y:e,width:n,height:o,right:t+n,bottom:e+o}),bg=t=>{const e=void 0===t?window:t,o=ad(N(e.document));return(r=>{const s=void 0===r?window:r;return Xn().browser.isFirefox()?C.none():C.from(s.visualViewport)})(e).fold(()=>{const r=e.document.documentElement;return hg(o.left,o.top,r.clientWidth,r.clientHeight)},r=>hg(Math.max(r.pageLeft,o.left),Math.max(r.pageTop,o.top),r.width,r.height))},vg=(t,e)=>{let n=[];return H(ne(t),o=>{e(o)&&(n=n.concat([o])),n=n.concat(vg(o,e))}),n},se=(t,e)=>((n,o)=>{const r=void 0===o?document:o.dom;return Xf(r)?[]:yt(r.querySelectorAll(n),N)})(e,t),yg=(t,e,n)=>fs(t,e,n).isSome();class qt{constructor(e,n){this.node=e,this.rootNode=n,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}findSibling(e,n,o,r){if(e){if(!r&&e[n])return e[n];if(e!==this.rootNode){let s=e[o];if(s)return s;for(let a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(s=a[o],s)return s}}}findPreviousNode(e,n){if(e){const o=e.previousSibling;if(this.rootNode&&o===this.rootNode)return;if(o){if(!n)for(let s=o.lastChild;s;s=s.lastChild)if(!s.lastChild)return s;return o}const r=e.parentNode;if(r&&r!==this.rootNode)return r}}}const Bo=t=>e=>!!e&&e.nodeType===t,za=t=>!!t&&!Object.getPrototypeOf(t),Q=Bo(1),id=t=>{const e=t.toLowerCase();return n=>Y(n)&&n.nodeName.toLowerCase()===e},nn=t=>{const e=t.map(n=>n.toLowerCase());return n=>{if(n&&n.nodeName){const o=n.nodeName.toLowerCase();return St(e,o)}return!1}},ja=(t,e)=>{const n=e.toLowerCase().split(" ");return o=>{if(Q(o)){const r=o.ownerDocument.defaultView;if(r)for(let s=0;s<n.length;s++){const a=r.getComputedStyle(o,null);if((a?a.getPropertyValue(t):null)===n[s])return!0}}return!1}},Cg=t=>e=>Q(e)&&e.hasAttribute(t),Do=t=>Q(t)&&t.hasAttribute("data-mce-bogus"),zn=t=>Q(t)&&"TABLE"===t.tagName,wg=t=>e=>!(!Q(e)||e.contentEditable!==t&&e.getAttribute("data-mce-contenteditable")!==t),ld=nn(["textarea","input"]),j=Bo(3),sk=Bo(4),ak=Bo(7),to=Bo(8),hs=Bo(9),dd=Bo(11),Lt=id("br"),xg=id("img"),on=wg("true"),Nt=wg("false"),Ha=nn(["td","th"]),ik=nn(["td","th","caption"]),vn=nn(["video","audio","object","embed"]),lk=id("li"),Jt="\xa0",kg=t=>"\ufeff"===t,cd=((t,e)=>{const n=o=>t(o)?C.from(o.dom.nodeValue):C.none();return{get:o=>{if(!t(o))throw new Error("Can only get text value of a text node");return n(o).getOr("")},getOption:n,set:(o,r)=>{if(!t(o))throw new Error("Can only set raw text value of a text node");o.dom.nodeValue=r}}})(Pe),$a=t=>cd.get(t),Eg=t=>cd.getOption(t),dk=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),eo=t=>{let e;return n=>(e=e||jl(t,jt),pt(e,At(n)))},Ie=eo(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Va=t=>xe(t)&&!Ie(t),Po=t=>xe(t)&&"br"===At(t),Sg=eo(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),ud=eo(["ul","ol","dl"]),vs=eo(["li","dd","dt"]),ck=eo(["thead","tbody","tfoot"]),ys=eo(["td","th"]),qa=eo(["pre","script","textarea","style"]),uk=eo(dk),mk=t=>uk(t)||Va(t),Wa=()=>{const t=Qt("br");return Xt(t,"data-mce-bogus","1"),t},Lo=t=>{vr(t),Vt(t,Wa())},fk=t=>{nd(t).each(e=>{Ro(e).each(n=>{Ie(t)&&Po(e)&&Ie(n)&&Ot(e)})})},ae="\ufeff",Ka=kg,jn=t=>t.replace(/\uFEFF/g,""),gk=Q,Cr=j,wr=t=>(Cr(t)&&(t=t.parentNode),gk(t)&&t.hasAttribute("data-mce-caret")),no=t=>Cr(t)&&Ka(t.data),Fe=t=>wr(t)||no(t),_g=t=>t.firstChild!==t.lastChild||!Lt(t.firstChild),md=t=>{const e=t.container();return!!j(e)&&(e.data.charAt(t.offset())===ae||t.isAtStart()&&no(e.previousSibling))},fd=t=>{const e=t.container();return!!j(e)&&(e.data.charAt(t.offset()-1)===ae||t.isAtEnd()&&no(e.nextSibling))},Ga=t=>Cr(t)&&t.data[0]===ae,Ya=t=>Cr(t)&&t.data[t.data.length-1]===ae,gd=t=>t&&t.hasAttribute("data-mce-caret")?((e=>{var n;const o=e.getElementsByTagName("br"),r=o[o.length-1];Do(r)&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,Ng=t=>wr(t.startContainer),Rg=on,pk=Nt,hk=Lt,bk=j,vk=nn(["script","style","textarea"]),Ag=nn(["img","input","textarea","hr","iframe","video","audio","object","embed"]),yk=nn(["table"]),Ck=Fe,Ye=t=>!Ck(t)&&(bk(t)?!vk(t.parentNode):Ag(t)||hk(t)||yk(t)||pd(t)),pd=t=>{return!(Q(e=t)&&"true"===e.getAttribute("unselectable"))&&pk(t);var e},Og=(t,e)=>Ye(t)&&((n,o)=>{for(let r=n.parentNode;r&&r!==o;r=r.parentNode){if(pd(r))return!1;if(Rg(r))return!0}return!0})(t,e),wk=/^[ \t\r\n]*$/,Mo=t=>wk.test(t),Tg=t=>"\n"===t||"\r"===t,Bg=(t,e=4,n=!0,o=!0)=>{const r=(l=e)<=0?"":new Array(l+1).join(" "),s=t.replace(/\t/g,r);var l;return Re(s,(i,l)=>{return-1!==" \f\t\v".indexOf(l)||l===Jt?i.pcIsSpace||""===i.str&&n||i.str.length===s.length-1&&o||(c=i.str.length+1)<(d=s).length&&c>=0&&Tg(d[c])?{pcIsSpace:!1,str:i.str+Jt}:{pcIsSpace:!0,str:i.str+" "}:{pcIsSpace:Tg(l),str:i.str+l};var d,c},{pcIsSpace:!1,str:""}).str},Xa=(t,e)=>{return Ye(t)&&(o=e,!(j(n=t)&&Mo(n.data)&&!((r,s)=>{const a=N(s),i=N(r);return yg(i,"pre,code",Z(wt,a))})(n,o)))||(n=>Q(n)&&"A"===n.nodeName&&!n.hasAttribute("href")&&(n.hasAttribute("name")||n.hasAttribute("id")))(t)||xk(t);var n,o},xk=Cg("data-mce-bookmark"),kk=Cg("data-mce-bogus"),Ek=t=>Q(t)&&"all"===t.getAttribute("data-mce-bogus"),Ft=(t,e=!0)=>((n,o)=>{let r=0;if(Xa(n,n))return!1;{let s=n.firstChild;if(!s)return!0;const a=new qt(s,n);do{if(o){if(Ek(s)){s=a.next(!0);continue}if(kk(s)){s=a.next();continue}}if(Lt(s))r++,s=a.next();else{if(Xa(s,n))return!1;s=a.next()}}while(s);return r<=1}})(t.dom,e),Cs="data-mce-block",hd=t=>{return(e=t,ct(Oe(e),n=>!/[A-Z]/.test(n))).join(",");var e},Dg=(t,e)=>Y(e.querySelector(t))?(e.setAttribute(Cs,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(Cs),!1),Pg=(t,e)=>{const n=hd(t.getTransparentElements()),o=hd(t.getBlockElements());return ct(e.querySelectorAll(n),r=>Dg(o,r))},Lg=(t,e)=>{var n;const o=e?"lastChild":"firstChild";for(let r=t[o];r;r=r[o])if(Ft(N(r)))return void(null===(n=r.parentNode)||void 0===n||n.removeChild(r))},bd=(t,e)=>{const n=Pg(t,e);var o,r,s;((t,e,n)=>{const o=t.getBlockElements(),r=N(e),s=i=>At(i)in o,a=i=>wt(i,r);H(mg(n),i=>{Fn(i,s,a).each(l=>{const d=ct(ne(i),g=>s(g)&&!t.isValidChild(At(l),At(g)));if(d.length>0){const c=td(l);H(d,u=>{Fn(u,s,a).each(g=>{((p,f)=>{const h=document.createRange(),m=p.parentNode;if(m){h.setStartBefore(p),h.setEndBefore(f);const b=h.extractContents();Lg(b,!0),h.setStartAfter(f),h.setEndAfter(p);const v=h.extractContents();Lg(v,!1),Ft(N(b))||m.insertBefore(b,p),Ft(N(f))||m.insertBefore(f,p),Ft(N(v))||m.insertBefore(v,p),m.removeChild(p)}})(g.dom,u.dom)})}),c.each(u=>Pg(t,u.dom))}})})})(t,e,n),o=t,r=e,s=n,H([...s,...Io(o,r)?[r]:[]],a=>H(se(N(a),a.nodeName.toLowerCase()),i=>{Nk(o,i.dom)&&Un(i)}))},_k=(t,e)=>{if(yd(t,e)){const n=hd(t.getBlockElements());Dg(n,e)}},vd=t=>t.hasAttribute(Cs),Qa=(t,e)=>pt(t.getTransparentElements(),e),yd=(t,e)=>Q(e)&&Qa(t,e.nodeName),Io=(t,e)=>yd(t,e)&&vd(e),Nk=(t,e)=>yd(t,e)&&!vd(e),Mg=(t,e)=>1===e.type&&Qa(t,e.name)&&me(e.attr(Cs)),Rk=Xn().browser,Ig=t=>$t(t,xe),Fg=(t,e)=>t.children&&St(t.children,e),Ug=(t,e={})=>{let n=0;const o={},r=N(t),s=In(r),a=l=>new Promise((d,c)=>{let u;const g=$._addCacheSuffix(l),p=Rt(o,g).getOrThunk(()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}));o[g]=p,p.count++;const f=(y,w)=>{H(y,Jr),p.status=w,p.passed=[],p.failed=[],u&&(u.onload=null,u.onerror=null,u=null)},h=()=>f(p.passed,2),m=()=>f(p.failed,3);if(d&&p.passed.push(d),c&&p.failed.push(c),1===p.status)return;if(2===p.status)return void h();if(3===p.status)return void m();p.status=1;const b=Qt("link",s.dom);var v;Qn(b,{rel:"stylesheet",type:"text/css",id:p.id}),e.contentCssCors&&Xt(b,"crossOrigin","anonymous"),e.referrerPolicy&&Xt(b,"referrerpolicy",e.referrerPolicy),u=b.dom,u.onload=h,u.onerror=m,v=b,Vt(rd(r),v),Xt(b,"href",g)}),i=l=>{const d=$._addCacheSuffix(l);Rt(o,d).each(c=>{0==--c.count&&(delete o[d],(u=>{const g=rd(r);gs(g,"#"+u).each(Ot)})(c.id))})};return{load:a,loadAll:l=>Promise.allSettled(yt(l,d=>a(d).then(G(d)))).then(d=>{const c=Zr(d,u=>"fulfilled"===u.status);return c.fail.length>0?Promise.reject(yt(c.fail,u=>u.reason)):yt(c.pass,u=>u.value)}),unload:i,unloadAll:l=>{H(l,d=>{i(d)})},_setReferrerPolicy:l=>{e.referrerPolicy=l},_setContentCssCors:l=>{e.contentCssCors=l}}},zg=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const o=Jn(e).dom;return C.from(t.get(o)).getOrThunk(()=>{const r=Ug(o,n);return t.set(o,r),r})}}})(),jg=(t,e)=>Y(t)&&(Xa(t,e)||Va(N(t))),Hg=t=>"span"===t.nodeName.toLowerCase()&&"bookmark"===t.getAttribute("data-mce-type"),Cd=(t,e,n)=>{var o;const r=n||e;if(Q(e)&&Hg(e))return e;const s=e.childNodes;for(let a=s.length-1;a>=0;a--)Cd(t,s[a],r);if(Q(e)){const a=e.childNodes;1===a.length&&Hg(a[0])&&(null===(o=e.parentNode)||void 0===o||o.insertBefore(a[0],e))}return dd(a=e)||hs(a)||Xa(e,r)||(a=>!!Q(a)&&a.childNodes.length>0)(e)||((a,i)=>j(a)&&a.data.length>0&&((l,d)=>{const c=new qt(l,d).prev(!1),u=new qt(l,d).next(!1),g=me(c)||jg(c,d),p=me(u)||jg(u,d);return g&&p})(a,i))(e,r)||t.remove(e),e;var a},Ak=$.makeMap,Ja=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Za=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Ok=/[<>&\"\']/g,Tk=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,Bk={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Fo={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Dk={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},$g=(t,e)=>{const n={};if(t){const o=t.split(",");e=e||10;for(let r=0;r<o.length;r+=2){const s=String.fromCharCode(parseInt(o[r],e));if(!Fo[s]){const a="&"+o[r+1]+";";n[s]=a,n[a]=s}}return n}},wd=$g("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Vg=(t,e)=>t.replace(e?Ja:Za,n=>Fo[n]||n),qg=(t,e)=>t.replace(e?Ja:Za,n=>n.length>1?"&#"+(1024*(n.charCodeAt(0)-55296)+(n.charCodeAt(1)-56320)+65536)+";":Fo[n]||"&#"+n.charCodeAt(0)+";"),xd=(t,e,n)=>{const o=n||wd;return t.replace(e?Ja:Za,r=>Fo[r]||o[r]||r)},oo={encodeRaw:Vg,encodeAllRaw:t=>(""+t).replace(Ok,e=>Fo[e]||e),encodeNumeric:qg,encodeNamed:xd,getEncodeFunc:(t,e)=>{const n=$g(e)||wd,o=Ak(t.replace(/\+/g,","));return o.named&&o.numeric?(r,s)=>r.replace(s?Ja:Za,a=>void 0!==Fo[a]?Fo[a]:void 0!==n[a]?n[a]:a.length>1?"&#"+(1024*(a.charCodeAt(0)-55296)+(a.charCodeAt(1)-56320)+65536)+";":"&#"+a.charCodeAt(0)+";"):o.named?e?(r,s)=>xd(r,s,n):xd:o.numeric?qg:Vg},decode:t=>t.replace(Tk,(e,n)=>n?(n="x"===n.charAt(0).toLowerCase()?parseInt(n.substr(1),16):parseInt(n,10))>65535?(n-=65536,String.fromCharCode(55296+(n>>10),56320+(1023&n))):Bk[n]||String.fromCharCode(n):Dk[e]||wd[e]||(o=>{const r=Qt("div").dom;return r.innerHTML=o,r.textContent||r.innerText||o})(e))},ti={},ei={},Pk={},xr=$.makeMap,ie=$.each,kd=$.extend,Wg=$.explode,Lk=$.inArray,oe=(t,e)=>(t=$.trim(t))?t.split(e||" "):[],Kg=(t,e={})=>{const n=xr(t," ",xr(t.toUpperCase()," "));return kd(n,e)},Gg=t=>Kg("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Ed=(t,e)=>{if(t){const n={};return at(t)&&(t={"*":t}),ie(t,(o,r)=>{n[r]=n[r.toUpperCase()]="map"===e?xr(o,/[, ]/):Wg(o,/[, ]/)}),n}},ro=(t={})=>{var e;const n={},o={};let r=[];const s={},a={},i=(z,V,X)=>{const nt=t[z];if(nt)return xr(nt,/[, ]/,xr(nt.toUpperCase(),/[, ]/));{let lt=ei[z];return lt||(lt=Kg(V,X),ei[z]=lt),lt}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",d=(z=>{const V={};let X,nt,lt,dt;const K=(Ut,Tt="",ye="")=>{const Ce=oe(ye),un=oe(Ut);let Je=un.length;for(;Je--;){const Zt=oe([X,Tt].join(" "));V[un[Je]]={attributes:jl(Zt,()=>({})),attributesOrder:Zt,children:jl(Ce,G(Pk))}}},ft=(Ut,Tt)=>{const ye=oe(Ut),Ce=oe(Tt);let un=ye.length;for(;un--;){const Je=V[ye[un]];for(let Zt=0,_e=Ce.length;Zt<_e;Zt++)Je.attributes[Ce[Zt]]={},Je.attributesOrder.push(Ce[Zt])}};if(ti[z])return ti[z];if(X="id accesskey class dir lang style tabindex title role",nt="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",lt="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==z&&(X+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",nt+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",lt+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==z){X+=" xml:lang";const Ut="acronym applet basefont big font strike tt";lt=[lt,Ut].join(" "),ie(oe(Ut),ye=>{K(ye,"",lt)});const Tt="center dir isindex noframes";nt=[nt,Tt].join(" "),dt=[nt,lt].join(" "),ie(oe(Tt),ye=>{K(ye,"",dt)})}return dt=dt||[nt,lt].join(" "),K("html","manifest","head body"),K("head","","base command link meta noscript script style title"),K("title hr noscript br"),K("base","href target"),K("link","href rel media hreflang type sizes hreflang"),K("meta","name http-equiv content charset"),K("style","media type scoped"),K("script","src async defer type charset"),K("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",dt),K("address dt dd div caption","",dt),K("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",lt),K("blockquote","cite",dt),K("ol","reversed start type","li"),K("ul","","li"),K("li","value",dt),K("dl","","dt dd"),K("a","href target rel media hreflang type",dt),K("q","cite",lt),K("ins del","cite datetime",dt),K("img","src sizes srcset alt usemap ismap width height"),K("iframe","src name width height",dt),K("embed","src type width height"),K("object","data type typemustmatch name usemap form width height",[dt,"param"].join(" ")),K("param","name value"),K("map","name",[dt,"area"].join(" ")),K("area","alt coords shape href target rel media hreflang type"),K("table","border","caption colgroup thead tfoot tbody tr"+("html4"===z?" col":"")),K("colgroup","span","col"),K("col","span"),K("tbody thead tfoot","","tr"),K("tr","","td th"),K("td","colspan rowspan headers",dt),K("th","colspan rowspan headers scope abbr",dt),K("form","accept-charset action autocomplete enctype method name novalidate target",dt),K("fieldset","disabled form name",[dt,"legend"].join(" ")),K("label","form for",lt),K("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),K("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===z?dt:lt),K("select","disabled form multiple name required size","option optgroup"),K("optgroup","disabled label","option"),K("option","disabled label selected value"),K("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),K("menu","type label",[dt,"li"].join(" ")),K("noscript","",dt),"html4"!==z&&(K("wbr"),K("ruby","",[lt,"rt rp"].join(" ")),K("figcaption","",dt),K("mark rt rp summary bdi","",lt),K("canvas","width height",dt),K("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[dt,"track source"].join(" ")),K("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[dt,"track source"].join(" ")),K("picture","","img source"),K("source","src srcset type media sizes"),K("track","kind src srclang label default"),K("datalist","",[lt,"option"].join(" ")),K("article section nav aside main header footer","",dt),K("hgroup","","h1 h2 h3 h4 h5 h6"),K("figure","",[dt,"figcaption"].join(" ")),K("time","datetime",lt),K("dialog","open",dt),K("command","type label icon disabled checked radiogroup command"),K("output","for form name",lt),K("progress","value max",lt),K("meter","value min max low high optimum",lt),K("details","open",[dt,"summary"].join(" ")),K("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==z&&(ft("script","language xml:space"),ft("style","xml:space"),ft("object","declare classid code codebase codetype archive standby align border hspace vspace"),ft("embed","align name hspace vspace"),ft("param","valuetype type"),ft("a","charset name rev shape coords"),ft("br","clear"),ft("applet","codebase archive code object alt name width height align hspace vspace"),ft("img","name longdesc align border hspace vspace"),ft("iframe","longdesc frameborder marginwidth marginheight scrolling align"),ft("font basefont","size color face"),ft("input","usemap align"),ft("select"),ft("textarea"),ft("h1 h2 h3 h4 h5 h6 div p legend caption","align"),ft("ul","type compact"),ft("li","type"),ft("ol dl menu dir","compact"),ft("pre","width xml:space"),ft("hr","align noshade size width"),ft("isindex","prompt"),ft("table","summary width frame rules cellspacing cellpadding align bgcolor"),ft("col","width align char charoff valign"),ft("colgroup","width align char charoff valign"),ft("thead","align char charoff valign"),ft("tr","align char charoff valign bgcolor"),ft("th","axis align char charoff valign nowrap bgcolor width height"),ft("form","accept"),ft("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),ft("tfoot","align char charoff valign"),ft("tbody","align char charoff valign"),ft("area","nohref"),ft("body","background bgcolor text link vlink alink")),"html4"!==z&&(ft("input button select textarea","autofocus"),ft("input textarea","placeholder"),ft("a","download"),ft("link script img","crossorigin"),ft("img","loading"),ft("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==z&&H([V.video,V.audio],Ut=>{delete Ut.children.audio,delete Ut.children.video}),ie(oe("a form meter progress dfn"),Ut=>{V[Ut]&&delete V[Ut].children[Ut]}),delete V.caption.children.table,delete V.script,ti[z]=V,V})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const c=Ed(t.valid_styles),u=Ed(t.invalid_styles,"map"),g=Ed(t.valid_classes,"map"),p=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),f=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),h=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),m=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),b="td th iframe video audio object script code",v=i("non_empty_elements",b+" pre",h),y=i("move_caret_before_on_enter_elements",b+" table",h),w=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),k=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",w),x=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),S=i("transparent_elements","a ins del canvas map");ie("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),z=>{a[z]=new RegExp("</"+z+"[^>]*>","gi")});const E=z=>new RegExp("^"+z.replace(/([?+*])/g,".$1")+"$"),_=z=>{const V=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,X=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,nt=/[*?+]/;if(z){const lt=oe(z,",");let dt,K;n["@"]&&(dt=n["@"].attributes,K=n["@"].attributesOrder);for(let ft=0,Ut=lt.length;ft<Ut;ft++){let Tt=V.exec(lt[ft]);if(Tt){const ye=Tt[1],Ce=Tt[2],un=Tt[3],Je=Tt[5],Zt={},_e=[],Pt={attributes:Zt,attributesOrder:_e};if("#"===ye&&(Pt.paddEmpty=!0),"-"===ye&&(Pt.removeEmpty=!0),"!"===Tt[4]&&(Pt.removeEmptyAttrs=!0),dt&&(_t(dt,(Tn,yo)=>{Zt[yo]=Tn}),K&&_e.push(...K)),Je){const Tn=oe(Je,"|");for(let yo=0,Dl=Tn.length;yo<Dl;yo++)if(Tt=X.exec(Tn[yo]),Tt){const Bn={},Ca=Tt[1],Be=Tt[2].replace(/[\\:]:/g,":"),Co=Tt[3],De=Tt[4];if("!"===Ca&&(Pt.attributesRequired=Pt.attributesRequired||[],Pt.attributesRequired.push(Be),Bn.required=!0),"-"===Ca){delete Zt[Be],_e.splice(Lk(_e,Be),1);continue}if(Co&&("="===Co&&(Pt.attributesDefault=Pt.attributesDefault||[],Pt.attributesDefault.push({name:Be,value:De}),Bn.defaultValue=De),"~"===Co&&(Pt.attributesForced=Pt.attributesForced||[],Pt.attributesForced.push({name:Be,value:De}),Bn.forcedValue=De),"<"===Co&&(Bn.validValues=xr(De,"?"))),nt.test(Be)){const dr=Bn;Pt.attributePatterns=Pt.attributePatterns||[],dr.pattern=E(Be),Pt.attributePatterns.push(dr)}else Zt[Be]||_e.push(Be),Zt[Be]=Bn}}if(dt||"@"!==Ce||(dt=Zt,K=_e),un&&(Pt.outputName=Ce,n[un]=Pt),nt.test(Ce)){const Tn=Pt;Tn.pattern=E(Ce),r.push(Tn)}else n[Ce]=Pt}}}},D=z=>{r=[],H(Oe(n),V=>{delete n[V]}),_(z),ie(d,(V,X)=>{o[X]=V.children})},T=z=>{const V=/^(~)?(.+)$/;z&&(delete ei.text_block_elements,delete ei.block_elements,ie(oe(z,","),X=>{const nt=V.exec(X);if(nt){const lt="~"===nt[1],dt=lt?"span":"div",K=nt[2];if(o[K]=o[dt],s[K]=dt,v[K.toUpperCase()]={},v[K]={},lt||(k[K.toUpperCase()]={},k[K]={}),!n[K]){let ft=n[dt];ft=kd({},ft),delete ft.removeEmptyAttrs,delete ft.removeEmpty,n[K]=ft}ie(o,(ft,Ut)=>{ft[dt]&&(o[Ut]=ft=kd({},o[Ut]),ft[K]=ft[dt])})}}))},P=z=>{const V=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;delete ti[l],z&&ie(oe(z,","),X=>{const nt=V.exec(X);if(nt){const lt=nt[1];let dt;dt=lt?o[nt[2]]:o[nt[2]]={"#comment":{}},dt=o[nt[2]],ie(oe(nt[3],"|"),K=>{"-"===lt?delete dt[K]:dt[K]={}})}})},O=z=>{const V=n[z];if(V)return V;let X=r.length;for(;X--;){const nt=r[X];if(nt.pattern.test(z))return nt}};t.valid_elements?D(t.valid_elements):(ie(d,(z,V)=>{n[V]={attributes:z.attributes,attributesOrder:z.attributesOrder},o[V]=z.children}),ie(oe("strong/b em/i"),z=>{const V=oe(z,"/");n[V[1]].outputName=V[0]}),ie(x,(z,V)=>{n[V]&&(t.padd_empty_block_inline_children&&(n[V].paddInEmptyBlock=!0),n[V].removeEmpty=!0)}),ie(oe("ol ul blockquote a table tbody"),z=>{n[z]&&(n[z].removeEmpty=!0)}),ie(oe("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),z=>{n[z].paddEmpty=!0}),ie(oe("span"),z=>{n[z].removeEmptyAttrs=!0})),T(t.custom_elements),P(t.valid_children),_(t.extended_valid_elements),P("+ol[ul|ol],+ul[ul|ol]"),ie({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(z,V)=>{n[V]&&(n[V].parentsRequired=oe(z))}),t.invalid_elements&&ie(Wg(t.invalid_elements),z=>{n[z]&&delete n[z]}),O("span")||_("span[!data-mce-type|*]");const F=G(c),q=G(u),W=G(g),ot=G(m),st=G(k),ht=G(w),kt=G(x),et=G(Object.seal(h)),ut=G(f),mt=G(v),R=G(y),A=G(p),M=G(S),U=G(Object.seal(a)),I=G(s);return{type:l,children:o,elements:n,getValidStyles:F,getValidClasses:W,getBlockElements:st,getInvalidStyles:q,getVoidElements:et,getTextBlockElements:ht,getTextInlineElements:kt,getBoolAttrs:ot,getElementRule:O,getSelfClosingElements:ut,getNonEmptyElements:mt,getMoveCaretBeforeOnEnterElements:R,getWhitespaceElements:A,getTransparentElements:M,getSpecialElements:U,isValidChild:(z,V)=>{const X=o[z.toLowerCase()];return!(!X||!X[V.toLowerCase()])},isValid:(z,V)=>{const X=O(z);if(X){if(!V)return!0;{if(X.attributes[V])return!0;const nt=X.attributePatterns;if(nt){let lt=nt.length;for(;lt--;)if(nt[lt].pattern.test(V))return!0}}}return!1},getCustomElements:I,addValidElements:_,setValidElements:D,addCustomElements:T,addValidChildren:P}},Sd=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,o=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,s={};let a,i;e&&(a=e.getValidStyles(),i=e.getInvalidStyles());const l="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let c=0;c<l.length;c++)s[l[c]]="\ufeff"+c,s["\ufeff"+c]=l[c];const d={parse:c=>{const u={};let g=!1;const p=t.url_converter,f=t.url_converter_scope||d,h=(_,D,T)=>{const P=u[_+"-top"+D];if(!P)return;const O=u[_+"-right"+D];if(!O)return;const F=u[_+"-bottom"+D];if(!F)return;const q=u[_+"-left"+D];if(!q)return;const W=[P,O,F,q];let ot=W.length-1;for(;ot--&&W[ot]===W[ot+1];);ot>-1&&T||(u[_+D]=-1===ot?W[0]:W.join(" "),delete u[_+"-top"+D],delete u[_+"-right"+D],delete u[_+"-bottom"+D],delete u[_+"-left"+D])},m=_=>{const D=u[_];if(!D)return;const T=D.split(" ");let P=T.length;for(;P--;)if(T[P]!==T[0])return!1;return u[_]=T[0],!0},b=_=>(g=!0,s[_]),v=(_,D)=>(g&&(_=_.replace(/\uFEFF[0-9]/g,T=>s[T])),D||(_=_.replace(/\\([\'\";:])/g,"$1")),_),y=_=>String.fromCharCode(parseInt(_.slice(1),16)),w=_=>_.replace(/\\[0-9a-f]+/gi,y),k=(_,D,T,P,O,F)=>{if(O=O||F)return"'"+(O=v(O)).replace(/\'/g,"\\'")+"'";if(D=v(D||T||P||""),!t.allow_script_urls){const q=D.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(q)||!t.allow_svg_data_urls&&/^data:image\/svg/i.test(q))return""}return p&&(D=p.call(f,D,"style")),"url('"+D.replace(/\'/g,"\\'")+"')"};if(c){let _;for(c=(c=c.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,b).replace(/\"[^\"]+\"|\'[^\']+\'/g,D=>D.replace(/[;:]/g,b));_=o.exec(c);){o.lastIndex=_.index+_[0].length;let D=_[1].replace(r,"").toLowerCase(),T=_[2].replace(r,"");if(D&&T){if(D=w(D),T=w(T),-1!==D.indexOf("\ufeff")||-1!==D.indexOf('"')||!t.allow_script_urls&&("behavior"===D||/expression\s*\(|\/\*|\*\//.test(T)))continue;"font-weight"===D&&"700"===T?T="bold":"color"!==D&&"background-color"!==D||(T=T.toLowerCase()),T=T.replace(n,k),u[D]=g?v(T,!0):T}}h("border","",!0),h("border","-width"),h("border","-color"),h("border","-style"),h("padding",""),h("margin",""),S="border-style",E="border-color",m(x="border-width")&&m(S)&&m(E)&&(u.border=u[x]+" "+u[S]+" "+u[E],delete u[x],delete u[S],delete u[E]),"medium none"===u.border&&delete u.border,"none"===u["border-image"]&&delete u["border-image"]}var x,S,E;return u},serialize:(c,u)=>{let g="";const p=(f,h)=>{const m=h[f];if(m)for(let b=0,v=m.length;b<v;b++){const y=m[b],w=c[y];w&&(g+=(g.length>0?" ":"")+y+": "+w+";")}};return u&&a?(p("*",a),p(u,a)):_t(c,(f,h)=>{f&&((m,b)=>{if(!i||!b)return!0;let v=i["*"];return!(v&&v[m]||(v=i[b],v&&v[m]))})(h,u)&&(g+=(g.length>0?" ":"")+h+": "+f+";")}),g}};return d},Mk={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Yg=(t,e)=>{const n=e??{};for(const o in t)pt(Mk,o)||(n[o]=t[o]);return Y(t.composedPath)&&(n.composedPath=()=>t.composedPath()),n},_d=(t,e,n,o)=>{var r;const s=Yg(e,o);return s.type=t,zt(s.target)&&(s.target=null!==(r=s.srcElement)&&void 0!==r?r:n),(zt((a=e).preventDefault)||(i=a)instanceof Event||Ct(i.initEvent))&&(s.preventDefault=()=>{s.defaultPrevented=!0,s.isDefaultPrevented=jt,Ct(e.preventDefault)&&e.preventDefault()},s.stopPropagation=()=>{s.cancelBubble=!0,s.isPropagationStopped=jt,Ct(e.stopPropagation)&&e.stopPropagation()},s.stopImmediatePropagation=()=>{s.isImmediatePropagationStopped=jt,s.stopPropagation()},(a=>a.isDefaultPrevented===jt||a.isDefaultPrevented===Bt)(s)||(s.isDefaultPrevented=!0===s.defaultPrevented?jt:Bt,s.isPropagationStopped=!0===s.cancelBubble?jt:Bt,s.isImmediatePropagationStopped=Bt)),s;var a,i},Ik=/^(?:mouse|contextmenu)|click/,Nd=(t,e,n,o)=>{t.addEventListener(e,n,o||!1)},ni=(t,e,n,o)=>{t.removeEventListener(e,n,o||!1)},ws=(t,e)=>{const n=_d(t.type,t,document,e);if(Y(o=t)&&Ik.test(o.type)&&me(t.pageX)&&!me(t.clientX)){const o=n.target.ownerDocument||document,r=o.documentElement,s=o.body,a=n;a.pageX=t.clientX+(r&&r.scrollLeft||s&&s.scrollLeft||0)-(r&&r.clientLeft||s&&s.clientLeft||0),a.pageY=t.clientY+(r&&r.scrollTop||s&&s.scrollTop||0)-(r&&r.clientTop||s&&s.clientTop||0)}var o;return n},Fk=(t,e,n)=>{const o=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const s=()=>{ni(t,"DOMContentLoaded",s),ni(t,"load",s),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===o.readyState||"interactive"===o.readyState&&o.body?s():Nd(t,"DOMContentLoaded",s),n.domLoaded||Nd(t,"load",s)};class Uo{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(e,n,o,r){const s=this;let a;const i=window,l=g=>{s.executeHandlers(ws(g||i.event),d)};if(!e||j(e)||to(e))return o;let d;e[s.expando]?d=e[s.expando]:(d=s.count++,e[s.expando]=d,s.events[d]={}),r=r||e;const c=n.split(" ");let u=c.length;for(;u--;){let g=c[u],p=l,f=!1,h=!1;"DOMContentLoaded"===g&&(g="ready"),s.domLoaded&&"ready"===g&&"complete"===e.readyState?o.call(r,ws({type:g})):(s.hasFocusIn||"focusin"!==g&&"focusout"!==g||(f=!0,h="focusin"===g?"focus":"blur",p=m=>{const b=ws(m||i.event);b.type="focus"===b.type?"focusin":"focusout",s.executeHandlers(b,d)}),a=s.events[d][g],a?"ready"===g&&s.domLoaded?o(ws({type:g})):a.push({func:o,scope:r}):(s.events[d][g]=a=[{func:o,scope:r}],a.fakeName=h,a.capture=f,a.nativeHandler=p,"ready"===g?Fk(e,p,s):Nd(e,h||g,p,f)))}return e=a=null,o}unbind(e,n,o){if(!e||j(e)||to(e))return this;const r=e[this.expando];if(r){let s=this.events[r];if(n){const a=n.split(" ");let i=a.length;for(;i--;){const l=a[i],d=s[l];if(d){if(o){let c=d.length;for(;c--;)if(d[c].func===o){const u=d.nativeHandler,g=d.fakeName,p=d.capture,f=d.slice(0,c).concat(d.slice(c+1));f.nativeHandler=u,f.fakeName=g,f.capture=p,s[l]=f}}o&&0!==d.length||(delete s[l],ni(e,d.fakeName||l,d.nativeHandler,d.capture))}}}else _t(s,(a,i)=>{ni(e,a.fakeName||i,a.nativeHandler,a.capture)}),s={};for(const a in s)if(pt(s,a))return this;delete this.events[r];try{delete e[this.expando]}catch{e[this.expando]=null}}return this}fire(e,n,o){return this.dispatch(e,n,o)}dispatch(e,n,o){if(!e||j(e)||to(e))return this;const r=ws({type:n,target:e},o);do{const s=e[this.expando];s&&this.executeHandlers(r,s),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!r.isPropagationStopped());return this}clean(e){if(!e||j(e)||to(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);const n=e.getElementsByTagName("*");let o=n.length;for(;o--;)(e=n[o])[this.expando]&&this.unbind(e)}return this}destroy(){this.events={}}cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}executeHandlers(e,n){const o=this.events[n],r=o&&o[e.type];if(r)for(let s=0,a=r.length;s<a;s++){const i=r[s];if(i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}Uo.Event=new Uo;const Rd=$.each,Uk=$.grep,Ad="data-mce-style",zk=$.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),xs=(t,e,n)=>{zt(n)||""===n?ee(t,e):Xt(t,e,n)},Xg=t=>t.replace(/[A-Z]/g,e=>"-"+e.toLowerCase()),kr=(t,e)=>{let n=0;if(t)for(let o=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const s=r.nodeType;(!e||!j(r)||s!==o&&r.data.length)&&(n++,o=s)}return n},Qg=(t,e)=>{const n=Le(e,"style"),o=t.serialize(t.parse(n),At(e));xs(e,Ad,o)},Jg=(t,e,n)=>{const o=Xg(e);var r,s;zt(n)||""===n?dg(t,o):ag(t,o,(s=o,Ze(r=n)?pt(zk,s)?r+"":r+"px":r))},Et=(t,e={})=>{const n={},o=window,r={};let s=0;const a=zg.forElement(N(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),i=[],l=e.schema?e.schema:ro({}),d=Sd({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),c=e.ownEvents?new Uo:Uo.Event,u=l.getBlockElements(),g=R=>R&&t&&at(R)?t.getElementById(R):R,p=R=>{const A=g(R);return Y(A)?N(A):null},f=(R,A,M="")=>{let U;const I=p(R);if(Y(I)&&xe(I)){const z=mt[A];U=z&&z.get?z.get(I.dom,A):Le(I,A)}return Y(U)?U:M},h=R=>{const A=g(R);return zt(A)?[]:A.attributes},m=(R,A,M)=>{E(R,U=>{if(Q(U)){const I=N(U),z=""===M?null:M,V=Le(I,A),X=mt[A];X&&X.set?X.set(I.dom,z,A):xs(I,A,z),V!==z&&e.onSetAttrib&&e.onSetAttrib({attrElm:I.dom,attrName:A,attrValue:z})}})},b=()=>e.root_element||t.body,v=(R,A)=>((M,U,I)=>{let z=0,V=0;const X=M.ownerDocument;if(I=I||M,U){if(I===M&&U.getBoundingClientRect&&"static"===bn(N(M),"position")){const lt=U.getBoundingClientRect();return z=lt.left+(X.documentElement.scrollLeft||M.scrollLeft)-X.documentElement.clientLeft,V=lt.top+(X.documentElement.scrollTop||M.scrollTop)-X.documentElement.clientTop,{x:z,y:V}}let nt=U;for(;nt&&nt!==I&&nt.nodeType&&!Fg(nt,I);)z+=nt.offsetLeft||0,V+=nt.offsetTop||0,nt=nt.offsetParent;for(nt=U.parentNode;nt&&nt!==I&&nt.nodeType&&!Fg(nt,I);)z-=nt.scrollLeft||0,V-=nt.scrollTop||0,nt=nt.parentNode;V+=(lt=N(U),Rk.isFirefox()&&"table"===At(lt)?Ig(ne(lt)).filter(dt=>"caption"===At(dt)).bind(dt=>Ig(tg(dt)).map(K=>K.dom.offsetTop<=dt.dom.offsetTop?-dt.dom.offsetHeight:0)).getOr(0):0)}var lt;return{x:z,y:V}})(t.body,g(R),A),y=(R,A,M)=>{const U=g(R);if(!zt(U)&&Q(U))return M?bn(N(U),Xg(A)):("float"===(A=A.replace(/-(\D)/g,(I,z)=>z.toUpperCase()))&&(A="cssFloat"),U.style?U.style[A]:void 0)},w=R=>{const A=g(R);if(!A)return{w:0,h:0};let M=y(A,"width"),U=y(A,"height");return M&&-1!==M.indexOf("px")||(M="0"),U&&-1!==U.indexOf("px")||(U="0"),{w:parseInt(M,10)||A.offsetWidth||A.clientWidth,h:parseInt(U,10)||A.offsetHeight||A.clientHeight}},k=(R,A)=>{if(!R)return!1;const M=Ht(R)?R:[R];return It(M,U=>tn(N(U),A))},x=(R,A,M,U)=>{const I=[];let z=g(R);U=void 0===U;const V=M||("BODY"!==b().nodeName?b().parentNode:null);if(at(A))if("*"===A)A=Q;else{const X=A;A=nt=>k(nt,X)}for(;z&&!(z===V||zt(z.nodeType)||hs(z)||dd(z));){if(!A||A(z)){if(!U)return[z];I.push(z)}z=z.parentNode}return U?I:null},S=(R,A,M)=>{let U=A;if(R){at(A)&&(U=I=>k(I,A));for(let I=R[M];I;I=I[M])if(Ct(U)&&U(I))return I}return null},E=function(R,A,M){const U=M??this;if(Ht(R)){const I=[];return Rd(R,(z,V)=>{const X=g(z);X&&I.push(A.call(U,X,V))}),I}{const I=g(R);return!!I&&A.call(U,I)}},_=(R,A)=>{E(R,M=>{_t(A,(U,I)=>{m(M,I,U)})})},D=(R,A)=>{E(R,M=>{const U=N(M);Fa(U,A)})},T=(R,A,M,U,I)=>E(R,z=>{const V=at(A)?t.createElement(A):A;return Y(M)&&_(V,M),U&&(!at(U)&&U.nodeType?V.appendChild(U):at(U)&&D(V,U)),I?V:z.appendChild(V)}),P=(R,A,M)=>T(t.createElement(R),R,A,M,!0),O=oo.encodeAllRaw,F=(R,A)=>E(R,M=>{const U=N(M);return A&&H(ne(U),I=>{Pe(I)&&0===I.dom.length?Ot(I):Me(U,I)}),Ot(U),U.dom}),q=(R,A,M)=>{E(R,U=>{if(Q(U)){const I=N(U),z=A.split(" ");H(z,V=>{var X,nt,dt,K;Y(M)?(M?pr:ds)(I,V):(nt=V,ls(X=I)?X.dom.classList.toggle(nt):(K=nt,St(qf(dt=X),K)?Kf(dt,K):Wf(dt,K)),Gf(X))})}})},W=(R,A,M)=>E(A,U=>{var I;const z=Ht(A)?R.cloneNode(!0):R;return M&&Rd(Uk(U.childNodes),V=>{z.appendChild(V)}),null===(I=U.parentNode)||void 0===I||I.replaceChild(z,U),U}),ot=R=>{if(Q(R)){const A="a"===R.nodeName.toLowerCase()&&!f(R,"href")&&f(R,"id");if(f(R,"name")||f(R,"data-mce-bookmark")||A)return!0}return!1},st=()=>t.createRange(),ht=(R,A,M,U)=>{if(Ht(R)){let I=R.length;const z=[];for(;I--;)z[I]=ht(R[I],A,M,U);return z}return!e.collect||R!==t&&R!==o||i.push([R,A,M,U]),c.bind(R,A,M,U||ut)},kt=(R,A,M)=>{if(Ht(R)){let U=R.length;const I=[];for(;U--;)I[U]=kt(R[U],A,M);return I}if(i.length>0&&(R===t||R===o)){let U=i.length;for(;U--;){const[I,z,V]=i[U];R!==I||A&&A!==z||M&&M!==V||c.unbind(I,z,V)}}return c.unbind(R,A,M)},et=R=>{if(R&&Q(R)){const A=R.getAttribute("data-mce-contenteditable");return A&&"inherit"!==A?A:"inherit"!==R.contentEditable?R.contentEditable:null}return null},ut={doc:t,settings:e,win:o,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:i,styles:d,schema:l,events:c,isBlock:R=>at(R)?pt(u,R):Q(R)&&(pt(u,R.nodeName)||Io(l,R)),root:null,clone:(R,A)=>R.cloneNode(A),getRoot:b,getViewPort:R=>{const A=bg(R);return{x:A.x,y:A.y,w:A.width,h:A.height}},getRect:R=>{const A=g(R),M=v(A),U=w(A);return{x:M.x,y:M.y,w:U.w,h:U.h}},getSize:w,getParent:(R,A,M)=>{const U=x(R,A,M,!1);return U&&U.length>0?U[0]:null},getParents:x,get:g,getNext:(R,A)=>S(R,A,"nextSibling"),getPrev:(R,A)=>S(R,A,"previousSibling"),select:(R,A)=>{var M,U;const I=null!==(U=null!==(M=g(A))&&void 0!==M?M:e.root_element)&&void 0!==U?U:t;return Ct(I.querySelectorAll)?Ae(I.querySelectorAll(R)):[]},is:k,add:T,create:P,createHTML:(R,A,M="")=>{let U="<"+R;for(const I in A)mr(A,I)&&(U+=" "+I+'="'+O(A[I])+'"');return as(M)&&pt(l.getVoidElements(),R)?U+" />":U+">"+M+"</"+R+">"},createFragment:R=>{const A=t.createElement("div"),M=t.createDocumentFragment();let U;for(M.appendChild(A),R&&(A.innerHTML=R);U=A.firstChild;)M.appendChild(U);return M.removeChild(A),M},remove:F,setStyle:(R,A,M)=>{E(R,U=>{const I=N(U);Jg(I,A,M),e.update_styles&&Qg(d,I)})},getStyle:y,setStyles:(R,A)=>{E(R,M=>{const U=N(M);_t(A,(I,z)=>{Jg(U,z,I)}),e.update_styles&&Qg(d,U)})},removeAllAttribs:R=>E(R,A=>{const M=A.attributes;for(let U=M.length-1;U>=0;U--)A.removeAttributeNode(M.item(U))}),setAttrib:m,setAttribs:_,getAttrib:f,getPos:v,parseStyle:R=>d.parse(R),serializeStyle:(R,A)=>d.serialize(R,A),addStyle:R=>{if(ut!==Et.DOM&&t===document){if(n[R])return;n[R]=!0}let A=t.getElementById("mceDefaultStyles");if(!A){A=t.createElement("style"),A.id="mceDefaultStyles",A.type="text/css";const M=t.head;M.firstChild?M.insertBefore(A,M.firstChild):M.appendChild(A)}A.styleSheet?A.styleSheet.cssText+=R:A.appendChild(t.createTextNode(R))},loadCSS:R=>{R||(R=""),H(R.split(","),A=>{r[A]=!0,a.load(A).catch(bt)})},addClass:(R,A)=>{q(R,A,!0)},removeClass:(R,A)=>{q(R,A,!1)},hasClass:(R,A)=>{const M=p(R),U=A.split(" ");return Y(M)&&Yn(U,I=>Zl(M,I))},toggleClass:q,show:R=>{E(R,A=>dg(N(A),"display"))},hide:R=>{E(R,A=>ag(N(A),"display","none"))},isHidden:R=>{const A=p(R);return Y(A)&&gr(Ia(A,"display"),"none")},uniqueId:R=>(R||"mce_")+s++,setHTML:D,getOuterHTML:R=>{const A=p(R);return Y(A)?Q(A.dom)?A.dom.outerHTML:(M=>{const U=Qt("div"),I=N(M.dom.cloneNode(!0));return Vt(U,I),fg(U)})(A):""},setOuterHTML:(R,A)=>{E(R,M=>{Q(M)&&(M.outerHTML=A)})},decode:oo.decode,encode:O,insertAfter:(R,A)=>{const M=g(A);return E(R,U=>{const I=M?.parentNode,z=M?.nextSibling;return I&&(z?I.insertBefore(U,z):I.appendChild(U)),U})},replace:W,rename:(R,A)=>{if(R.nodeName!==A.toUpperCase()){const M=P(A);return Rd(h(R),U=>{m(M,U.nodeName,f(R,U.nodeName))}),W(M,R,!0),M}return R},findCommonAncestor:(R,A)=>{let M=R;for(;M;){let U=A;for(;U&&M!==U;)U=U.parentNode;if(M===U)break;M=M.parentNode}return!M&&R.ownerDocument?R.ownerDocument.documentElement:M},run:E,getAttribs:h,isEmpty:(R,A)=>{let M=0;if(ot(R))return!1;const U=R.firstChild;if(U){const I=new qt(U,R),z=l?l.getWhitespaceElements():{},V=A||(l?l.getNonEmptyElements():null);let X=U;do{if(Q(X)){const nt=X.getAttribute("data-mce-bogus");if(nt){X=I.next("all"===nt);continue}const lt=X.nodeName.toLowerCase();if(V&&V[lt]){if("br"===lt){M++,X=I.next();continue}return!1}if(ot(X))return!1}if(to(X)||j(X)&&!Mo(X.data)||j(X)&&X.parentNode&&z[X.parentNode.nodeName]&&Mo(X.data))return!1;X=I.next()}while(X)}return M<=1},createRng:st,nodeIndex:kr,split:(R,A,M)=>{let U,I,z=st();if(R&&A&&R.parentNode&&A.parentNode){const V=R.parentNode;return z.setStart(V,kr(R)),z.setEnd(A.parentNode,kr(A)),U=z.extractContents(),z=st(),z.setStart(A.parentNode,kr(A)+1),z.setEnd(V,kr(R)+1),I=z.extractContents(),V.insertBefore(Cd(ut,U),R),V.insertBefore(M||A,R),V.insertBefore(Cd(ut,I),R),F(R),M||A}},bind:ht,unbind:kt,fire:(R,A,M)=>c.dispatch(R,A,M),dispatch:(R,A,M)=>c.dispatch(R,A,M),getContentEditable:et,getContentEditableParent:R=>{const A=b();let M=null;for(let U=R;U&&U!==A&&(M=et(U),null===M);U=U.parentNode);return M},isEditable:R=>{if(Y(R)){const A=Q(R)?R:R.parentElement,M="true"===et(b());return Y(A)&&La(N(A),M)}return!1},destroy:()=>{if(i.length>0){let R=i.length;for(;R--;){const[A,M,U]=i[R];c.unbind(A,M,U)}}_t(r,(R,A)=>{a.unload(A),delete r[A]})},isChildOf:(R,A)=>R===A||A.contains(R),dumpRng:R=>"startContainer: "+R.startContainer.nodeName+", startOffset: "+R.startOffset+", endContainer: "+R.endContainer.nodeName+", endOffset: "+R.endOffset},mt=((R,A,M)=>{const U=A.keep_values,z={style:{set:(V,X)=>{const nt=N(V);U&&xs(nt,Ad,X),ee(nt,"style"),at(X)&&Ma(nt,R.parse(X))},get:V=>{const X=N(V),nt=Le(X,Ad)||Le(X,"style");return R.serialize(R.parse(nt),At(X))}}};return U&&(z.href=z.src={set:(V,X,nt)=>{const lt=N(V);Ct(A.url_converter)&&Y(X)&&(X=A.url_converter.call(A.url_converter_scope||M(),String(X),nt,V)),xs(lt,"data-mce-"+nt,X),xs(lt,nt,X)},get:(V,X)=>{const nt=N(V);return Le(nt,"data-mce-"+X)||Le(nt,X)}}),z})(d,e,G(ut));return ut};Et.DOM=Et(document),Et.nodeIndex=kr;const jk=Et.DOM;class Hn{constructor(e={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}_setReferrerPolicy(e){this.settings.referrerPolicy=e}loadScript(e){return new Promise((n,o)=>{const r=jk;let s;const a=()=>{r.remove(i),s&&(s.onerror=s.onload=s=null)},i=r.uniqueId();s=document.createElement("script"),s.id=i,s.type="text/javascript",s.src=$._addCacheSuffix(e),this.settings.referrerPolicy&&r.setAttrib(s,"referrerpolicy",this.settings.referrerPolicy),s.onload=()=>{a(),n()},s.onerror=()=>{a(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(s)})}isDone(e){return 2===this.states[e]}markDone(e){this.states[e]=2}add(e){const n=this;return n.queue.push(e),void 0===n.states[e]&&(n.states[e]=0),new Promise((o,r)=>{n.scriptLoadedCallbacks[e]||(n.scriptLoadedCallbacks[e]=[]),n.scriptLoadedCallbacks[e].push({resolve:o,reject:r})})}load(e){return this.add(e)}remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}loadQueue(){const e=this.queue;return this.queue=[],this.loadScripts(e)}loadScripts(e){const n=this,o=(l,d)=>{Rt(n.scriptLoadedCallbacks,d).each(c=>{H(c,u=>u[l](d))}),delete n.scriptLoadedCallbacks[d]},r=l=>{const d=ct(l,c=>"rejected"===c.status);return d.length>0?Promise.reject(fn(d,({reason:c})=>Ht(c)?c:[c])):Promise.resolve()},s=l=>Promise.allSettled(yt(l,d=>2===n.states[d]?(o("resolve",d),Promise.resolve()):3===n.states[d]?(o("reject",d),Promise.reject(d)):(n.states[d]=1,n.loadScript(d).then(()=>{n.states[d]=2,o("resolve",d);const c=n.queue;return c.length>0?(n.queue=[],s(c).then(r)):Promise.resolve()},()=>(n.states[d]=3,o("reject",d),Promise.reject(d)))))),a=l=>(n.loading=!0,s(l).then(d=>{n.loading=!1;const c=n.queueLoadedCallbacks.shift();return C.from(c).each(Jr),r(d)})),i=pf(e);return n.loading?new Promise((l,d)=>{n.queueLoadedCallbacks.push(()=>a(i).then(l,d))}):a(i)}}Hn.ScriptLoader=new Hn;const Kt=t=>{let e=t;return{get:()=>e,set:n=>{e=n}}},ks={},Od=Kt("en"),Zg=()=>Rt(ks,Od.get()),rn={getData:()=>Na(ks,t=>({...t})),setCode:t=>{t&&Od.set(t)},getCode:()=>Od.get(),add:(t,e)=>{let n=ks[t];n||(ks[t]=n={}),_t(e,(o,r)=>{n[r.toLowerCase()]=o})},translate:t=>{const e=Zg().getOr({}),n=i=>Ct(i)?Object.prototype.toString.call(i):o(i)?"":""+i,o=i=>""===i||null==i,r=i=>{const l=n(i);return Rt(e,l.toLowerCase()).map(n).getOr(l)},s=i=>i.replace(/{context:\w+}$/,"");if(o(t))return"";if(le(a=t)&&pt(a,"raw"))return n(t.raw);var a,i;if(Ht(i=t)&&i.length>1){const i=t.slice(1);return s(r(t[0]).replace(/\{([0-9]+)\}/g,(l,d)=>pt(i,d)?n(i[d]):l))}return s(r(t))},isRtl:()=>Zg().bind(t=>Rt(t,"_dir")).exists(t=>"rtl"===t),hasCode:t=>pt(ks,t)},de=()=>{const t=[],e={},n={},o=[],r=(l,d)=>{const c=ct(o,u=>u.name===l&&u.state===d);H(c,u=>u.resolve())},s=l=>pt(e,l),a=(l,d)=>{const c=rn.getCode();!c||d&&-1===(","+(d||"")+",").indexOf(","+c+",")||Hn.ScriptLoader.add(e[l]+"/langs/"+c+".js")},i=(l,d="added")=>"added"===d&&pt(n,l)||"loaded"===d&&s(l)?Promise.resolve():new Promise(c=>{o.push({name:l,state:d,resolve:c})});return{items:t,urls:e,lookup:n,get:l=>{if(n[l])return n[l].instance},requireLangPack:(l,d)=>{!1!==de.languageLoad&&(s(l)?a(l,d):i(l,"loaded").then(()=>a(l,d)))},add:(l,d)=>(t.push(d),n[l]={instance:d},r(l,"added"),d),remove:l=>{delete e[l],delete n[l]},createUrl:(l,d)=>at(d)?at(l)?{prefix:"",resource:d,suffix:""}:{prefix:l.prefix,resource:d,suffix:l.suffix}:d,load:(l,d)=>{if(e[l])return Promise.resolve();let c=at(d)?d:d.prefix+d.resource+d.suffix;0!==c.indexOf("/")&&-1===c.indexOf("://")&&(c=de.baseURL+"/"+c),e[l]=c.substring(0,c.lastIndexOf("/"));const u=()=>(r(l,"loaded"),Promise.resolve());return n[l]?u():Hn.ScriptLoader.add(c).then(u)},waitFor:i}};de.languageLoad=!0,de.baseURL="",de.PluginManager=de(),de.ThemeManager=de(),de.ModelManager=de();const Hk=t=>{const e=Kt(C.none()),n=()=>e.get().each(o=>clearInterval(o));return{clear:()=>{n(),e.set(C.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:o=>{n(),e.set(C.some(setInterval(o,t)))}}},so=()=>{const t=(e=>{const n=Kt(C.none()),o=()=>n.get().each(e);return{clear:()=>{o(),n.set(C.none())},isSet:()=>n.get().isSome(),get:()=>n.get(),set:r=>{o(),n.set(C.some(r))}}})(bt);return{...t,on:e=>t.get().each(e)}},oi=(t,e)=>{let n=null;return{cancel:()=>{Ge(n)||(clearTimeout(n),n=null)},throttle:(...o)=>{Ge(n)&&(n=setTimeout(()=>{n=null,t.apply(null,o)},e))}}},Td=(t,e)=>{let n=null;const o=()=>{Ge(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:(...r)=>{o(),n=setTimeout(()=>{n=null,t.apply(null,r)},e)}}},Es=G("mce-annotation"),zo=G("data-mce-annotation"),Er=G("data-mce-annotation-uid"),Ss=G("data-mce-annotation-active"),_s=G("data-mce-annotation-classes"),Ns=G("data-mce-annotation-attrs"),tp=t=>e=>wt(e,t),ep=(t,e)=>{const n=t.selection.getRng(),o=N(n.startContainer),r=N(t.getBody()),s=e.fold(()=>"."+Es(),i=>`[${zo()}="${i}"]`),a=Pa(o,n.startOffset).getOr(o);return Oo(a,s,tp(r)).bind(i=>Ln(i,`${Er()}`).bind(l=>Ln(i,`${zo()}`).map(d=>{const c=op(t,l);return{uid:l,name:d,elements:c}})))},np=(t,e)=>Ba(t,"data-mce-bogus")||yg(t,'[data-mce-bogus="all"]',tp(e)),op=(t,e)=>{const n=N(t.getBody()),o=se(n,`[${Er()}="${e}"]`);return ct(o,r=>!np(r,n))},rp=(t,e)=>{const n=N(t.getBody()),o=se(n,`[${zo()}="${e}"]`),r={};return H(o,s=>{if(!np(s,n)){const a=Le(s,Er()),i=Rt(r,a).getOr([]);r[a]=i.concat([s])}}),r};let sp=0;const ap=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return sp++,t+"_"+n+sp+String(e)},ip=(t,e)=>N(t.dom.cloneNode(e)),jo=t=>ip(t,!1),lp=t=>ip(t,!0),dp=(t,e,n=Bt)=>{const o=new qt(t,e),r=s=>{let a;do{a=o[s]()}while(a&&!j(a)&&!n(a));return C.from(a).filter(j)};return{current:()=>C.from(o.current()).filter(j),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},Ho=(t,e)=>{const n=e||(r=>t.isBlock(r)||Lt(r)||Nt(r)),o=(r,s,a,i)=>{if(j(r)){const l=i(r,s,r.data);if(-1!==l)return C.some({container:r,offset:l})}return a().bind(l=>o(l.container,l.offset,a,i))};return{backwards:(r,s,a,i)=>{const l=dp(r,i??t.getRoot(),n);return o(r,s,()=>l.prev().map(d=>({container:d,offset:d.length})),a).getOrNull()},forwards:(r,s,a,i)=>{const l=dp(r,i??t.getRoot(),n);return o(r,s,()=>l.next().map(d=>({container:d,offset:0})),a).getOrNull()}}},Sr=Math.round,$o=t=>t?{left:Sr(t.left),top:Sr(t.top),bottom:Sr(t.bottom),right:Sr(t.right),width:Sr(t.width),height:Sr(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},cp=(t,e)=>(t=$o(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),up=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,Rs=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&up(e.top-t.bottom,t,e)},As=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&up(e.bottom-t.top,t,e),mp=(t,e,n)=>{const o=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-o)*(e-o)+(n-r)*(n-r))},ri=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},ao=(t,e)=>{if(Q(t)&&t.hasChildNodes()){const n=t.childNodes;return n[(a=n.length-1,Math.min(Math.max(e,0),a))]}var a;return t},$k=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),fp=t=>at(t)&&t.charCodeAt(0)>=768&&$k.test(t),gp=Q,Vk=Ye,pp=ja("display","block table"),qk=ja("float","left right"),Os=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(gp,Vk,Ea(qk)),Wk=Ea(ja("white-space","pre pre-line pre-wrap")),Ts=j,Bd=Lt,hp=Et.nodeIndex,si=(t,e)=>e<0&&Q(t)&&t.hasChildNodes()?void 0:ao(t,e),Dd=t=>t?t.createRange():Et.DOM.createRng(),Pd=t=>at(t)&&/[\r\n\t ]/.test(t),bp=t=>!!t.setStart&&!!t.setEnd,Ld=t=>{const e=t.startContainer,n=t.startOffset;if(Pd(t.toString())&&Wk(e.parentNode)&&j(e)){const o=e.data;if(Pd(o[n-1])||Pd(o[n+1]))return!0}return!1},vp=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,io=t=>{var e;let n;const o=t.getClientRects();return n=$o(o.length>0?o[0]:t.getBoundingClientRect()),!bp(t)&&Bd(t)&&vp(n)?(r=>{const s=r.ownerDocument,a=Dd(s),i=s.createTextNode(Jt),l=r.parentNode;l.insertBefore(i,r),a.setStart(i,0),a.setEnd(i,1);const d=$o(a.getBoundingClientRect());return l.removeChild(i),d})(t):vp(n)&&bp(t)&&null!==(e=(r=>{const a=r.endContainer,i=r.startOffset,l=r.endOffset;if(r.startContainer===a&&j(a)&&0===i&&1===l){const d=r.cloneRange();return d.setEndAfter(a),io(d)}return null})(t))&&void 0!==e?e:n},Vo=(t,e)=>{const n=cp(t,e);return n.width=1,n.right=n.left+1,n},L=(t,e,n)=>{const o=()=>(n||(n=(r=>{const s=[],a=c=>{var u,g;0!==c.height&&(s.length>0&&(u=c).left===(g=s[s.length-1]).left&&u.top===g.top&&u.bottom===g.bottom&&u.right===g.right||s.push(c))},i=(c,u)=>{const g=Dd(c.ownerDocument);if(u<c.data.length){if(fp(c.data[u]))return;if(fp(c.data[u-1])&&(g.setStart(c,u),g.setEnd(c,u+1),!Ld(g)))return void a(Vo(io(g),!1))}u>0&&(g.setStart(c,u-1),g.setEnd(c,u),Ld(g)||a(Vo(io(g),!1))),u<c.data.length&&(g.setStart(c,u),g.setEnd(c,u+1),Ld(g)||a(Vo(io(g),!0)))},l=r.container(),d=r.offset();if(Ts(l))return i(l,d),s;if(gp(l))if(r.isAtEnd()){const c=si(l,d);Ts(c)&&i(c,c.data.length),Os(c)&&!Bd(c)&&a(Vo(io(c),!1))}else{const c=si(l,d);if(Ts(c)&&i(c,0),Os(c)&&r.isAtEnd())return a(Vo(io(c),!1)),s;const u=si(r.container(),r.offset()-1);Os(u)&&!Bd(u)&&(pp(u)||pp(c)||!Os(c))&&a(Vo(io(u),!1)),Os(c)&&a(Vo(io(c),!0))}return s})(L(t,e))),n);return{container:G(t),offset:G(e),toRange:()=>{const r=Dd(t.ownerDocument);return r.setStart(t,e),r.setEnd(t,e),r},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(Ts(t),0===e),isAtEnd:()=>Ts(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:r=>r&&t===r.container()&&e===r.offset(),getNode:r=>si(t,r?e-1:e)}};L.fromRangeStart=t=>L(t.startContainer,t.startOffset),L.fromRangeEnd=t=>L(t.endContainer,t.endOffset),L.after=t=>L(t.parentNode,hp(t)+1),L.before=t=>L(t.parentNode,hp(t)),L.isAbove=(t,e)=>ge(we(e.getClientRects()),Eo(t.getClientRects()),Rs).getOr(!1),L.isBelow=(t,e)=>ge(Eo(e.getClientRects()),we(t.getClientRects()),As).getOr(!1),L.isAtStart=t=>!!t&&t.isAtStart(),L.isAtEnd=t=>!!t&&t.isAtEnd(),L.isTextPosition=t=>!!t&&j(t.container()),L.isElementPosition=t=>!L.isTextPosition(t);const ai=(t,e)=>{j(e)&&0===e.data.length&&t.remove(e)},Md=(t,e,n)=>{var o,s;dd(n)?((o,r,s)=>{const a=C.from(s.firstChild),i=C.from(s.lastChild);r.insertNode(s),a.each(l=>ai(o,l.previousSibling)),i.each(l=>ai(o,l.nextSibling))})(t,e,n):(o=t,e.insertNode(s=n),ai(o,s.previousSibling),ai(o,s.nextSibling))},sn=j,yp=Do,Cp=Et.nodeIndex,wp=t=>{const e=t.parentNode;return yp(e)?wp(e):e},Id=t=>t?Aa(t.childNodes,(e,n)=>(yp(n)&&"BR"!==n.nodeName?e=e.concat(Id(n)):e.push(n),e),[]):[],xp=t=>e=>t===e,kp=t=>(sn(t)?"text()":t.nodeName.toLowerCase())+"["+(e=>{let n,o;n=Id(wp(e)),o=bf(n,xp(e),e),n=n.slice(0,o+1);const r=Aa(n,(s,a,i)=>(sn(a)&&sn(n[i-1])&&s++,s),0);return n=rs(n,nn([e.nodeName])),o=bf(n,xp(e),e),o-r})(t)+"]",Ep=(t,e)=>{let n,o=[],r=e.container(),s=e.offset();if(sn(r))n=((i,l)=>{let d=i;for(;(d=d.previousSibling)&&sn(d);)l+=d.data.length;return l})(r,s);else{const i=r.childNodes;s>=i.length?(n="after",s=i.length-1):n="before",r=i[s]}o.push(kp(r));let a=((i,l,d)=>{const c=[];for(let u=l.parentNode;u&&u!==i;u=u.parentNode)c.push(u);return c})(t,r);return a=rs(a,Ea(Do)),o=o.concat(Wl(a,i=>kp(i))),o.reverse().join("/")+","+n},Sp=(t,e)=>{if(!e)return null;const n=e.split(","),o=n[0].split("/"),r=n.length>1?n[1]:"before",s=Aa(o,(a,i)=>{const l=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(i);return l?("text()"===l[1]&&(l[1]="#text"),((d,c,u)=>{let g=Id(d);return g=rs(g,(p,f)=>!sn(p)||!sn(g[f-1])),g=rs(g,nn([c])),g[u]})(a,l[1],parseInt(l[2],10))):null},t);if(!s)return null;if(!sn(s)&&s.parentNode){let a;return a="after"===r?Cp(s)+1:Cp(s),L(s.parentNode,a)}return((a,i)=>{let l=a,d=0;for(;sn(l);){const c=l.data.length;if(i>=d&&i<=d+c){a=l,i-=d;break}if(!sn(l.nextSibling)){a=l,i=c;break}d+=c,l=l.nextSibling}return sn(a)&&i>a.data.length&&(i=a.data.length),L(a,i)})(s,parseInt(r,10))},ii=Nt,_p=(t,e,n,o,r)=>{const s=r?o.startContainer:o.endContainer;let a=r?o.startOffset:o.endOffset;const i=[],l=t.getRoot();if(j(s))i.push(n?((d,c,u)=>{let g=d(c.data.slice(0,u)).length;for(let p=c.previousSibling;p&&j(p);p=p.previousSibling)g+=d(p.data).length;return g})(e,s,a):a);else{let d=0;const c=s.childNodes;a>=c.length&&c.length&&(d=1,a=Math.max(0,c.length-1)),i.push(t.nodeIndex(c[a],n)+d)}for(let d=s;d&&d!==l;d=d.parentNode)i.push(t.nodeIndex(d,n));return i},Fd=(t,e,n)=>{let o=0;return $.each(t.select(e),r=>"all"===r.getAttribute("data-mce-bogus")?void 0:r!==n&&void o++),o},Np=(t,e)=>{let n=e?t.startContainer:t.endContainer,o=e?t.startOffset:t.endOffset;if(Q(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(e?o:o-1,r.length-1)],n&&(o=e?0:n.childNodes.length,e?t.setStart(n,o):t.setEnd(n,o))}},Rp=t=>(Np(t,!0),Np(t,!1),t),Ap=(t,e)=>{if(Q(t)&&(t=ao(t,e),ii(t)))return t;if(Fe(t)){j(t)&&wr(t)&&(t=t.parentNode);let n=t.previousSibling;if(ii(n)||(n=t.nextSibling,ii(n)))return n}},Op=(t,e,n)=>{const o=n.getNode(),r=n.getRng();if("IMG"===o.nodeName||ii(o)){const a=o.nodeName;return{name:a,index:Fd(n.dom,a,o)}}const s=Ap((a=r).startContainer,a.startOffset)||Ap(a.endContainer,a.endOffset);var a;if(s){const a=s.tagName;return{name:a,index:Fd(n.dom,a,s)}}return((a,i,l,d)=>{const c=i.dom,u=_p(c,a,l,d,!0),g=i.isForward(),p=Ng(d)?{isFakeCaret:!0}:{};return i.isCollapsed()?{start:u,forward:g,...p}:{start:u,end:_p(c,a,l,d,!1),forward:g,...p}})(t,n,e,r)},Tp=(t,e,n)=>{const o={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",o,"&#xFEFF;"):t.create("span",o)},Bp=(t,e)=>{const n=t.dom;let o=t.getRng();const r=n.uniqueId(),s=t.isCollapsed(),a=t.getNode(),i=a.nodeName,l=t.isForward();if("IMG"===i)return{name:i,index:Fd(n,i,a)};const d=Rp(o.cloneRange());if(!s){d.collapse(!1);const u=Tp(n,r+"_end",e);Md(n,d,u)}o=Rp(o),o.collapse(!0);const c=Tp(n,r+"_start",e);return Md(n,o,c),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},Ud=Z(Op,fe,!0),Dp=t=>{const e=s=>s(t),n=G(t),o=()=>r,r={tag:!0,inner:t,fold:(s,a)=>a(t),isValue:jt,isError:Bt,map:s=>pe.value(s(t)),mapError:o,bind:e,exists:e,forall:e,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:s=>{s(t)},toOptional:()=>C.some(t)};return r},Pp=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(o,r)=>o(t),isValue:Bt,isError:jt,map:e,mapError:o=>pe.error(o(t)),bind:e,exists:Bt,forall:jt,getOr:fe,or:fe,getOrThunk:Ul,orThunk:Ul,getOrDie:df(String(t)),each:bt,toOptional:C.none};return n},pe={value:Dp,error:Pp,fromOption:(t,e)=>t.fold(()=>Pp(e),Dp)},yn=t=>{if(!Ht(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return H(t,(o,r)=>{const s=Oe(o);if(1!==s.length)throw new Error("one and only one name per case");const a=s[0],i=o[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!Ht(i))throw new Error("case arguments must be an array");e.push(a),n[a]=(...l)=>{const d=l.length;if(d!==i.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+i.length+" ("+i+"), got "+d);return{fold:(...c)=>{if(c.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+c.length);return c[r].apply(null,l)},match:c=>{const u=Oe(c);if(e.length!==u.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+u.join(","));if(!Yn(e,g=>St(u,g)))throw new Error("Not all branches were specified when using match. Specified: "+u.join(", ")+"\nRequired: "+e.join(", "));return c[a].apply(null,l)},log:c=>{console.log(c,{constructors:e,constructor:a,params:l})}}}}),n};yn([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const Kk=t=>"inline-command"===t.type||"inline-format"===t.type,Gk=t=>"block-command"===t.type||"block-format"===t.type,Yk=t=>{const e=o=>pe.error({message:o,pattern:t}),n=(o,r,s)=>{if(void 0!==t.format){let a;if(Ht(t.format)){if(!Yn(t.format,at))return e(o+" pattern has non-string items in the `format` array");a=t.format}else{if(!at(t.format))return e(o+" pattern has non-string `format` parameter");a=[t.format]}return pe.value(r(a))}return void 0!==t.cmd?at(t.cmd)?pe.value(s(t.cmd,t.value)):e(o+" pattern has non-string `cmd` parameter"):e(o+" pattern is missing both `format` and `cmd` parameters")};if(!le(t))return e("Raw pattern is not an object");if(!at(t.start))return e("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!at(t.end))return e("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return e("Inline pattern has empty `start` and `end` parameters");let o=t.start,r=t.end;return 0===r.length&&(r=o,o=""),n("Inline",s=>({type:"inline-format",start:o,end:r,format:s}),(s,a)=>({type:"inline-command",start:o,end:r,cmd:s,value:a}))}return void 0!==t.replacement?at(t.replacement)?0===t.start.length?e("Replacement pattern has empty `start` parameter"):pe.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):e("Replacement pattern has non-string `replacement` parameter"):0===t.start.length?e("Block pattern has empty `start` parameter"):n("Block",o=>({type:"block-format",start:t.start,format:o[0]}),(o,r)=>({type:"block-command",start:t.start,cmd:o,value:r}))},Lp=t=>ct(t,Gk),Mp=t=>ct(t,Kk),Ip=t=>{const e=(n=>{const o=[],r=[];return H(n,s=>{s.fold(a=>{o.push(a)},a=>{r.push(a)})}),{errors:o,values:r}})(yt(t,Yk));return H(e.errors,n=>console.error(n.message,n.pattern)),e.values},zd=Xn().deviceType,Xk=zd.isTouch(),Qk=Et.DOM,Fp=t=>ka(t,RegExp),J=t=>e=>e.options.get(t),jd=t=>at(t)||le(t),Up=(t,e="")=>n=>{const o=at(n);if(o){if(-1!==n.indexOf("=")){const r=(s=>{const a=s.indexOf("=")>0?s.split(/[;,](?![^=;,]*(?:[;,]|$))/):s.split(",");return Re(a,(i,l)=>{const d=l.split("="),c=d[0],u=d.length>1?d[1]:c;return i[fr(c)]=fr(u),i},{})})(n);return{value:Rt(r,t.id).getOr(e),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}},Jk=J("iframe_attrs"),Zk=J("doctype"),zp=J("document_base_url"),tE=J("body_id"),eE=J("body_class"),jp=J("content_security_policy"),nE=J("br_in_pre"),Te=J("forced_root_block"),Bs=J("forced_root_block_attrs"),oE=J("newline_behavior"),rE=J("br_newline_selector"),sE=J("no_newline_selector"),aE=J("keep_styles"),iE=J("end_container_on_empty_block"),Hp=J("automatic_uploads"),$p=J("images_reuse_filename"),lE=J("images_replace_blob_uris"),Vp=J("icons"),dE=J("icons_url"),cE=J("images_upload_url"),uE=J("images_upload_base_path"),mE=J("images_upload_credentials"),fE=J("images_upload_handler"),gE=J("content_css_cors"),Hd=J("referrer_policy"),qp=J("language"),pE=J("language_url"),Wp=J("indent_use_margin"),hE=J("indentation"),bE=J("content_css"),vE=J("content_style"),Kp=J("font_css"),yE=J("directionality"),CE=J("inline_boundaries_selector"),Gp=J("object_resizing"),wE=J("resize_img_proportional"),xE=J("placeholder"),Yp=J("event_root"),kE=J("service_message"),_r=J("theme"),EE=J("theme_url"),$d=J("model"),SE=J("model_url"),Ds=J("inline_boundaries"),_E=J("formats"),NE=J("preview_styles"),RE=J("format_empty_lines"),AE=J("format_noneditable_selector"),OE=J("custom_ui_selector"),Vd=J("inline"),TE=J("hidden_input"),BE=J("submit_patch"),DE=J("add_form_submit_trigger"),PE=J("add_unload_trigger"),LE=J("custom_undo_redo_levels"),ME=J("disable_nodechange"),Xp=J("readonly"),Qp=J("content_css_cors"),li=J("plugins"),IE=J("external_plugins"),FE=J("block_unsupported_drop"),UE=J("visual"),zE=J("visual_table_class"),Jp=J("visual_anchor_class"),jE=J("iframe_aria_text"),HE=J("setup"),$E=J("init_instance_callback"),VE=J("urlconverter_callback"),qE=J("auto_focus"),WE=J("browser_spellcheck"),KE=J("protect"),GE=J("paste_block_drop"),di=J("paste_data_images"),YE=J("paste_preprocess"),XE=J("paste_postprocess"),QE=J("paste_webkit_styles"),JE=J("paste_remove_styles_if_webkit"),ZE=J("paste_merge_formats"),tS=J("smart_paste"),eS=J("paste_as_text"),nS=J("paste_tab_spaces"),oS=J("allow_html_data_urls"),rS=J("text_patterns"),sS=J("text_patterns_lookup"),Zp=J("noneditable_class"),aS=J("editable_class"),iS=J("noneditable_regexp"),lS=J("preserve_cdata"),dS=J("highlight_on_focus"),qd=J("xss_sanitization"),th=t=>$.explode(t.options.get("images_file_types")),cS=J("table_tab_navigation"),uS=Q,eh=j,nh=t=>{const e=t.parentNode;e&&e.removeChild(t)},oh=t=>{const e=jn(t);return{count:t.length-e.length,text:e}},rh=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(ae));)t.deleteData(e,1)},sh=(t,e)=>(qo(t),e),qo=t=>{uS(t)&&Fe(t)&&(_g(t)?t.removeAttribute("data-mce-caret"):nh(t)),eh(t)&&(rh(t),0===t.data.length&&nh(t))},fS=Nt,gS=vn,pS=Ha,ah=(t,e,n)=>{const o=cp(e.getBoundingClientRect(),n);let r,s;if("BODY"===t.tagName){const i=t.ownerDocument.documentElement;r=t.scrollLeft||i.scrollLeft,s=t.scrollTop||i.scrollTop}else{const i=t.getBoundingClientRect();r=t.scrollLeft-i.left,s=t.scrollTop-i.top}o.left+=r,o.right+=r,o.top+=s,o.bottom+=s,o.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),o.left+=a,o.right+=a),o},ih=()=>vt.browser.isFirefox(),Ps=t=>fS(t)||gS(t),Ls=t=>(Ps(t)||zn(t)&&ih())&&td(N(t)).exists(La),bS=on,Wd=Nt,vS=vn,lh=ja("display","block table table-cell table-caption list-item"),dh=Fe,ch=wr,yS=Q,CS=j,wS=Ye,Nr=t=>t>0,Wo=t=>t<0,ci=(t,e)=>{let n;for(;n=t(e);)if(!ch(n))return n;return null},Ms=(t,e,n,o,r)=>{const s=new qt(t,o),a=Wd(t)||ch(t);let i;if(Wo(e)){if(a&&(i=ci(s.prev.bind(s),!0),n(i)))return i;for(;i=ci(s.prev.bind(s),r);)if(n(i))return i}if(Nr(e)){if(a&&(i=ci(s.next.bind(s),!0),n(i)))return i;for(;i=ci(s.next.bind(s),r);)if(n(i))return i}return null},lo=(t,e)=>{for(;t&&t!==e;){if(lh(t))return t;t=t.parentNode}return null},Cn=(t,e,n)=>lo(t.container(),n)===lo(e.container(),n),Kd=(t,e)=>{if(!e)return C.none();const n=e.container(),o=e.offset();return yS(n)?C.from(n.childNodes[o+t]):C.none()},uh=(t,e)=>{var n;const o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),o},xS=(t,e,n)=>lo(e,t)===lo(n,t),mh=(t,e,n)=>{const o=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let s=r[o];if(s&&dh(s)&&(s=s[o]),Wd(s)||vS(s)){if(xS(e,s,r))return s;break}if(wS(s))break;r=r.parentNode}return null},Is=Z(uh,!0),Fs=Z(uh,!1),Gd=(t,e,n)=>{let o;const r=Z(mh,!0,e),s=Z(mh,!1,e),a=n.startContainer,i=n.startOffset;if(wr(a)){const l=CS(a)?a.parentNode:a,d=l.getAttribute("data-mce-caret");if("before"===d&&(o=l.nextSibling,Ls(o)))return Is(o);if("after"===d&&(o=l.previousSibling,Ls(o)))return Fs(o)}if(!n.collapsed)return n;if(j(a)){if(dh(a)){if(1===t){if(o=s(a),o)return Is(o);if(o=r(a),o)return Fs(o)}if(-1===t){if(o=r(a),o)return Fs(o);if(o=s(a),o)return Is(o)}return n}if(Ya(a)&&i>=a.data.length-1)return 1===t&&(o=s(a),o)?Is(o):n;if(Ga(a)&&i<=1)return-1===t&&(o=r(a),o)?Fs(o):n;if(i===a.data.length)return o=s(a),o?Is(o):n;if(0===i)return o=r(a),o?Fs(o):n}return n},fh=(t,e)=>Kd(t?0:-1,e).filter(Wd),Us=(t,e,n)=>{const o=Gd(t,e,n);return-1===t?L.fromRangeStart(o):L.fromRangeEnd(o)},ui=t=>C.from(t.getNode()).map(N),Yd=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},mi=(t,e)=>{const n=Cn(t,e);return!(n||!Lt(t.getNode()))||n};var Gt,t;(t=Gt||(Gt={}))[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards";const kS=Nt,wn=j,gh=Q,Xd=Lt,Rr=Ye,ph=t=>{return Ag(t)||!!pd(e=t)&&!Re(Ae(e.getElementsByTagName("*")),(n,o)=>n||Rg(o),!1);var e},fi=Og,hh=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,bh=(t,e)=>{if(Nr(t)){if(Rr(e.previousSibling)&&!wn(e.previousSibling))return L.before(e);if(wn(e))return L(e,0)}if(Wo(t)){if(Rr(e.nextSibling)&&!wn(e.nextSibling))return L.after(e);if(wn(e))return L(e,e.data.length)}return Wo(t)?Xd(e)?L.before(e):L.after(e):L.before(e)},Qd=(t,e,n)=>{let o,r,s,a;if(!gh(n)||!e)return null;if(e.isEqual(L.after(n))&&n.lastChild){if(a=L.after(n.lastChild),Wo(t)&&Rr(n.lastChild)&&gh(n.lastChild))return Xd(n.lastChild)?L.before(n.lastChild):a}else a=e;const i=a.container();let l=a.offset();if(wn(i)){if(Wo(t)&&l>0)return L(i,--l);if(Nr(t)&&l<i.length)return L(i,++l);o=i}else{if(Wo(t)&&l>0&&(r=hh(i,l-1),Rr(r)))return!ph(r)&&(s=Ms(r,t,fi,r),s)?wn(s)?L(s,s.data.length):L.after(s):wn(r)?L(r,r.data.length):L.before(r);if(Nr(t)&&l<i.childNodes.length&&(r=hh(i,l),Rr(r)))return Xd(r)?((c,u)=>{const g=u.nextSibling;return g&&Rr(g)?wn(g)?L(g,0):L.before(g):Qd(Gt.Forwards,L.after(u),c)})(n,r):!ph(r)&&(s=Ms(r,t,fi,r),s)?wn(s)?L(s,0):L.before(s):wn(r)?L(r,0):L.after(r);o=r||a.getNode()}if(o&&(Nr(t)&&a.isAtEnd()||Wo(t)&&a.isAtStart())&&(o=Ms(o,t,jt,n,!0),fi(o,n)))return bh(t,o);r=o&&Ms(o,t,fi,n);const d=So(ct(((c,u)=>{const g=[];let p=c;for(;p&&p!==u;)g.push(p),p=p.parentNode;return g})(i,n),kS));return!d||r&&d.contains(r)?r?bh(t,r):null:(a=Nr(t)?L.after(d):L.before(d),a)},xn=t=>({next:e=>Qd(Gt.Forwards,e,t),prev:e=>Qd(Gt.Backwards,e,t)}),vh=t=>L.isTextPosition(t)?0===t.offset():Ye(t.getNode()),yh=t=>{if(L.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return Ye(t.getNode(!0))},Ch=(t,e)=>!L.isTextPosition(t)&&!L.isTextPosition(e)&&t.getNode()===e.getNode(!0),Ue=(t,e,n)=>{const o=xn(e);return C.from(t?o.next(n):o.prev(n))},gi=(t,e,n)=>Ue(t,e,n).bind(o=>{return Cn(n,o,e)&&(s=n,a=o,t?!Ch(s,a)&&(L.isTextPosition(i=s)||!Lt(i.getNode()))&&yh(s)&&vh(a):!Ch(a,s)&&vh(s)&&yh(a))?Ue(t,e,o):C.some(o);var s,a,i}),wh=(t,e,n,o)=>gi(t,e,n).bind(r=>o(r)?wh(t,e,r,o):C.some(r)),Ar=(t,e)=>{const n=t?e.firstChild:e.lastChild;return j(n)?C.some(L(n,t?0:n.data.length)):n?Ye(n)?C.some(t?L.before(n):Lt(o=n)?L.before(o):L.after(o)):((r,s,a)=>{const i=r?L.before(a):L.after(a);return Ue(r,s,i)})(t,e,n):C.none();var o},ke=Z(Ue,!0),ze=Z(Ue,!1),he=Z(Ar,!0),kn=Z(Ar,!1),Jd="_mce_caret",Xe=t=>Q(t)&&t.id===Jd,Ko=(t,e)=>{let n=e;for(;n&&n!==t;){if(Xe(n))return n;n=n.parentNode}return null},xh=t=>pt(t,"name"),kh=t=>$.isArray(t.start),pi=t=>!(!xh(t)&&wo(t.forward))||t.forward,Eh=(t,e)=>(Q(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),ES=(t,e)=>kn(t).fold(Bt,n=>(e.setStart(n.container(),n.offset()),e.setEnd(n.container(),n.offset()),!0)),Sh=(t,e,n)=>!(e.hasChildNodes()||!Ko(t,e)||(((o,r)=>{var s;const a=(null!==(s=o.ownerDocument)&&void 0!==s?s:document).createTextNode(ae);o.appendChild(a),r.setStart(a,0),r.setEnd(a,0)})(e,n),0)),_h=(t,e,n,o)=>{const r=n[e?"start":"end"],s=t.getRoot();if(r){let a=s,i=r[0];for(let l=r.length-1;a&&l>=1;l--){const d=a.childNodes;if(Sh(s,a,o))return!0;if(r[l]>d.length-1)return!!Sh(s,a,o)||ES(a,o);a=d[r[l]]}j(a)&&(i=Math.min(r[0],a.data.length)),Q(a)&&(i=Math.min(r[0],a.childNodes.length)),e?o.setStart(a,i):o.setEnd(a,i)}return!0},Zd=t=>j(t)&&t.data.length>0,Nh=(t,e,n)=>{const o=t.get(n.id+"_"+e),r=o?.parentNode,s=n.keep;if(o&&r){let a,i;if("start"===e?s?o.hasChildNodes()?(a=o.firstChild,i=1):Zd(o.nextSibling)?(a=o.nextSibling,i=0):Zd(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)+1):(a=r,i=t.nodeIndex(o)):s?o.hasChildNodes()?(a=o.firstChild,i=1):Zd(o.previousSibling)?(a=o.previousSibling,i=o.previousSibling.data.length):(a=r,i=t.nodeIndex(o)):(a=r,i=t.nodeIndex(o)),!s){const l=o.previousSibling,d=o.nextSibling;let c;for($.each($.grep(o.childNodes),u=>{j(u)&&(u.data=u.data.replace(/\uFEFF/g,""))});c=t.get(n.id+"_"+e);)t.remove(c,!0);if(j(d)&&j(l)&&!vt.browser.isOpera()){const u=l.data.length;l.appendData(d.data),t.remove(d),a=l,i=u}}return C.some(L(a,i))}return C.none()},SS=(t,e,n)=>((o,r,s=!1)=>{return 2===r?Op(jn,s,o):3===r?(a=>{const i=a.getRng();return{start:Ep(a.dom.getRoot(),L.fromRangeStart(i)),end:Ep(a.dom.getRoot(),L.fromRangeEnd(i)),forward:a.isForward()}})(o):r?{rng:(a=o).getRng(),forward:a.isForward()}:Bp(o,!1);var a})(t,e,n),_S=(t,e)=>{((n,o)=>{const r=n.dom;if(o){if(kh(o))return((s,a)=>{const i=s.createRng();return _h(s,!0,a,i)&&_h(s,!1,a,i)?C.some({range:i,forward:pi(a)}):C.none()})(r,o);if(at(o.start))return((s,a)=>{const i=C.from(Sp(s.getRoot(),a.start)),l=C.from(Sp(s.getRoot(),a.end));return ge(i,l,(d,c)=>{const u=s.createRng();return u.setStart(d.container(),d.offset()),u.setEnd(c.container(),c.offset()),{range:u,forward:pi(a)}})})(r,o);if(pt(o,"id"))return((s,a)=>{const i=Nh(s,"start",a),l=Nh(s,"end",a);return ge(i,l.or(i),(d,c)=>{const u=s.createRng();return u.setStart(Eh(s,d.container()),d.offset()),u.setEnd(Eh(s,c.container()),c.offset()),{range:u,forward:pi(a)}})})(r,o);if(xh(o))return((s,a)=>C.from(s.select(a.name)[a.index]).map(i=>{const l=s.createRng();return l.selectNode(i),{range:l,forward:!0}}))(r,o);if((s=>pt(s,"rng"))(o))return C.some({range:o.rng,forward:pi(o)})}return C.none()})(t,e).each(({range:n,forward:o})=>{t.setRng(n,o)})},je=t=>Q(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),hi=t=>"\xa0"===t,Or=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),tc=t=>!Or(t)&&!hi(t)&&!kg(t),ec=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},NS=t=>{return{value:(n=ec(t.red)+ec(t.green)+ec(t.blue),wf(n,"#").toUpperCase())};var n},RS=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,AS=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Rh=(t,e,n,o)=>({red:t,green:e,blue:n,alpha:o}),Ah=(t,e,n,o)=>{const r=parseInt(t,10),s=parseInt(e,10),a=parseInt(n,10),i=parseFloat(o);return Rh(r,s,a,i)},bi=t=>(e=>{if("transparent"===e)return C.some(Rh(0,0,0,0));const n=RS.exec(e);if(null!==n)return C.some(Ah(n[1],n[2],n[3],"1"));const o=AS.exec(e);return null!==o?C.some(Ah(o[1],o[2],o[3],o[4])):C.none()})(t).map(NS).map(e=>"#"+e.value).getOr(t),nc=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},Oh=(t,e)=>{const n=se(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:ct(fn(t,s=>{const a=ri(s);return a?[N(a)]:[]}),ys)},Tr=t=>Oh(nc(t.selection.getSel()),N(t.getBody())),zs=(t,e)=>fs(t,"table",e),Th=t=>ed(t).fold(G([t]),e=>[t].concat(Th(e))),oc=t=>nd(t).fold(G([t]),e=>"br"===At(e)?Ro(e).map(n=>[t].concat(oc(n))).getOr([]):[t].concat(oc(e))),rc=(t,e)=>ge((n=>{const o=n.startContainer,r=n.startOffset;return j(o)?0===r?C.some(N(o)):C.none():C.from(o.childNodes[r]).map(N)})(e),(n=>{const o=n.endContainer,r=n.endOffset;return j(o)?r===o.data.length?C.some(N(o)):C.none():C.from(o.childNodes[r-1]).map(N)})(e),(n,o)=>{const r=$t(Th(t),Z(wt,n)),s=$t(oc(t),Z(wt,o));return r.isSome()&&s.isSome()}).getOr(!1),sc=(t,e,n,o)=>{const r=n,s=new qt(n,r),a=os(t.schema.getMoveCaretBeforeOnEnterElements(),(l,d)=>!St(["td","th","table"],d.toLowerCase()));let i=n;do{if(j(i)&&0!==$.trim(i.data).length)return void(o?e.setStart(i,0):e.setEnd(i,i.data.length));if(a[i.nodeName])return void(o?e.setStartBefore(i):"BR"===i.nodeName?e.setEndBefore(i):e.setEndAfter(i))}while(i=o?s.next():s.prev());"BODY"===r.nodeName&&(o?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},vi=t=>{const e=t.selection.getSel();return Y(e)&&e.rangeCount>0},ac=(t,e)=>{const n=Tr(t);n.length>0?H(n,o=>{const r=o.dom,s=t.dom.createRng();s.setStartBefore(r),s.setEndAfter(r),e(s,!0)}):e(t.selection.getRng(),!1)},Bh=(t,e,n)=>{const o=Bp(t,e);n(o),t.moveToBookmark(o)},yi=t=>Ze(t?.nodeType),ic=t=>Q(t)&&!je(t)&&!Xe(t)&&!Do(t),Go=t=>!0===t.isContentEditable,Dh=(t,e,n)=>{const{selection:o,dom:r}=t,s=o.getNode(),a=Nt(s);Bh(o,!0,()=>{e()}),a&&Nt(s)&&r.isChildOf(s,t.getBody())?t.selection.select(s):n(o.getStart())&&OS(r,o)},OS=(t,e)=>{var n,o;const r=e.getRng(),{startContainer:s,startOffset:a}=r;if(!((i,l)=>{if(ic(l)&&!/^(TD|TH)$/.test(l.nodeName)){const d=i.getAttrib(l,"data-mce-selected"),c=parseInt(d,10);return!isNaN(c)&&c>0}return!1})(t,e.getNode())&&Q(s)){const i=s.childNodes,l=t.getRoot();let d;if(a<i.length){const c=i[a];d=new qt(c,null!==(n=t.getParent(c,t.isBlock))&&void 0!==n?n:l)}else{const c=i[i.length-1];d=new qt(c,null!==(o=t.getParent(c,t.isBlock))&&void 0!==o?o:l),d.next(!0)}for(let c=d.current();c;c=d.next()){if("false"===t.getContentEditable(c))return;if(j(c)&&!dc(c))return r.setStart(c,0),void e.setRng(r)}}},Ph=(t,e,n)=>{if(t){const o=e?"nextSibling":"previousSibling";for(t=n?t:t[o];t;t=t[o])if(Q(t)||!dc(t))return t}},lc=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Io(t,e),Br=(t,e,n)=>t.schema.isValidChild(e,n),dc=(t,e=!1)=>{if(Y(t)&&j(t)){const n=e?t.data.replace(/ /g,"\xa0"):t.data;return Mo(n)}return!1},Lh=(t,e)=>{const n=t.dom;return ic(e)&&"false"===n.getContentEditable(e)&&((o,r)=>{const s="[data-mce-cef-wrappable]",a=AE(o),i=as(a)?s:`${s},${a}`;return tn(N(r),i)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},co=(t,e)=>Ct(t)?t(e):(Y(e)&&(t=t.replace(/%(\w+)/g,(n,o)=>e[o]||n)),t),cc=(t,e)=>(t=""+((t=t||"").nodeName||t),e=""+((e=e||"").nodeName||e),t.toLowerCase()===e.toLowerCase()),uc=(t,e)=>{if(zt(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=bi(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Ci=(t,e,n)=>{const o=t.getStyle(e,n);return uc(o,n)},Mh=(t,e)=>{let n;return t.getParent(e,o=>!!Q(o)&&(n=t.getStyle(o,"text-decoration"),!!n&&"none"!==n)),n},wi=(t,e,n)=>t.getParents(e,n,t.getRoot()),mc=(t,e,n)=>{const o=t.formatter.get(e);return Y(o)&&It(o,n)},En=t=>mr(t,"block"),He=t=>mr(t,"selector"),Wt=t=>mr(t,"inline"),fc=t=>He(t)&&!1!==t.expand&&!Wt(t),Dr=je,Ih=wi,Fh=dc,TS=lc,Uh=(t,e)=>{let n=e;for(;n;){if(Q(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},zh=(t,e,n,o)=>{const r=e.data;if(t){for(let s=n;s>0;s--)if(o(r.charAt(s-1)))return s}else for(let s=n;s<r.length;s++)if(o(r.charAt(s)))return s;return-1},BS=(t,e,n)=>zh(t,e,n,o=>hi(o)||Or(o)),DS=(t,e,n)=>zh(t,e,n,tc),jh=(t,e,n,o,r,s)=>{let a;const i=t.getParent(n,t.isBlock)||e,l=(d,c,u)=>{const g=Ho(t);return C.from((r?g.backwards:g.forwards)(d,c,(f,h)=>Dr(f.parentNode)?-1:(a=f,u(r,f,h)),i))};return l(n,o,BS).bind(d=>s?l(d.container,d.offset+(r?-1:0),DS):C.some(d)).orThunk(()=>a?C.some({container:a,offset:r?0:a.length}):C.none())},Hh=(t,e,n,o,r)=>{const s=o[r];j(o)&&as(o.data)&&s&&(o=s);const a=Ih(t,o);for(let i=0;i<a.length;i++)for(let l=0;l<e.length;l++){const d=e[l];if((!Y(d.collapsed)||d.collapsed===n.collapsed)&&He(d)&&t.is(a[i],d.selector))return a[i]}return o},$h=(t,e,n,o)=>{var r;let s=n;const a=t.getRoot(),i=e[0];if(En(i)&&(s=i.wrapper?null:t.getParent(n,i.block,a)),!s){const l=null!==(r=t.getParent(n,"LI,TD,TH"))&&void 0!==r?r:a;s=t.getParent(j(n)?n.parentNode:n,d=>d!==a&&TS(t.schema,d),l)}if(s&&En(i)&&i.wrapper&&(s=Ih(t,s,"ul,ol").reverse()[0]||s),!s)for(s=n;s&&s[o]&&!t.isBlock(s[o])&&(s=s[o],!cc(s,"br")););return s||n},Vh=(t,e,n,o)=>{const r=n.parentNode;return!Y(n[o])&&(!(r!==e&&!zt(r)&&!t.isBlock(r))||Vh(t,e,r,o))},xi=(t,e,n,o,r)=>{let s=n;const a=r?"previousSibling":"nextSibling",i=t.getRoot();if(j(n)&&!Fh(n)&&(r?o>0:o<n.data.length))return n;for(;s;){if(!e[0].block_expand&&t.isBlock(s))return s;for(let d=s[a];d;d=d[a]){const c=j(d)&&!Vh(t,i,d,a);if(!Dr(d)&&(!Lt(l=d)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!Fh(d,c))return s}if(s===i||s.parentNode===i){n=s;break}s=s.parentNode}var l;return n},qh=t=>Dr(t.parentNode)||Dr(t),Yo=(t,e,n,o=!1)=>{let{startContainer:r,startOffset:s,endContainer:a,endOffset:i}=e;const l=n[0];return Q(r)&&r.hasChildNodes()&&(r=ao(r,s),j(r)&&(s=0)),Q(a)&&a.hasChildNodes()&&(a=ao(a,e.collapsed?i:i-1),j(a)&&(i=a.data.length)),r=Uh(t,r),a=Uh(t,a),qh(r)&&(r=Dr(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,j(r)&&(s=e.collapsed?r.length:0)),qh(a)&&(a=Dr(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,j(a)&&(i=e.collapsed?0:a.length)),e.collapsed&&(jh(t,t.getRoot(),r,s,!0,o).each(({container:d,offset:c})=>{r=d,s=c}),jh(t,t.getRoot(),a,i,!1,o).each(({container:d,offset:c})=>{a=d,i=c})),(Wt(l)||l.block_expand)&&(Wt(l)&&j(r)&&0!==s||(r=xi(t,n,r,s,!0)),Wt(l)&&j(a)&&i!==a.data.length||(a=xi(t,n,a,i,!1))),fc(l)&&(r=Hh(t,n,e,r,"previousSibling"),a=Hh(t,n,e,a,"nextSibling")),(En(l)||He(l))&&(r=$h(t,n,r,"previousSibling"),a=$h(t,n,a,"nextSibling"),En(l)&&(t.isBlock(r)||(r=xi(t,n,r,s,!0)),t.isBlock(a)||(a=xi(t,n,a,i,!1)))),Q(r)&&r.parentNode&&(s=t.nodeIndex(r),r=r.parentNode),Q(a)&&a.parentNode&&(i=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:r,startOffset:s,endContainer:a,endOffset:i}},js=(t,e,n)=>{var o;const r=e.startOffset,s=ao(e.startContainer,r),a=e.endOffset,i=ao(e.endContainer,a-1),l=m=>{const b=m[0];j(b)&&b===s&&r>=b.data.length&&m.splice(0,1);const v=m[m.length-1];return 0===a&&m.length>0&&v===i&&j(v)&&m.splice(m.length-1,1),m},d=(m,b,v)=>{const y=[];for(;m&&m!==v;m=m[b])y.push(m);return y},c=(m,b)=>t.getParent(m,v=>v.parentNode===b,b),u=(m,b,v)=>{const y=v?"nextSibling":"previousSibling";for(let w=m,k=w.parentNode;w&&w!==b;w=k){k=w.parentNode;const x=d(w===m?w:w[y],y);x.length&&(v||x.reverse(),n(l(x)))}};if(s===i)return n(l([s]));const g=null!==(o=t.findCommonAncestor(s,i))&&void 0!==o?o:t.getRoot();if(t.isChildOf(s,i))return u(s,g,!0);if(t.isChildOf(i,s))return u(i,g);const p=c(s,g)||s,f=c(i,g)||i;u(s,p,!0);const h=d(p===s?p:p.nextSibling,"nextSibling",f===i?f.nextSibling:f);h.length&&n(l(h)),u(i,f)},PS=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Wh=(t,e,n,o,r,s)=>{const{uid:a=e,...i}=n;pr(t,Es()),Xt(t,`${Er()}`,a),Xt(t,`${zo()}`,o);const{attributes:l={},classes:d=[]}=r(a,i);if(Qn(t,l),c=t,H(d,g=>{pr(c,g)}),s){d.length>0&&Xt(t,`${_s()}`,d.join(","));const c=Oe(l);c.length>0&&Xt(t,`${Ns()}`,c.join(","))}var c},Kh=(t,e,n,o,r)=>{const s=Qt("span",t);return Wh(s,e,n,o,r,!1),s},Gh=t=>{const e=(()=>{const s={};return{register:(a,i)=>{s[a]={name:a,settings:i}},lookup:a=>Rt(s,a).map(i=>i.settings),getNames:()=>Oe(s)}})();((s,a)=>{const i=zo(),l=c=>C.from(c.attr(i)).bind(a.lookup),d=c=>{var u,g;c.attr(Er(),null),c.attr(zo(),null),c.attr(Ss(),null);const p=C.from(c.attr(Ns())).map(b=>b.split(",")).getOr([]),f=C.from(c.attr(_s())).map(b=>b.split(",")).getOr([]);H(p,b=>c.attr(b,null));const h=null!==(g=null===(u=c.attr("class"))||void 0===u?void 0:u.split(" "))&&void 0!==g?g:[],m=Sa(h,[Es()].concat(f));c.attr("class",m.length>0?m.join(" "):null),c.attr(_s(),null),c.attr(Ns(),null)};s.serializer.addTempAttr(Ss()),s.serializer.addAttributeFilter(i,c=>{for(const u of c)l(u).each(g=>{!1===g.persistent&&("span"===u.name?u.unwrap():d(u))})})})(t,e);const n=((s,a)=>{const i=Kt({}),l=()=>({listeners:[],previous:so()}),d=(p,f)=>{c(p,h=>(f(h),h))},c=(p,f)=>{const h=i.get(),m=f(Rt(h,p).getOrThunk(l));h[p]=m,i.set(h)},u=(p,f)=>{H(op(s,p),h=>{f?Xt(h,Ss(),"true"):ee(h,Ss())})},g=Td(()=>{const p=ko(a.getNames());H(p,f=>{c(f,h=>{const m=h.previous.get();return ep(s,C.some(f)).fold(()=>{m.each(b=>{var v;d(v=f,y=>{H(y.listeners,w=>w(!1,v))}),h.previous.clear(),u(b,!1)})},({uid:b,name:v,elements:y})=>{var w,k,x;gr(m,b)||(m.each(w=>u(w,!1)),k=b,x=y,d(w=v,S=>{H(S.listeners,E=>E(!0,w,{uid:k,nodes:yt(x,_=>_.dom)}))}),h.previous.set(b),u(b,!0))}),{previous:h.previous,listeners:h.listeners}})})},30);return s.on("remove",()=>{g.cancel()}),s.on("NodeChange",()=>{g.throttle()}),{addListener:(p,f)=>{c(p,h=>({previous:h.previous,listeners:h.listeners.concat([f])}))}}})(t,e),o=Ql("span"),r=s=>{H(s,a=>{o(a)?Un(a):(i=>{ds(i,Es()),ee(i,`${Er()}`),ee(i,`${zo()}`),ee(i,`${Ss()}`);const l=Ln(i,`${Ns()}`).map(u=>u.split(",")).getOr([]),d=Ln(i,`${_s()}`).map(u=>u.split(",")).getOr([]);var c;H(l,u=>ee(i,u)),c=i,H(d,u=>{ds(c,u)}),ee(i,`${_s()}`),ee(i,`${Ns()}`)})(a)})};return{register:(s,a)=>{e.register(s,a)},annotate:(s,a)=>{e.lookup(s).each(i=>{var l,d,c,u;d=s,c=i,u=a,(l=t).undoManager.transact(()=>{const g=l.selection,p=g.getRng(),f=Tr(l).length>0,h=ap("mce-annotation");if(p.collapsed&&!f&&((m,b)=>{const v=Yo(m.dom,b,[{inline:"span"}]);b.setStart(v.startContainer,v.startOffset),b.setEnd(v.endContainer,v.endOffset),m.selection.setRng(b)})(l,p),g.getRng().collapsed&&!f){const m=Kh(l.getDoc(),h,u,d,c.decorate);Fa(m,Jt),g.getRng().insertNode(m.dom),g.select(m.dom)}else Bh(g,!1,()=>{ac(l,m=>{((t,e,n,o,r,s)=>{const a=[],i=Kh(t.getDoc(),n,s,o,r),l=so(),d=()=>{l.clear()},c=g=>{H(g,u)},u=g=>{switch(p=t,f=g,h="span",m=At(g),en(f).fold(()=>"skipping",b=>{return"br"===m||Pe(v=f)&&$a(v)===ae?"valid":(v=>xe(v)&&Zl(v,Es()))(f)?"existing":Xe(f.dom)?"caret":It(PS,v=>tn(f,v))?"valid-block":Br(p,h,m)&&Br(p,At(b),h)?"valid":"invalid-child";var v})){case"invalid-child":{d();const p=ne(g);c(p),d();break}case"valid-block":d(),Wh(g,n,s,o,r,!0);break;case"valid":{const p=l.get().getOrThunk(()=>{const f=jo(i);return a.push(f),l.set(f),f});ug(g,p);break}}var p,f,h,m};js(t.dom,e,g=>{d(),(p=>{const f=yt(p,N);c(f)})(g)})})(l,m,h,d,c.decorate,u)})})})})},annotationChanged:(s,a)=>{n.addListener(s,a)},remove:s=>{ep(t,C.some(s)).each(({elements:a})=>{const i=t.selection.getBookmark();r(a),t.selection.moveToBookmark(i)})},removeAll:s=>{const a=t.selection.getBookmark();_t(rp(t,s),(i,l)=>{r(i)}),t.selection.moveToBookmark(a)},getAll:s=>{const a=rp(t,s);return Na(a,i=>yt(i,l=>l.dom))}}},Hs=t=>({getBookmark:Z(SS,t),moveToBookmark:Z(_S,t)});Hs.isBookmarkNode=je;const Yh=(t,e,n)=>!n.collapsed&&It(n.getClientRects(),o=>{return a=e,(s=t)>=(r=o).left&&s<=r.right&&a>=r.top&&a<=r.bottom;var r,s,a}),Xh=(t,e,n)=>{t.dispatch(e,n)},Qh=(t,e,n,o)=>{t.dispatch("FormatApply",{format:e,node:n,vars:o})},Jh=(t,e,n,o)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:o})},Zh=(t,e)=>t.dispatch("SetContent",e),tb=(t,e)=>t.dispatch("GetContent",e),eb=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),tt={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||tt.metaKeyPressed(t),metaKeyPressed:t=>vt.os.isMacOS()||vt.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},$s="data-mce-selected",nb=Math.abs,ki=Math.round,gc={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},ob=(t,e)=>{const n=e.dom,o=e.getDoc(),r=document,s=e.getBody();let a,i,l,d,c,u,g,p,f,h,m,b,v,y,w;const k=et=>Y(et)&&(xg(et)||n.is(et,"figure.image")),x=et=>vn(et)||n.hasClass(et,"mce-preview-object"),S=et=>{const ut=et.target;((mt,R)=>{if("longpress"===(A=mt).type||0===A.type.indexOf("touch")){const A=mt.touches[0];return k(mt.target)&&!Yh(A.clientX,A.clientY,R)}var A;return k(mt.target)&&!Yh(mt.clientX,mt.clientY,R)})(et,e.selection.getRng())&&!et.isDefaultPrevented()&&e.selection.select(ut)},E=et=>n.hasClass(et,"mce-preview-object")&&Y(et.firstElementChild)?[et,et.firstElementChild]:n.is(et,"figure.image")?[et.querySelector("img")]:[et],_=et=>{const ut=Gp(e);return!!ut&&"false"!==et.getAttribute("data-mce-resize")&&et!==e.getBody()&&(n.hasClass(et,"mce-preview-object")&&Y(et.firstElementChild)?tn(N(et.firstElementChild),ut):tn(N(et),ut))},D=(et,ut,mt)=>{if(Y(mt)){const R=E(et);H(R,A=>{A.style[ut]||!e.schema.isValid(A.nodeName.toLowerCase(),ut)?n.setStyle(A,ut,mt):n.setAttrib(A,ut,""+mt)})}},T=(et,ut,mt)=>{D(et,"width",ut),D(et,"height",mt)},P=et=>{let ut,mt,R,A,M;ut=et.screenX-u,mt=et.screenY-g,b=ut*d[2]+p,v=mt*d[3]+f,b=b<5?5:b,v=v<5?5:v,R=(k(a)||x(a))&&!1!==wE(e)?!tt.modifierPressed(et):tt.modifierPressed(et),R&&(nb(ut)>nb(mt)?(v=ki(b*h),b=ki(v/h)):(b=ki(v/h),v=ki(b*h))),T(i,b,v),A=d.startPos.x+ut,M=d.startPos.y+mt,A=A>0?A:0,M=M>0?M:0,n.setStyles(l,{left:A,top:M,display:"block"}),l.innerHTML=b+" &times; "+v,d[2]<0&&i.clientWidth<=b&&n.setStyle(i,"left",void 0+(p-b)),d[3]<0&&i.clientHeight<=v&&n.setStyle(i,"top",void 0+(f-v)),ut=s.scrollWidth-y,mt=s.scrollHeight-w,ut+mt!==0&&n.setStyles(l,{left:A-ut,top:M-mt}),m||(e.dispatch("ObjectResizeStart",{target:a,width:p,height:f,origin:"corner-"+d.name}),m=!0)},O=()=>{const et=m;m=!1,et&&(D(a,"width",b),D(a,"height",v)),n.unbind(o,"mousemove",P),n.unbind(o,"mouseup",O),r!==o&&(n.unbind(r,"mousemove",P),n.unbind(r,"mouseup",O)),n.remove(i),n.remove(l),n.remove(c),F(a),et&&(e.dispatch("ObjectResized",{target:a,width:b,height:v,origin:"corner-"+d.name}),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},F=et=>{ht();const ut=n.getPos(et,s),mt=ut.x,R=ut.y,A=et.getBoundingClientRect(),M=A.width||A.right-A.left,U=A.height||A.bottom-A.top;a!==et&&(W(),a=et,b=v=0);const I=e.dispatch("ObjectSelected",{target:et});_(et)&&!I.isDefaultPrevented()?_t(gc,(z,V)=>{let X=n.get("mceResizeHandle"+V);X&&n.remove(X),X=n.add(s,"div",{id:"mceResizeHandle"+V,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+V+"-resize; margin:0; padding:0"}),n.bind(X,"mousedown",nt=>{nt.stopImmediatePropagation(),nt.preventDefault(),(lt=>{const dt=E(a)[0];var K;u=lt.screenX,g=lt.screenY,p=dt.clientWidth,f=dt.clientHeight,h=f/p,d=z,d.name=V,d.startPos={x:M*z[0]+mt,y:U*z[1]+R},y=s.scrollWidth,w=s.scrollHeight,c=n.add(s,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(c,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),i=x(K=a)?n.create("img",{src:vt.transparentSrc}):K.cloneNode(!0),n.addClass(i,"mce-clonedresizable"),n.setAttrib(i,"data-mce-bogus","all"),i.contentEditable="false",n.setStyles(i,{left:mt,top:R,margin:0}),T(i,M,U),i.removeAttribute($s),s.appendChild(i),n.bind(o,"mousemove",P),n.bind(o,"mouseup",O),r!==o&&(n.bind(r,"mousemove",P),n.bind(r,"mouseup",O)),l=n.add(s,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(nt)}),z.elm=X,n.setStyles(X,{left:M*z[0]+mt-X.offsetWidth/2,top:U*z[1]+R-X.offsetHeight/2})}):W(!1)},q=oi(F,0),W=(et=!0)=>{q.cancel(),ht(),a&&et&&a.removeAttribute($s),_t(gc,(ut,mt)=>{const R=n.get("mceResizeHandle"+mt);R&&(n.unbind(R),n.remove(R))})},ot=(et,ut)=>n.isChildOf(et,ut),st=et=>{if(m||e.removed||e.composing)return;const ut="mousedown"===et.type?et.target:t.getNode(),mt=Oo(N(ut),"table,img,figure.image,hr,video,span.mce-preview-object").map(A=>A.dom).filter(A=>n.isEditable(A.parentElement)).getOrUndefined(),R=Y(mt)?n.getAttrib(mt,$s,"1"):"1";if(H(n.select("img[data-mce-selected],hr[data-mce-selected]"),A=>{A.removeAttribute($s)}),Y(mt)&&ot(mt,s)){kt();const A=t.getStart(!0);if(ot(A,mt)&&ot(t.getEnd(!0),mt))return n.setAttrib(mt,$s,R),void q.throttle(mt)}W()},ht=()=>{_t(gc,et=>{et.elm&&(n.unbind(et.elm),delete et.elm)})},kt=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}};return e.on("init",()=>{kt(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",st),e.on("keyup compositionend",et=>{a&&"TABLE"===a.nodeName&&st(et)}),e.on("hide blur",W),e.on("contextmenu longpress",S,!0)}),e.on("remove",ht),{isResizable:_,showResizeRect:F,hideResizeRect:W,updateResizeRect:st,destroy:()=>{q.cancel(),a=i=c=null}}},rb=(t,e,n)=>{const o=t.document.createRange();var r,s;return r=o,e.fold(s=>{r.setStartBefore(s.dom)},(s,a)=>{r.setStart(s.dom,a)},s=>{r.setStartAfter(s.dom)}),s=o,n.fold(i=>{s.setEndBefore(i.dom)},(i,l)=>{s.setEnd(i.dom,l)},i=>{s.setEndAfter(i.dom)}),o},pc=(t,e,n,o,r)=>{const s=t.document.createRange();return s.setStart(e.dom,n),s.setEnd(o.dom,r),s},Vs=yn([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),sb=(t,e,n)=>e(N(n.startContainer),n.startOffset,N(n.endContainer),n.endOffset),ab=(t,e,n,o)=>({start:t,soffset:e,finish:n,foffset:o}),MS=document.caretPositionFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(o,e,n)).bind(s=>{if(null===s.offsetNode)return C.none();const a=t.dom.createRange();return a.setStart(s.offsetNode,s.offset),a.collapse(),C.some(a)})}:document.caretRangeFromPoint?(t,e,n)=>{var o,r;return C.from(null===(r=(o=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(o,e,n))}:C.none,hc=yn([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),$n={before:hc.before,on:hc.on,after:hc.after,cata:(t,e,n,o)=>t.fold(e,n,o),getStart:t=>t.fold(fe,fe,fe)},Ei=yn([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Pr={domRange:Ei.domRange,relative:Ei.relative,exact:Ei.exact,exactFromRange:t=>Ei.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=t.match({domRange:o=>N(o.startContainer),relative:(o,r)=>$n.getStart(o),exact:(o,r,s,a)=>o});return us(e)},range:ab},Si=(t,e)=>{const n=At(t);return"input"===n?$n.after(t):St(["br","img"],n)?0===e?$n.before(t):$n.after(t):$n.on(t,e)},IS=(t,e)=>{const n=t.fold($n.before,Si,$n.after),o=e.fold($n.before,Si,$n.after);return Pr.relative(n,o)},ib=(t,e,n,o)=>{const r=Si(t,e),s=Si(n,o);return Pr.relative(r,s)},bc=(t,e)=>{const n=(e||document).createDocumentFragment();return H(t,o=>{n.appendChild(o.dom)}),N(n)},lb=(t,e,n)=>{return(o=us(N(n)).dom,r=t,s=e,((a,i,l)=>{const d=N(a.document);return MS(d,i,l).map(c=>ab(N(c.startContainer),c.startOffset,N(c.endContainer),c.endOffset))})(o,r,s)).map(o=>{const r=n.createRange();return r.setStart(o.start.dom,o.soffset),r.setEnd(o.finish.dom,o.foffset),r}).getOrUndefined();var o,r,s},vc=(t,e)=>Y(t)&&Y(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,db=(t,e,n)=>null!==((o,r,s)=>{let a=o;for(;a&&a!==r;){if(s(a))return a;a=a.parentNode}return null})(t,e,n),US=(t,e,n)=>db(t,e,o=>o.nodeName===n),zS=(t,e)=>Fe(t)&&!db(t,e,Xe),cb=(t,e,n)=>{const o=e.parentNode;if(o){const r=new qt(e,t.getParent(o,t.isBlock)||t.getRoot());let s;for(;s=r[n?"prev":"next"]();)if(Lt(s))return!0}return!1},yc=(t,e,n,o,r)=>{const s=t.getRoot(),a=t.schema.getNonEmptyElements(),i=r.parentNode;let l,d;if(!i)return C.none();const c=t.getParent(i,t.isBlock)||s;if(o&&Lt(r)&&e&&t.isEmpty(c))return C.some(L(i,t.nodeIndex(r)));const u=new qt(r,c);for(;d=u[o?"prev":"next"]();){if("false"===t.getContentEditableParent(d)||zS(d,s))return C.none();if(j(d)&&d.data.length>0)return US(d,s,"A")?C.none():C.some(L(d,o?d.data.length:0));if(t.isBlock(d)||a[d.nodeName.toLowerCase()])return C.none();l=d}return to(l)?C.none():n&&l?C.some(L(l,0)):C.none()},ub=(t,e,n,o)=>{const r=t.getRoot();let s,a=!1,i=n?o.startContainer:o.endContainer,l=n?o.startOffset:o.endOffset;const d=Q(i)&&l===i.childNodes.length,c=t.schema.getNonEmptyElements();let u=n;if(Fe(i))return C.none();if(Q(i)&&l>i.childNodes.length-1&&(u=!1),hs(i)&&(i=r,l=0),i===r){if(u&&(s=i.childNodes[l>0?l-1:0],s)&&(Fe(s)||c[s.nodeName]||zn(s)))return C.none();if(i.hasChildNodes()){if(l=Math.min(!u&&l>0?l-1:l,i.childNodes.length-1),i=i.childNodes[l],l=j(i)&&d?i.data.length:0,!e&&i===r.lastChild&&zn(i)||((g,p)=>{let f=p;for(;f&&f!==g;){if(Nt(f))return!0;f=f.parentNode}return!1})(r,i)||Fe(i))return C.none();if(i.hasChildNodes()&&!zn(i)){s=i;const g=new qt(i,r);do{if(Nt(s)||Fe(s)){a=!1;break}if(j(s)&&s.data.length>0){l=u?0:s.data.length,i=s,a=!0;break}if(c[s.nodeName.toLowerCase()]&&!ik(s)){l=t.nodeIndex(s),i=s.parentNode,u||l++,a=!0;break}}while(s=u?g.next():g.prev())}}}return e&&(j(i)&&0===l&&yc(t,d,e,!0,i).each(g=>{i=g.container(),l=g.offset(),a=!0}),Q(i)&&(s=i.childNodes[l],s||(s=i.childNodes[l-1]),!s||!Lt(s)||"A"===(null===(f=s.previousSibling)||void 0===f?void 0:f.nodeName)||cb(t,s,!1)||cb(t,s,!0)||yc(t,d,e,!0,s).each(g=>{i=g.container(),l=g.offset(),a=!0}))),u&&!e&&j(i)&&l===i.data.length&&yc(t,d,e,!1,i).each(g=>{i=g.container(),l=g.offset(),a=!0}),a&&i?C.some(L(i,l)):C.none();var f},_i=(t,e)=>{const n=e.collapsed,o=e.cloneRange(),r=L.fromRangeStart(e);return ub(t,n,!0,o).each(s=>{n&&L.isAbove(r,s)||o.setStart(s.container(),s.offset())}),n||ub(t,n,!1,o).each(s=>{o.setEnd(s.container(),s.offset())}),n&&o.collapse(!0),vc(e,o)?C.none():C.some(o)},Ni=(t,e)=>t.splitText(e),Ri=t=>{let e=t.startContainer,n=t.startOffset,o=t.endContainer,r=t.endOffset;if(e===o&&j(e)){if(n>0&&n<e.data.length)if(o=Ni(e,n),e=o.previousSibling,r>n){r-=n;const s=Ni(o,r).previousSibling;e=o=s,r=s.data.length,n=0}else r=0}else if(j(e)&&n>0&&n<e.data.length&&(e=Ni(e,n),n=0),j(o)&&r>0&&r<o.data.length){const s=Ni(o,r).previousSibling;o=s,r=s.data.length}return{startContainer:e,startOffset:n,endContainer:o,endOffset:r}},Xo=t=>({walk:(e,n)=>js(t,e,n),split:Ri,expand:(e,n={type:"word"})=>{if("word"===n.type){const o=Yo(t,e,[{inline:"span"}]),r=t.createRng();return r.setStart(o.startContainer,o.startOffset),r.setEnd(o.endContainer,o.endOffset),r}return e},normalize:e=>_i(t,e).fold(Bt,n=>(e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),!0))});Xo.compareRanges=vc,Xo.getCaretRangeFromPoint=lb,Xo.getSelectedNode=ri,Xo.getNode=ao;const jS=((t,e)=>{const n=r=>{const s=(a=>{const i=a.dom;return br(a)?i.getBoundingClientRect().height:i.offsetHeight})(r);if(s<=0||null===s){const a=bn(r,t);return parseFloat(a)||0}return s},o=(r,s)=>Re(s,(a,i)=>{const l=bn(r,i),d=void 0===l?0:parseInt(l,10);return isNaN(d)?a:a+d},0);return{set:(r,s)=>{if(!Ze(s)&&!s.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+s);const a=r.dom;ps(a)&&(a.style[t]=s+"px")},get:n,getOuter:n,aggregate:o,max:(r,s,a)=>{const i=o(r,a);return s>i?s-i:0}}})("height"),mb=()=>N(document),fb=(t,e)=>t.view(e).fold(G([]),n=>{const o=t.owner(n),r=fb(t,o);return[n].concat(r)});var HS=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?C.none():C.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(N)},owner:t=>In(t)});const Cc=t=>"textarea"===At(t),gb=(t,e)=>{const n=(r=>{const s=r.dom.ownerDocument,a=s.body,i=s.defaultView,l=s.documentElement;if(a===r.dom)return yr(a.offsetLeft,a.offsetTop);const d=Ua(i?.pageYOffset,l.scrollTop),c=Ua(i?.pageXOffset,l.scrollLeft),u=Ua(l.clientTop,a.clientTop),g=Ua(l.clientLeft,a.clientLeft);return sd(r).translate(c-g,d-u)})(t),o=jS.get(t);return{element:t,bottom:n.top+o,height:o,pos:n,cleanup:e}},pb=(t,e,n,o)=>{VS(t,(r,s)=>$S(t,e,n,o),n)},hb=(t,e,n,o,r)=>{const s={elm:o.element.dom,alignToTop:r};t.dispatch("ScrollIntoView",s).isDefaultPrevented()||(n(e,ad(e).top,o,r),t.dispatch("AfterScrollIntoView",s))},$S=(t,e,n,o)=>{N(t.getBody());const s=N(t.getDoc()),a=((i,l)=>{const d=((u,g)=>{const p=ne(u);if(0===p.length||Cc(u))return{element:u,offset:g};if(g<p.length&&!Cc(p[g]))return{element:p[g],offset:0};{const f=p[p.length-1];return Cc(f)?{element:u,offset:g}:"img"===At(f)?{element:f,offset:1}:Pe(f)?{element:f,offset:$a(f).length}:{element:f,offset:ne(f).length}}})(i,l),c=Da('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Me(d.element,c),gb(c,()=>Ot(c))})(N(n.startContainer),n.startOffset);hb(t,s,e,a,o),a.cleanup()},bb=(t,e,n,o)=>{const r=N(t.getDoc());hb(t,r,n,gb(N(e),bt),o)},VS=(t,e,n)=>{const o=n.startContainer,r=n.startOffset,s=n.endContainer,a=n.endOffset;e(N(o),N(s));const i=t.dom.createRng();i.setStart(o,r),i.setEnd(s,a),t.selection.setRng(n)},wc=(t,e)=>t.element.dom.scrollIntoView({block:e?"start":"end"}),vb=(t,e,n,o)=>{const r=e+t,s=n.pos.top,a=n.bottom,i=a-s>=e;s<t?wc(n,!1!==o):s>r?wc(n,i?!1!==o:!0===o):a>r&&!i&&wc(n,!0===o)},yb=(t,e,n,o)=>{const r=us(t).dom.innerHeight;vb(e,r,n,o)},Cb=(t,e,n,o)=>{const r=us(t).dom.innerHeight;vb(e,r,n,o);const s=(i=>{const l=mb(),d=ad(l),c=((p,f)=>{const h=f.owner(p);return fb(f,h)})(i,HS),u=sd(i),g=ts(c,(p,f)=>{const h=sd(f);return{left:p.left+h.left,top:p.top+h.top}},{left:0,top:0});return yr(g.left+u.left+d.left,g.top+u.top+d.top)})(n.element),a=bg(window);s.top<a.y?pg(n.element,!1!==o):s.top>a.bottom&&pg(n.element,!0===o)},qS=(t,e,n)=>pb(t,yb,e,n),WS=(t,e,n)=>bb(t,e,yb,n),KS=(t,e,n)=>pb(t,Cb,e,n),GS=(t,e,n)=>bb(t,e,Cb,n),qs=(t,e,n)=>{(t.inline?qS:KS)(t,e,n)},wb=t=>t.dom.focus(),xb=t=>{const e=Jn(t).dom;return t.dom===e.activeElement},xc=(t=mb())=>C.from(t.dom.activeElement).map(N),kb=(t,e)=>{const n=Pe(e)?$a(e).length:ne(e).length+1;return t>n?n:t<0?0:t},YS=t=>Pr.range(t.start,kb(t.soffset,t.start),t.finish,kb(t.foffset,t.finish)),Eb=(t,e)=>!za(e.dom)&&(Mn(t,e)||wt(t,e)),Sb=t=>e=>Eb(t,e.start)&&Eb(t,e.finish),XS=t=>Pr.range(N(t.startContainer),t.startOffset,N(t.endContainer),t.endOffset),QS=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),C.some(e)}catch{return C.none()}},kc=t=>{const e=t.inline||vt.browser.isFirefox()?(n=N(t.getBody()),(o=>{const r=o.getSelection();return(r&&0!==r.rangeCount?C.from(r.getRangeAt(0)):C.none()).map(XS)})(us(n).dom).filter(Sb(n))):C.none();var n;t.bookmark=e.isSome()?e:t.bookmark},Ec=t=>(t.bookmark?t.bookmark:C.none()).bind(e=>{return n=N(t.getBody()),C.from(e).filter(Sb(n)).map(YS);var n}).bind(QS),_b={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},$e={setEditorTimeout:(t,e,n)=>{return Ze(r=n)||(r=0),setTimeout(()=>{t.removed||e()},r);var r},setEditorInterval:(t,e,n)=>{const o=(Ze(s=n)||(s=0),setInterval(()=>{t.removed?clearInterval(o):e()},s));var s;return o}};let Lr;const Sc=Et.DOM,_c=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Ai=(t,e)=>{const n=OE(t);return null!==Sc.getParent(e,r=>{return Q(s=r)&&_b.isEditorUIElement(s)||!!n&&t.dom.is(r,n);var s})},Nc=t=>{try{const e=Jn(N(t.getElement()));return xc(e).fold(()=>document.body,n=>n.dom)}catch{return document.body}},JS=(t,e)=>{const n=e.editor;(r=>{const s=oi(()=>{kc(r)},0);r.on("init",()=>{var a,d;r.inline&&((a,i)=>{const l=()=>{i.throttle()};Et.DOM.bind(document,"mouseup",l),a.on("remove",()=>{Et.DOM.unbind(document,"mouseup",l)})})(r,s),d=s,(a=r).on("mouseup touchend",c=>{d.throttle()}),a.on("keyup NodeChange AfterSetSelectionRange",l=>{(d=>"nodechange"===d.type&&d.selectionChange)(l)||kc(a)})}),r.on("remove",()=>{s.cancel()})})(n);const o=(r,s)=>{dS(r)&&!0!==r.inline&&s(N(r.getContainer()),"tox-edit-focus")};n.on("focusin",()=>{const r=t.focusedEditor;_c(Nc(n))&&o(n,pr),r!==n&&(r&&r.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:r}),n.focus(!0))}),n.on("focusout",()=>{$e.setEditorTimeout(n,()=>{const r=t.focusedEditor;_c(Nc(n))&&r===n||o(n,ds),Ai(n,Nc(n))||r!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)})}),Lr||(Lr=r=>{const s=t.activeEditor;s&&og(r).each(a=>{a.ownerDocument===document&&(a===document.body||Ai(s,a)||t.focusedEditor!==s||(s.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))})},Sc.bind(document,"focusin",Lr))},ZS=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&Lr&&(Sc.unbind(document,"focusin",Lr),Lr=null)},Nb=(t,e)=>{var n,o,r;(n=N(t.getBody()),o=e,(r=o,r.collapsed?C.from(ao(r.startContainer,r.startOffset)).map(N):C.none()).bind(r=>ck(r)?C.some(r):Mn(n,r)?C.none():C.some(n))).bind(n=>he(n.dom)).fold(()=>{t.selection.normalize()},n=>t.selection.setRng(n.toRange()))},Rc=t=>{if(t.setActive)try{t.setActive()}catch{t.focus()}else t.focus()},Qo=t=>{return t.inline?(e=>{const n=e.getBody();return n&&(o=N(n),xb(o)||(r=o,xc(Jn(r)).filter(s=>r.dom.contains(s.dom))).isSome());var o,r})(t):Y((e=t).iframeElement)&&xb(N(e.iframeElement));var e},Ac=t=>t.editorManager.setActive(t),Rb=(t,e,n,o,r)=>{const a=n?e.startOffset:e.endOffset;return C.from(n?e.startContainer:e.endContainer).map(N).map(i=>o&&e.collapsed?i:Pa(i,r(i,a)).getOr(i)).bind(i=>xe(i)?C.some(i):en(i).filter(xe)).map(i=>i.dom).getOr(t)},Ab=(t,e,n=!1)=>Rb(t,e,!0,n,(o,r)=>Math.min(eg(o),r)),Ob=(t,e,n=!1)=>Rb(t,e,!1,n,(o,r)=>r>0?r-1:r),Tb=(t,e)=>{const n=t;for(;t&&j(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Oc=(t,e)=>yt(e,n=>{const o=t.dispatch("GetSelectionRange",{range:n});return o.range!==n?o.range:n}),t_=["img","br"],Bb=t=>{return Eg(t).filter(n=>0!==n.trim().length||n.indexOf(Jt)>-1).isSome()||St(t_,At(t))||xe(o=n=t)&&(t=>{const e=jf("ownerDocument.defaultView",t);return le(t)&&((n=e,((o,r)=>{const s=jf(o,r);if(null==s)throw new Error(o+" not available on this browser");return s})("HTMLElement",n)).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(Gx(t).constructor.name));var n})(o.dom)&&"false"===Le(n,"contenteditable");var n,o},Db="[data-mce-autocompleter]",Pb=t=>gs(t,Db),n_={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Oi=(t,e,n)=>{const o=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[o])return t[o];if(t!==e){let s=t[r];if(s)return s;for(let a=t.parent;a&&a!==e;a=a.parent)if(s=a[r],s)return s}},o_=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Mo(n))return!1;const o=t.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},Lb=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class be{constructor(e,n){this.name=e,this.type=n,1===n&&(this.attributes=[],this.attributes.map={})}static create(e,n){const o=new be(e,n_[e]||1);return n&&_t(n,(r,s)=>{o.attr(s,r)}),o}replace(e){const n=this;return e.parent&&e.remove(),n.insert(e,n),n.remove(),n}attr(e,n){const o=this;if(!at(e))return Y(e)&&_t(e,(s,a)=>{o.attr(a,s)}),o;const r=o.attributes;if(r){if(void 0!==n){if(null===n){if(e in r.map){delete r.map[e];let s=r.length;for(;s--;)if(r[s].name===e)return r.splice(s,1),o}return o}if(e in r.map){let s=r.length;for(;s--;)if(r[s].name===e){r[s].value=n;break}}else r.push({name:e,value:n});return r.map[e]=n,o}return r.map[e]}}clone(){const e=this,n=new be(e.name,e.type),o=e.attributes;if(o){const r=[];r.map={};for(let s=0,a=o.length;s<a;s++){const i=o[s];"id"!==i.name&&(r[r.length]={name:i.name,value:i.value},r.map[i.name]=i.value)}n.attributes=r}return n.value=e.value,n}wrap(e){const n=this;return n.parent&&(n.parent.insert(e,n),e.append(n)),n}unwrap(){const e=this;for(let n=e.firstChild;n;){const o=n.next;e.insert(n,e,!0),n=o}e.remove()}remove(){const e=this,n=e.parent,o=e.next,r=e.prev;return n&&(n.firstChild===e?(n.firstChild=o,o&&(o.prev=null)):r&&(r.next=o),n.lastChild===e?(n.lastChild=r,r&&(r.next=null)):o&&(o.prev=r),e.parent=e.next=e.prev=null),e}append(e){const n=this;e.parent&&e.remove();const o=n.lastChild;return o?(o.next=e,e.prev=o,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e}insert(e,n,o){e.parent&&e.remove();const r=n.parent||this;return o?(n===r.firstChild?r.firstChild=e:n.prev&&(n.prev.next=e),e.prev=n.prev,e.next=n,n.prev=e):(n===r.lastChild?r.lastChild=e:n.next&&(n.next.prev=e),e.next=n.next,e.prev=n,n.next=e),e.parent=r,e}getAll(e){const n=this,o=[];for(let r=n.firstChild;r;r=Oi(r,n))r.name===e&&o.push(r);return o}children(){const e=[];for(let n=this.firstChild;n;n=n.next)e.push(n);return e}empty(){const e=this;if(e.firstChild){const n=[];for(let r=e.firstChild;r;r=Oi(r,e))n.push(r);let o=n.length;for(;o--;){const r=n[o];r.parent=r.firstChild=r.lastChild=r.next=r.prev=null}}return e.firstChild=e.lastChild=null,e}isEmpty(e,n={},o){var r;const s=this;let a=s.firstChild;if(Lb(s))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name]||Lb(a))return!1}if(8===a.type||3===a.type&&!o_(a)||3===a.type&&a.parent&&n[a.parent.name]&&Mo(null!==(r=a.value)&&void 0!==r?r:"")||o&&o(a))return!1}while(a=Oi(a,s));return!0}walk(e){return Oi(this,null,e)}}const Mb=(t,e,n=0)=>{const o=t.toLowerCase();if(-1!==o.indexOf("[if ",n)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(o.substr(n))){const r=o.indexOf("[endif]",n);return o.indexOf(">",r)}if(e){const r=o.indexOf(">",n);return-1!==r?r:o.length}{const r=/--!?>/g;r.lastIndex=n;const s=r.exec(t);return s?s.index+s[0].length:o.length}},r_=(t,e,n)=>{const o=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,r=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,s=t.getVoidElements();let a=1,i=n;for(;0!==a;)for(o.lastIndex=i;;){const l=o.exec(e);if(null===l)return i;if("!"===l[1]){i=te(l[2],"--")?Mb(e,!1,l.index+3):Mb(e,!0,l.index+1);break}{r.lastIndex=o.lastIndex;const d=r.exec(e);if(Ge(d)||d.index!==o.lastIndex)continue;"/"===l[1]?a-=1:pt(s,l[2])||(a+=1),i=o.lastIndex+d[0].length;break}}return i},Ib=(t,e)=>{const n=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,o=t.schema;let r=((i,l)=>{const d=new RegExp(["\\s?("+i.join("|")+')="[^"]+"'].join("|"),"gi");return l.replace(d,"")})(t.getTempAttrs(),e);const s=o.getVoidElements();let a;for(;a=n.exec(r);){const i=n.lastIndex,l=a[0].length;let d;d=s[a[1]]?i:r_(o,r,i),r=r.substring(0,i-l)+r.substring(d),n.lastIndex=i-l}return jn(r)},s_=Ib,Fb=t=>{const e=se(t,"[data-mce-bogus]");H(e,n=>{"all"===Le(n,"data-mce-bogus")?Ot(n):Po(n)?(Me(n,hr("\ufeff")),Ot(n)):Un(n)})},Ub=t=>{const e=se(t,"input");H(e,n=>{ee(n,"name")})},zb=$.makeMap,jb=t=>{const e=[],n=(t=t||{}).indent,o=zb(t.indent_before||""),r=zb(t.indent_after||""),s=oo.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(i,l,d)=>{if(n&&o[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}if(e.push("<",i),l)for(let c=0,u=l.length;c<u;c++){const g=l[c];e.push(" ",g.name,'="',s(g.value,!0),'"')}if(e[e.length]=!d||a?">":" />",d&&n&&r[i]&&e.length>0){const c=e[e.length-1];c.length>0&&"\n"!==c&&e.push("\n")}},end:i=>{let l;e.push("</",i,">"),n&&r[i]&&e.length>0&&(l=e[e.length-1],l.length>0&&"\n"!==l&&e.push("\n"))},text:(i,l)=>{i.length>0&&(e[e.length]=l?i:s(i))},cdata:i=>{e.push("<![CDATA[",i,"]]>")},comment:i=>{e.push("\x3c!--",i,"--\x3e")},pi:(i,l)=>{l?e.push("<?",i," ",s(l),"?>"):e.push("<?",i,"?>"),n&&e.push("\n")},doctype:i=>{e.push("<!DOCTYPE",i,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},uo=(t={},e=ro())=>{const n=jb(t);return t.validate=!("validate"in t)||t.validate,{serialize:o=>{const r=t.validate,s={3:i=>{var l;n.text(null!==(l=i.value)&&void 0!==l?l:"",i.raw)},8:i=>{var l;n.comment(null!==(l=i.value)&&void 0!==l?l:"")},7:i=>{n.pi(i.name,i.value)},10:i=>{var l;n.doctype(null!==(l=i.value)&&void 0!==l?l:"")},4:i=>{var l;n.cdata(null!==(l=i.value)&&void 0!==l?l:"")},11:i=>{let l=i;if(l=l.firstChild)do{a(l)}while(l=l.next)}};n.reset();const a=i=>{var l;const d=s[i.type];if(d)d(i);else{const c=i.name,u=c in e.getVoidElements();let g=i.attributes;if(r&&g&&g.length>1){const p=[];p.map={};const f=e.getElementRule(i.name);if(f){for(let h=0,m=f.attributesOrder.length;h<m;h++){const b=f.attributesOrder[h];if(b in g.map){const v=g.map[b];p.map[b]=v,p.push({name:b,value:v})}}for(let h=0,m=g.length;h<m;h++){const b=g[h].name;if(!(b in p.map)){const v=g.map[b];p.map[b]=v,p.push({name:b,value:v})}}g=p}}if(n.start(c,g,u),!u){let p=i.firstChild;if(p){"pre"!==c&&"textarea"!==c||3!==p.type||"\n"!==(null===(l=p.value)||void 0===l?void 0:l[0])||n.text("\n",!0);do{a(p)}while(p=p.next)}n.end(c)}}};return 1!==o.type||t.inner?3===o.type?s[3](o):s[11](o):a(o),n.getContent()}}},Hb=new Set;H(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],t=>{Hb.add(t)});const $b=["font","text-decoration","text-emphasis"],Tc=(t,e)=>Oe(t.parseStyle(t.getAttrib(e,"style"))),i_=(t,e,n)=>{const o=Tc(t,e),r=Tc(t,n),s=a=>{var i,l;const d=null!==(i=t.getStyle(e,a))&&void 0!==i?i:"",c=null!==(l=t.getStyle(n,a))&&void 0!==l?l:"";return gn(d)&&gn(c)&&d!==c};return It(o,a=>{const i=l=>It(l,d=>d===a);if(!i(r)&&i($b)){const l=ct(r,d=>It($b,c=>te(d,c)));return It(l,s)}return s(a)})},Vb=(t,e,n)=>C.from(n.container()).filter(j).exists(o=>{const r=t?0:-1;return e(o.data.charAt(n.offset()+r))}),Bc=Z(Vb,!0,Or),Dc=Z(Vb,!1,Or),l_=t=>{const e=t.container();return j(e)&&(0===e.data.length||Ka(e.data)&&Hs.isBookmarkNode(e.parentNode))},mo=(t,e)=>n=>Kd(t?0:-1,n).filter(e).isSome(),qb=t=>xg(t)&&"block"===bn(N(t),"display"),Wb=t=>{return Nt(t)&&!(Q(e=t)&&"all"===e.getAttribute("data-mce-bogus"));var e},d_=mo(!0,qb),c_=mo(!1,qb),Ws=mo(!0,vn),Ks=mo(!1,vn),Kb=mo(!0,zn),Gb=mo(!1,zn),fo=mo(!0,Wb),go=mo(!1,Wb),Yb=(t,e)=>{return r=Bt,Mn(o=e,n=t)?Jf(n,s=>r(s)||wt(s,o)).slice(0,-1):[];var n,o,r},Vn=(t,e)=>[t].concat(Yb(t,e)),Pc=(t,e,n)=>wh(t,e,n,l_),Xb=(t,e)=>$t(Vn(N(e.container()),t),Ie),Qb=(t,e,n)=>Pc(t,e.dom,n).forall(o=>Xb(e,n).fold(()=>!Cn(o,n,e.dom),r=>!Cn(o,n,e.dom)&&Mn(r,N(o.container())))),Jb=(t,e,n)=>Xb(e,n).fold(()=>Pc(t,e.dom,n).forall(o=>!Cn(o,n,e.dom)),o=>Pc(t,o.dom,n).isNone()),Lc=Z(Jb,!1),Zb=Z(Jb,!0),u_=Z(Qb,!1),m_=Z(Qb,!0),f_=t=>ui(t).exists(Po),Ti=(t,e,n)=>{const o=ct(Vn(N(n.container()),e),Ie),r=we(o).getOr(e);return Ue(t,r.dom,n).filter(f_)},Mc=(t,e)=>ui(e).exists(Po)||Ti(!0,t,e).isSome(),Ic=(t,e)=>{return(n=e,C.from(n.getNode(!0)).map(N)).exists(Po)||Ti(!1,t,e).isSome();var n},g_=Z(Ti,!1),p_=Z(Ti,!0),t0=t=>L.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),e0=(t,e)=>{const n=ct(Vn(N(e.container()),t),Ie);return we(n).getOr(t)},n0=(t,e)=>t0(e)?Dc(e):Dc(e)||ze(e0(t,e).dom,e).exists(Dc),o0=(t,e)=>t0(e)?Bc(e):Bc(e)||ke(e0(t,e).dom,e).exists(Bc),Fc=t=>ui(t).bind(e=>Ao(e,xe)).exists(e=>{return n=bn(e,"white-space"),St(["pre","pre-wrap"],n);var n}),r0=(t,e)=>n=>{return o=new qt(n,t)[e](),Y(o)&&Nt(o)&&lh(o);var o},Gs=(t,e)=>!Fc(e)&&(Lc(t,e)||u_(t,e)||Ic(t,e)||n0(t,e)||((n,o)=>{const r=ze(n.dom,o).getOr(o),s=r0(n.dom,"prev");return o.isAtStart()&&(s(o.container())||s(r.container()))})(t,e)),Ys=(t,e)=>!Fc(e)&&(Zb(t,e)||m_(t,e)||Mc(t,e)||o0(t,e)||((n,o)=>{const r=ke(n.dom,o).getOr(o),s=r0(n.dom,"next");return o.isAtEnd()&&(s(o.container())||s(r.container()))})(t,e)),Uc=(t,e)=>Gs(t,e)||Ys(t,(n=>{const o=n.container(),r=n.offset();return j(o)&&r<o.data.length?L(o,r+1):n})(e)),s0=(t,e)=>hi(t.charAt(e)),a0=(t,e)=>Or(t.charAt(e)),i0=(t,e,n)=>{const o=e.data,r=L(e,0);return n||!s0(o,0)||Uc(t,r)?!!(n&&a0(o,0)&&Gs(t,r))&&(e.data=Jt+o.slice(1),!0):(e.data=" "+o.slice(1),!0)},l0=(t,e,n)=>{const o=e.data,r=L(e,o.length-1);return n||!s0(o,o.length-1)||Uc(t,r)?!!(n&&a0(o,o.length-1)&&Ys(t,r))&&(e.data=o.slice(0,-1)+Jt,!0):(e.data=o.slice(0,-1)+" ",!0)},d0=(t,e,n)=>{if(0===n)return;const o=N(t),r=Fn(o,Ie).getOr(o),s=t.data.slice(e,e+n),a=e+n>=t.data.length&&Ys(r,L(t,t.data.length)),i=0===e&&Gs(r,L(t,0));t.replaceData(e,n,Bg(s,4,i,a))},Bi=(t,e)=>{const n=t.data.slice(e),o=n.length-Lx(n).length;d0(t,e,o)},zc=(t,e)=>{const n=t.data.slice(0,e),o=n.length-kf(n).length;d0(t,e-o,o)},jc=(t,e,n,o=!0)=>{const r=kf(t.data).length,s=o?t:e,a=o?e:t;return o?s.appendData(a.data):s.insertData(0,a.data),Ot(N(a)),n&&Bi(s,r),s},b_=(t,e)=>((n,o)=>{const r=n.container(),s=n.offset();return!L.isTextPosition(n)&&r===o.parentNode&&s>L.before(o).offset()})(e,t)?L(e.container(),e.offset()-1):e,c0=t=>{return Ye(t.previousSibling)?C.some(j(e=t.previousSibling)?L(e,e.data.length):L.after(e)):t.previousSibling?kn(t.previousSibling):C.none();var e},u0=t=>{return Ye(t.nextSibling)?C.some(j(e=t.nextSibling)?L(e,0):L.before(e)):t.nextSibling?he(t.nextSibling):C.none();var e},m0=(t,e,n)=>{n.fold(()=>{t.focus()},o=>{t.selection.setRng(o.toRange(),e)})},y_=(t,e)=>e&&pt(t.schema.getBlockElements(),At(e)),C_=t=>{if(Ft(t)){const e=Da('<br data-mce-bogus="1">');return vr(t),Vt(t,e),C.some(L.before(e.dom))}return C.none()},Jo=(t,e,n,o=!0)=>{const r=((t,e,n)=>{return(o=t,r=e,s=n,o?(a=r,u0(i=s).orThunk(()=>c0(i)).orThunk(()=>{return ke(l=a,L.after(d=i)).orThunk(()=>ze(l,L.before(d)));var l,d})):((a,i)=>c0(i).orThunk(()=>u0(i)).orThunk(()=>{return l=a,C.from((d=i).previousSibling?d.previousSibling:d.parentNode).bind(c=>ze(l,L.before(c))).orThunk(()=>ke(l,L.after(d)));var l,d}))(r,s)).map(Z(b_,n));var o,r,s,a,i})(e,t.getBody(),n.dom),s=Fn(n,Z(y_,t),(a=t.getBody(),l=>l.dom===a));var a;const i=((l,d,c)=>{const u=Ro(l).filter(Pe),g=ms(l).filter(Pe);return Ot(l),(p=u,f=g,h=d,m=(b,v,y)=>{const w=b.dom,k=v.dom,x=w.data.length;return jc(w,k,c),y.container()===k?L(w,x):y},p.isSome()&&f.isSome()&&h.isSome()?C.some(m(p.getOrDie(),f.getOrDie(),h.getOrDie())):C.none()).orThunk(()=>(c&&(u.each(b=>zc(b.dom,b.dom.length)),g.each(b=>Bi(b.dom,0))),d));var p,f,h,m})(n,r,(d=n,pt(t.schema.getTextInlineElements(),At(d))));var d;t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):s.bind(C_).fold(()=>{o&&m0(t,e,i)},l=>{o&&m0(t,e,C.some(l))})},w_=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Zo=(t,e)=>tn(N(e),CE(t))&&!Io(t.schema,e)&&t.dom.isEditable(e),po=(t,e,n)=>{const o=(r=t,s=e,ct(Et.DOM.getParents(n.container(),"*",s),r));var r,s;return C.from(o[o.length-1])},Ve=(t,e)=>{const n=e.container(),o=e.offset();return t?no(n)?j(n.nextSibling)?L(n.nextSibling,0):L.after(n):md(e)?L(n,o+1):e:no(n)?j(n.previousSibling)?L(n.previousSibling,n.previousSibling.data.length):L.before(n):fd(e)?L(n,o-1):e},f0=Z(Ve,!0),g0=Z(Ve,!1),p0=(t,e)=>{const n=o=>o.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},Hc=t=>p0(t,"Delete"),x_=t=>Sg(t)||vs(t),Di=(t,e)=>{return Mn(t,e)?Ao(e,x_,(n=t,o=>gr(en(o),n,wt))):C.none();var n},$c=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},h0=t=>{var e;return(8===Hf(e=t)||"#comment"===At(e)?Ro(t):nd(t)).bind(h0).orThunk(()=>C.some(t))},b0=(t,e,n,o=!0)=>{var r;e.deleteContents();const s=h0(n).getOr(n),a=N(null!==(r=t.dom.getParent(s.dom,t.dom.isBlock))&&void 0!==r?r:n.dom);if(a.dom===t.getBody()?$c(t,o):Ft(a)&&(Lo(a),o&&t.selection.setCursorLocation(a.dom,0)),!wt(n,a)){const l=gr(en(a),n)?[]:en(i=a).map(ne).map(d=>ct(d,c=>!wt(i,c))).getOr([]);H(l.concat(ne(n)),d=>{wt(d,a)||Mn(d,a)||!Ft(d)||Ot(d)})}var i},Vc=t=>se(t,"td,th"),qc=(t,e)=>({start:t,end:e}),Xs=yn([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Pi=(t,e)=>Oo(N(t),"td,th",e),v0=t=>!wt(t.start,t.end),y0=(t,e)=>zs(t.start,e).bind(n=>zs(t.end,e).bind(o=>is(wt(n,o),n))),Wc=t=>e=>y0(e,t).map(n=>({rng:e,table:n,cells:Vc(n)})),C0=(t,e,n,o)=>{if(n.collapsed||!t.forall(v0))return C.none();if(e.isSameTable){const r=t.bind(Wc(o));return C.some({start:r,end:r})}{const r=Pi(n.startContainer,o),s=Pi(n.endContainer,o),a=r.bind((l=o,d=>zs(d,l).bind(c=>Eo(Vc(c)).map(u=>qc(d,u))))).bind(Wc(o)),i=s.bind((l=>d=>zs(d,l).bind(c=>we(Vc(c)).map(u=>qc(u,d))))(o)).bind(Wc(o));return C.some({start:a,end:i})}var l},w0=(t,e)=>es(t,n=>wt(n,e)),Kc=t=>ge(w0(t.cells,t.rng.start),w0(t.cells,t.rng.end),(e,n)=>t.cells.slice(e,n+1)),x0=(t,e)=>{const{startTable:n,endTable:o}=e,r=t.cloneRange();return n.each(s=>r.setStartAfter(s.dom)),o.each(s=>r.setEndBefore(s.dom)),r},k0=t=>H(t,e=>{ee(e,"contenteditable"),Lo(e)}),Gc=(t,e,n,o)=>{const r=n.cloneRange();o?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Yc(t,r,e,!1).each(s=>s())},E0=t=>{const e=Tr(t),n=N(t.selection.getNode());Ha(n.dom)&&Ft(n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&It(e,o=>wt(o,n))&&Xt(n,"data-mce-selected","1")},S0=(t,e,n)=>C.some(()=>{const o=t.selection.getRng(),r=n.bind(({rng:s,isStartInTable:a})=>{const i=C.from((d=t).dom.getParent(a?s.endContainer:s.startContainer,d.dom.isBlock)).map(N);var d;s.deleteContents(),((d,c,u)=>{u.each(g=>{c?Ot(g):(Lo(g),d.selection.setCursorLocation(g.dom,0))})})(t,a,i.filter(Ft));const l=a?e[0]:e[e.length-1];return Gc(t,l,o,a),Ft(l)?C.none():C.some(a?e.slice(1):e.slice(0,-1))}).getOr(e);k0(r),E0(t)}),E_=(t,e,n,o)=>C.some(()=>{const r=t.selection.getRng(),s=e[0],a=n[n.length-1];Gc(t,s,r,!0),Gc(t,a,r,!1);const i=Ft(s)?e:e.slice(1),l=Ft(a)?n:n.slice(0,-1);k0(i.concat(l)),o.deleteContents(),E0(t)}),Yc=(t,e,n,o=!0)=>C.some(()=>{b0(t,e,n,o)}),S_=(t,e)=>C.some(()=>Jo(t,!1,e)),_0=(t,e)=>$t(Vn(e,t),ys),Xc=(t,e)=>$t(Vn(e,t),Ql("caption")),Li=(t,e)=>C.some(()=>{Lo(e),t.selection.setCursorLocation(e.dom,0)}),N0=(t,e)=>t?Kb(e):Gb(e),Qc=(t,e)=>{const n=N(t.selection.getStart(!0)),o=Tr(t);return t.selection.isCollapsed()&&0===o.length?((t,e,n)=>{const o=N(t.getBody());return Xc(o,n).fold(()=>((r,s,a,i)=>{const l=L.fromRangeStart(r.selection.getRng());return _0(a,i).bind(d=>{return Ft(d)?Li(r,d):(u=a,p=d,f=l,gi(s,r.getBody(),f).bind(h=>_0(u,N(h.getNode())).bind(m=>wt(m,p)?C.none():C.some(bt))));var u,p,f})})(t,e,o,n).orThunk(()=>is(((r,s)=>{const a=L.fromRangeStart(r.selection.getRng());return N0(s,a)||Ue(s,r.getBody(),a).exists(i=>N0(s,i))})(t,e),bt)),r=>((s,a,i,l)=>{const d=L.fromRangeStart(s.selection.getRng());return Ft(l)?Li(s,l):(u=i,p=l,f=d,gi(g=a,(c=s).getBody(),f).fold(()=>C.some(bt),h=>{return b=g,v=f,y=h,he((m=p).dom).bind(w=>kn(m.dom).map(k=>b?v.isEqual(w)&&y.isEqual(k):v.isEqual(k)&&y.isEqual(w))).getOr(!0)?((m,b)=>Li(m,b))(c,p):((m,b,v)=>Xc(m,N(v.getNode())).fold(()=>C.some(bt),y=>is(!wt(y,b),bt)))(u,p,h);var m,b,v,y}));var c,u,g,p,f})(t,e,o,r))})(t,e,n):((r,s,a)=>{const i=N(r.getBody()),l=r.selection.getRng();return 0!==a.length?S0(r,a,C.none()):(d=r,u=l,Xc(c=i,s).fold(()=>{return p=d,((t,e)=>{const n=(s=t,a=>wt(s,a)),o=((s,a)=>{const i=Pi(s.startContainer,a),l=Pi(s.endContainer,a);return ge(i,l,qc)})(e,n),r=((s,a)=>{const i=p=>zs(N(p),a),l=i(s.startContainer),d=i(s.endContainer),c=l.isSome(),u=d.isSome(),g=ge(l,d,wt).getOr(!1);return{startTable:l,endTable:d,isStartInTable:c,isEndInTable:u,isSameTable:g,isMultiTable:!g&&c&&u}})(e,n);var s;return((s,a,i)=>s.exists(l=>{return c=i,!v0(d=l)&&y0(d,c).exists(u=>{const g=u.dom.rows;return 1===g.length&&1===g[0].cells.length})&&rc(l.start,a);var d,c}))(o,e,n)?o.map(s=>Xs.singleCellTable(e,s.start)):r.isMultiTable?((s,a,i,l)=>C0(s,a,i,l).bind(({start:d,end:c})=>{const u=d.bind(Kc).getOr([]),g=c.bind(Kc).getOr([]);if(u.length>0&&g.length>0){const p=x0(i,a);return C.some(Xs.multiTable(u,g,p))}return C.none()}))(o,r,e,n):((s,a,i,l)=>C0(s,a,i,l).bind(({start:d,end:c})=>d.or(c)).bind(d=>{const{isSameTable:c}=a,u=Kc(d).getOr([]);if(c&&d.cells.length===u.length)return C.some(Xs.fullTable(d.table));if(u.length>0){if(c)return C.some(Xs.partialTable(u,C.none()));{const g=x0(i,a);return C.some(Xs.partialTable(u,C.some({...a,rng:g})))}}return C.none()}))(o,r,e,n)})(c,u).bind(m=>m.fold(Z(Yc,p),Z(S_,p),Z(S0,p),Z(E_,p)));var p},p=>Li(d,p)));var d,c,u})(t,n,o)},tr=(t,e)=>{let n=e;for(;n&&n!==t;){if(on(n)||Nt(n))return n;n=n.parentNode}return null},N_=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],R_=$.each,Jc=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),o=r=>It(N_,s=>te(r,s))||n.has(r);return{compare:(r,s)=>{if(r.nodeName!==s.nodeName||r.nodeType!==s.nodeType)return!1;const a=l=>{const d={};return R_(e.getAttribs(l),c=>{const u=c.nodeName.toLowerCase();"style"===u||o(u)||(d[u]=e.getAttrib(l,u))}),d},i=(l,d)=>{for(const c in l)if(pt(l,c)){const u=d[c];if(me(u)||l[c]!==u)return!1;delete d[c]}for(const c in d)if(pt(d,c))return!1;return!0};return!(Q(r)&&Q(s)&&(!i(a(r),a(s))||!i(e.parseStyle(e.getAttrib(r,"style")),e.parseStyle(e.getAttrib(s,"style"))))||je(r)||je(s))},isAttributeInternal:o}},R0=(t,e,n,o)=>{const r=n.name;for(let s=0,a=t.length;s<a;s++){const i=t[s];if(i.name===r){const l=o.nodes[r];l?l.nodes.push(n):o.nodes[r]={filter:i,nodes:[n]}}}if(n.attributes)for(let s=0,a=e.length;s<a;s++){const i=e[s],l=i.name;if(l in n.attributes.map){const d=o.attributes[l];d?d.nodes.push(n):o.attributes[l]={filter:i,nodes:[n]}}}},A0=(t,e)=>{const n=(o,r)=>{_t(o,s=>{const a=Ae(s.nodes);H(s.filter.callbacks,i=>{for(let l=a.length-1;l>=0;l--){const d=a[l];(r?void 0!==d.attr(s.filter.name):d.name===s.filter.name)&&!zt(d.parent)||a.splice(l,1)}a.length>0&&i(a,s.filter.name,e)})})};n(t.nodes,!1),n(t.attributes,!0)},O0=(t,e,n,o={})=>{const r=((s,a,i)=>{const l={nodes:{},attributes:{}};return i.firstChild&&((d,c)=>{let u=d;for(;u=u.walk();)R0(s,a,u,l)})(i),l})(t,e,n);A0(r,o)},Zc=(t,e,n)=>{if(t.insert&&e(n)){const o=new be("br",1);o.attr("data-mce-bogus","1"),n.empty().append(o)}else n.empty().append(new be("#text",3)).value=Jt},T0=(t,e)=>{const n=t?.firstChild;return Y(n)&&n===t.lastChild&&n.name===e},Qs=(t,e,n,o)=>o.isEmpty(e,n,r=>!0===t.getElementRule(r.name)?.paddEmpty),A_=t=>{let e;for(let n=t;n;n=n.parent){const o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(e=n)}return C.from(e)},tu=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const o=t.children();for(const r of o)n&&!e.isValidChild(n.name,r.name)&&tu(r,e,n);t.unwrap()}},eu=(t,e,n,o=bt)=>{const r=e.getTextBlockElements(),s=e.getNonEmptyElements(),a=e.getWhitespaceElements(),i=$.makeMap("tr,td,th,tbody,thead,tfoot,table"),l=new Set,d=c=>c!==n&&!i[c.name];for(let c=0;c<t.length;c++){const u=t[c];let g,p,f;if(!u.parent||l.has(u))continue;if(r[u.name]&&"li"===u.parent.name){let m=u.next;for(;m&&r[m.name];)m.name="li",l.add(m),u.parent.insert(m,u.parent),m=m.next;u.unwrap();continue}const h=[u];for(g=u.parent;g&&!e.isValidChild(g.name,u.name)&&d(g);g=g.parent)h.push(g);if(g&&h.length>1)if(e.isValidChild(g.name,u.name)){h.reverse(),p=h[0].clone(),o(p);let m=p;for(let b=0;b<h.length-1;b++){e.isValidChild(m.name,h[b].name)&&b>0?(f=h[b].clone(),o(f),m.append(f)):f=m;for(let v=h[b].firstChild;v&&v!==h[b+1];){const y=v.next;f.append(v),v=y}m=f}Qs(e,s,a,p)?g.insert(u,h[0],!0):(g.insert(p,h[0],!0),g.insert(u,p)),g=h[0],(Qs(e,s,a,g)||T0(g,"br"))&&g.empty().remove()}else tu(u,e);else if(u.parent){if("li"===u.name){let m=u.prev;if(m&&("ul"===m.name||"ol"===m.name)){m.append(u);continue}if(m=u.next,m&&("ul"===m.name||"ol"===m.name)&&m.firstChild){m.insert(u,m.firstChild,!0);continue}const b=new be("ul",1);o(b),u.wrap(b);continue}if(e.isValidChild(u.parent.name,"div")&&e.isValidChild("div",u.name)){const m=new be("div",1);o(m),u.wrap(m)}else tu(u,e)}}},B0=(t,e,n=e.parent)=>!(!n||!t.children[e.name]||t.isValidChild(n.name,e.name))||!(!n||"a"!==e.name||!((o,r)=>{let s=o;for(;s;){if("a"===s.name)return!0;s=s.parent}return!1})(n)),nu=t=>t.collapsed?t:(e=>{const n=L.fromRangeStart(e),o=L.fromRangeEnd(e),r=e.commonAncestorContainer;return Ue(!1,r,o).map(s=>!Cn(n,o,r)&&Cn(n,s,r)?((a,i,l,d)=>{const c=document.createRange();return c.setStart(a,i),c.setEnd(l,d),c})(n.container(),n.offset(),s.container(),s.offset()):e).getOr(e)})(t),ou=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},D0=(t,e)=>{const n=L.after(t),o=xn(e).prev(n);return o?o.toRange():null},D_=["pre"],ru=Ha,P_=(t,e,n)=>{var o,r;const s=t.selection,a=t.dom,i=t.parser,l=n.merge,d=uo({validate:!0},t.schema),c='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,c);let u=s.getRng();const g=u.startContainer,p=t.getBody();var y,w;g===p&&s.isCollapsed()&&a.isBlock(p.firstChild)&&(y=t,Y(w=p.firstChild)&&!y.schema.getVoidElements()[w.nodeName])&&a.isEmpty(p.firstChild)&&(u=a.createRng(),u.setStart(p.firstChild,0),u.setEnd(p.firstChild,0),s.setRng(u)),s.isCollapsed()||(y=>{const w=y.dom,k=nu(y.selection.getRng());y.selection.setRng(k);const x=w.getParent(k.startContainer,ru);var S,E,_;S=w,E=k,Y(_=x)&&_===S.getParent(E.endContainer,ru)&&rc(N(_),E)?Yc(y,k,N(x)):k.startContainer===k.endContainer&&k.endOffset-k.startOffset==1&&j(k.startContainer.childNodes[k.startOffset])?k.deleteContents():y.getDoc().execCommand("Delete",!1)})(t);const f=s.getNode(),h={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},m=i.parse(e,h);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,o=e.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),((r,s)=>{const a=r.getNonEmptyElements();return Y(s)&&(s.isEmpty(a)||(l=s,r.getBlockElements()[l.name]&&Y((d=l).firstChild)&&d.firstChild===d.lastChild&&(d=>"br"===d.name||d.value===Jt)(l.firstChild)));var l,d})(t,o)&&(o=o?.prev),!(!n||n!==o||"ul"!==n.name&&"ol"!==n.name)})(t.schema,m)&&((y,w)=>!!ou(y,w))(a,f))return u=((t,e,n,o)=>{const r=((u,g,p)=>{const f=g.serialize(p);return(h=>{var m,b;const v=h.firstChild,y=h.lastChild;return v&&"META"===v.nodeName&&(null===(m=v.parentNode)||void 0===m||m.removeChild(v)),y&&"mce_marker"===y.id&&(null===(b=y.parentNode)||void 0===b||b.removeChild(y)),h})(u.createFragment(f))})(e,t,o),s=ou(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||Y(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&((o=e.firstChild).data===Jt||Lt(o)))?t.slice(0,-1):t;var o,e,n})(ct(null!==(l=r.firstChild?.childNodes)&&void 0!==l?l:[],u=>"LI"===u.nodeName));var l;const d=e.getRoot(),c=u=>{const g=L.fromRangeStart(n),p=xn(e.getRoot()),h=(1===u?p.prev(g):p.next(g))?.getNode();return!h||ou(e,h)!==s};return s?c(1)?((u,g,p)=>{const f=u.parentNode;return f&&$.each(g,h=>{f.insertBefore(h,u)}),((h,m)=>{const b=L.before(h),v=xn(m).next(b);return v?v.toRange():null})(u,p)})(s,a,d):c(2)?(u=s,p=d,e.insertAfter((g=a).reverse(),u),D0(g[0],p)):((u,g,p,f)=>{const h=((b,v)=>{const y=v.cloneRange(),w=v.cloneRange();return y.setStartBefore(b),w.setEndAfter(b),[y.cloneContents(),w.cloneContents()]})(u,f),m=u.parentNode;return m&&(m.insertBefore(h[0],u),$.each(g,b=>{m.insertBefore(b,u)}),m.insertBefore(h[1],u),m.removeChild(u)),D0(g[g.length-1],p)})(s,a,d,n):null;var u,g,p})(d,a,s.getRng(),m),u&&s.setRng(u),e;!0===n.paste&&((y,w,k,x)=>{var S;const E=w.firstChild,_=w.lastChild,D=E===("bookmark"===_.attr("data-mce-type")?_.prev:_),T=St(D_,E.name);if(D&&T){const P="false"!==E.attr("contenteditable"),O=(null===(S=y.getParent(k,y.isBlock))||void 0===S?void 0:S.nodeName.toLowerCase())===E.name,F=C.from(tr(x,k)).forall(on);return P&&O&&F}return!1})(a,m,f,t.getBody())&&(null===(o=m.firstChild)||void 0===o||o.unwrap()),(y=>{let w=y;for(;w=w.walk();)1===w.type&&w.attr("data-mce-fragment","1")})(m);let b=m.lastChild;if(b&&"mce_marker"===b.attr("id")){const y=b;for(b=b.prev;b;b=b.walk(!0))if(3===b.type||!a.isBlock(b.name)){b.parent&&t.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(y,b,"br"===b.name);break}}if(t._selectionOverrides.showBlockCaretContainer(f),h.invalid){t.selection.setContent(c);let y,w=s.getNode();const k=t.getBody();for(hs(w)?w=y=k:y=w;y&&y!==k;)w=y,y=y.parentNode;e=w===k?k.innerHTML:a.getOuterHTML(w);const x=i.parse(e),S=(P=>{for(let O=P;O;O=O.walk())if("mce_marker"===O.attr("id"))return C.some(O);return C.none()})(x),E=S.bind(A_).getOr(x);S.each(P=>P.replace(m));const _=m.children(),D=null!==(r=m.parent)&&void 0!==r?r:x;m.unwrap();const T=ct(_,P=>B0(t.schema,P,D));eu(T,t.schema,E),O0(i.getNodeFilters(),i.getAttributeFilters(),x),e=d.serialize(x),w===k?a.setHTML(k,e):a.setOuterHTML(w,e)}else e=d.serialize(m),((y,w,k)=>{var x;if("all"===k.getAttribute("data-mce-bogus"))null===(x=k.parentNode)||void 0===x||x.insertBefore(y.dom.createFragment(w),k);else{const S=k.firstChild;!S||S===k.lastChild&&"BR"===S.nodeName?y.dom.setHTML(k,w):y.selection.setContent(w,{no_events:!0})}})(t,e,f);var v;return((y,w)=>{const k=y.schema.getTextInlineElements(),x=y.dom;if(w){const S=y.getBody(),E=Jc(y);$.each(x.select("*[data-mce-fragment]"),_=>{if(Y(k[_.nodeName.toLowerCase()])&&Yn(Tc(x,_),P=>!Hb.has(P)))for(let D=_.parentElement;Y(D)&&D!==S&&!i_(x,_,D);D=D.parentElement)if(E.compare(D,_)){x.remove(_,!0);break}})}})(t,l),((y,w)=>{var k,x,S;let E;const _=y.dom,D=y.selection;if(!w)return;D.scrollIntoView(w);const T=tr(y.getBody(),w);if(T&&"false"===_.getContentEditable(T))return _.remove(w),void D.select(T);let P=_.createRng();const O=w.previousSibling;if(j(O)){P.setStart(O,null!==(x=null===(k=O.nodeValue)||void 0===k?void 0:k.length)&&void 0!==x?x:0);const q=w.nextSibling;j(q)&&(O.appendData(q.data),null===(S=q.parentNode)||void 0===S||S.removeChild(q))}else P.setStartBefore(w),P.setEndBefore(w);const F=_.getParent(w,_.isBlock);_.remove(w),F&&_.isEmpty(F)&&(vr(N(F)),P.setStart(F,0),P.setEnd(F,0),ru(F)||F.getAttribute("data-mce-fragment")||!(E=(q=>{let W=L.fromRangeStart(q);return W=xn(y.getBody()).next(W),W?.toRange()})(P))?_.add(F,_.create("br",{"data-mce-bogus":"1"})):(P=E,_.remove(F))),D.setRng(P)})(t,a.get("mce_marker")),v=t.getBody(),$.each(v.getElementsByTagName("*"),y=>{y.removeAttribute("data-mce-fragment")}),((y,w)=>{C.from(y.getParent(w,"td,th")).map(N).each(fk)})(a,s.getStart()),((y,w,k)=>{const x=Jf(N(k),S=>wt(S,N(w)));_a(x,x.length-2).filter(xe).fold(()=>bd(y,w),S=>bd(y,S.dom))})(t.schema,t.getBody(),s.getStart()),e},Mi=t=>t instanceof be,su=(t,e,n)=>{var o;t.dom.setHTML(t.getBody(),e),!0!==n&&Qo(o=t)&&he(o.getBody()).each(r=>{const s=r.getNode(),a=zn(s)?he(s).getOr(r):r;o.selection.setRng(a.toRange())})},P0=t=>Ct(t)?t:Bt,au=(t,e,n)=>{const o=e(t),r=P0(n);return o.orThunk(()=>r(t)?C.none():((s,a,i)=>{let l=s.dom;const d=P0(i);for(;l.parentNode;){l=l.parentNode;const c=N(l),u=a(c);if(u.isSome())return u;if(d(c))break}return C.none()})(t,e,r))},iu=cc,L0=(t,e,n)=>{const o=t.formatter.get(n);if(o)for(let r=0;r<o.length;r++){const s=o[r];if(He(s)&&!1===s.inherit&&t.dom.is(e,s.selector))return!0}return!1},lu=(t,e,n,o,r)=>{const s=t.dom.getRoot();if(e===s)return!1;const a=t.dom.getParent(e,i=>!!L0(t,i,n)||i.parentNode===s||!!Sn(t,i,n,o,!0));return!!Sn(t,a,n,o,r)},Ii=(t,e,n)=>!(!Wt(n)||!iu(e,n.inline))||!(!En(n)||!iu(e,n.block))||!!He(n)&&Q(e)&&t.is(e,n.selector),M0=(t,e,n,o,r,s)=>{const a=n[o],i="attributes"===o;if(Ct(n.onmatch))return n.onmatch(e,n,o);if(a)if(hf(a)){for(let l=0;l<a.length;l++)if(i?t.getAttrib(e,a[l]):Ci(t,e,a[l]))return!0}else for(const l in a)if(pt(a,l)){const d=i?t.getAttrib(e,l):Ci(t,e,l),c=co(a[l],s),u=zt(d)||as(d);if(u&&zt(c))continue;if(r&&u&&!n.exact||(!r||n.exact)&&!iu(d,uc(c,l)))return!1}return!0},Sn=(t,e,n,o,r)=>{const s=t.formatter.get(n),a=t.dom;if(s&&Q(e))for(let i=0;i<s.length;i++){const l=s[i];if(Ii(t.dom,e,l)&&M0(a,e,l,"attributes",r,o)&&M0(a,e,l,"styles",r,o)){const d=l.classes;if(d)for(let c=0;c<d.length;c++)if(!t.dom.hasClass(e,co(d[c],o)))return;return l}}},du=(t,e,n,o,r)=>{if(o)return lu(t,o,e,n,r);if(o=t.selection.getNode(),lu(t,o,e,n,r))return!0;const s=t.selection.getStart();return!(s===o||!lu(t,s,e,n,r))},Mr=ae,I0=t=>(e=>{const n=[];let o=e;for(;o;){if(j(o)&&o.data!==Mr||o.childNodes.length>1)return[];Q(o)&&n.push(o),o=o.firstChild}return n})(t).length>0,F0=t=>{if(t){const e=new qt(t,t);for(let n=e.current();n;n=e.next())if(j(n))return n}return null},cu=t=>{const e=Qt("span");return Qn(e,{id:Jd,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&Vt(e,hr(Mr)),e},uu=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(I0(e))Jo(t,!1,N(e),n);else{const s=r.getRng(),a=o.getParent(e,o.isBlock),i=s.startContainer,l=s.startOffset,d=s.endContainer,c=s.endOffset,u=(g=>{const p=F0(g);return p&&p.data.charAt(0)===Mr&&p.deleteData(0,1),p})(e);o.remove(e,!0),i===u&&l>0&&s.setStart(u,l-1),d===u&&c>0&&s.setEnd(u,c-1),a&&o.isEmpty(a)&&Lo(N(a)),r.setRng(s)}},mu=(t,e,n=!0)=>{const o=t.dom,r=t.selection;if(e)uu(t,e,n);else if(!(e=Ko(t.getBody(),r.getStart())))for(;e=o.get(Jd);)uu(t,e,!1)},U0=(t,e)=>(t.appendChild(e),e),z0=(t,e)=>{var n;const o=ts(t,(s,a)=>U0(s,a.cloneNode(!1)),e),r=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return U0(o,r.createTextNode(Mr))},j0=t=>{const e=cu(!1),n=z0(t,e.dom);return{caretContainer:e,caretPosition:L(n,0)}},H0=(t,e)=>{const{caretContainer:n,caretPosition:o}=j0(e);return Me(N(t),n),Ot(N(t)),o},$0=(t,e)=>{const n=t.schema.getTextInlineElements();return pt(n,At(e))&&!Xe(e.dom)&&!Do(e.dom)},V0=t=>Xe(t.dom)&&I0(t.dom),Js={},q0=nn(["pre"]);Js.pre||(Js.pre=[]),Js.pre.push(t=>{if(!t.selection.getRng().collapsed){const e=t.selection.getSelectedBlocks(),n=ct(ct(e,q0),(o=e,r=>{const s=r.previousSibling;return q0(s)&&St(o,s)}));H(n,o=>{((r,s)=>{const a=N(s),i=In(a).dom;Ot(a),To(N(r),[Qt("br",i),Qt("br",i),...ne(a)])})(o.previousSibling,o)})}var o});const W0=["fontWeight","fontStyle","color","fontSize","fontFamily"],K0=(t,e)=>{const n=t.get(e);return Ht(n)?$t(n,o=>{return Wt(o)&&"span"===o.inline&&le((r=o).styles)&&It(Oe(r.styles),s=>St(W0,s));var r}):C.none()},G0=(t,e)=>ze(e,L.fromRangeStart(t)).isNone(),Y0=(t,e)=>!1===ke(e,L.fromRangeEnd(t)).exists(n=>!Lt(n.getNode())||ke(e,n).isSome()),X0=t=>e=>lk(e)&&t.isEditable(e),Q0=t=>ct(t.getSelectedBlocks(),X0(t.dom)),fu=$.each,gu=t=>Q(t)&&!je(t)&&!Xe(t)&&!Do(t),J0=(t,e)=>{for(let n=t;n;n=n[e]){if(j(n)&&gn(n.data))return t;if(Q(n)&&!je(n))return n}return t},Z0=(t,e,n)=>{const o=Jc(t),r=Q(e)&&Go(e),s=Q(n)&&Go(n);if(r&&s){const a=J0(e,"previousSibling"),i=J0(n,"nextSibling");if(o.compare(a,i)){for(let l=a.nextSibling;l&&l!==i;){const d=l;l=l.nextSibling,a.appendChild(d)}return t.dom.remove(i),$.each($.grep(i.childNodes),l=>{a.appendChild(l)}),a}}return n},tv=(t,e,n,o)=>{var r;if(o&&!1!==e.merge_siblings){const s=null!==(r=Z0(t,Ph(o),o))&&void 0!==r?r:o;Z0(t,s,Ph(s,!0))}},pu=(t,e,n)=>{fu(t.childNodes,o=>{gu(o)&&(e(o)&&n(o),o.hasChildNodes()&&pu(o,e,n))})},ev=(t,e)=>n=>!(!n||!Ci(t,n,e)),nv=(t,e,n)=>o=>{var r,s;t.setStyle(o,e,n),""===o.getAttribute("style")&&o.removeAttribute("style"),r=t,"SPAN"===(s=o).nodeName&&0===r.getAttribs(s).length&&r.remove(s,!0)},er=yn([{keep:[]},{rename:["name"]},{removed:[]}]),I_=/^(src|href|style)$/,hu=$.each,Fi=cc,ov=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),rv=(t,e,n)=>{let o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if(Q(o)){const s=o.childNodes.length-1;!n&&r&&r--,o=o.childNodes[r>s?s:r]}return j(o)&&n&&r>=o.data.length&&(o=new qt(o,t.getBody()).next()||o),j(o)&&!n&&0===r&&(o=new qt(o,t.getBody()).prev()||o),o},sv=(t,e)=>{const n=e?"firstChild":"lastChild",o=t[n];return/^(TR|TH|TD)$/.test(t.nodeName)&&o?"TR"===t.nodeName&&o[n]||o:t},bu=(t,e,n,o)=>{var r;const s=t.create(n,o);return null===(r=e.parentNode)||void 0===r||r.insertBefore(s,e),s.appendChild(e),s},av=(t,e,n,o,r)=>{const s=N(e),a=N(t.create(o,r)),i=n?tg(s):Zf(s);return To(a,i),n?(Me(s,a),cg(a,s)):(Zn(s,a),Vt(a,s)),a.dom},iv=(t,e,n)=>{const o=e.parentNode;let r;const s=t.dom,a=Te(t);var i;En(n)&&o===s.getRoot()&&(n.list_block&&Fi(e,n.list_block)||H(Ae(e.childNodes),i=>{Br(t,a,i.nodeName.toLowerCase())?r?r.appendChild(i):(r=bu(s,i,a),s.setAttribs(r,Bs(t))):r=null})),He(i=n)&&Wt(i)&&gr(Rt(i,"mixed"),!0)&&!Fi(n.inline,e)||s.remove(e,!0)},lv=(t,e,n)=>Ze(t)?{name:e,value:null}:{name:t,value:co(e,n)},dv=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},cv=(t,e,n,o,r)=>{let s=!1;hu(n.styles,(a,i)=>{const{name:l,value:d}=lv(i,a,o),c=uc(d,l);(n.remove_similar||Ge(d)||!Q(r)||Fi(Ci(t,r,l),c))&&t.setStyle(e,l,""),s=!0}),s&&dv(t,e)},uv=(t,e,n,o,r)=>{const s=t.dom,a=Jc(t),i=t.schema;if(Wt(e)&&Qa(i,e.inline)&&Io(i,o)&&o.parentElement===t.getBody())return iv(t,o,e),er.removed();if(!e.ceFalseOverride&&o&&"false"===s.getContentEditableParent(o)||o&&!Ii(s,o,e)&&(!e.links||"A"!==o.nodeName))return er.keep();const l=o,d=e.preserve_attributes;if(Wt(e)&&"all"===e.remove&&Ht(d)){const c=ct(s.getAttribs(l),u=>St(d,u.name.toLowerCase()));if(s.removeAllAttribs(l),H(c,u=>s.setAttrib(l,u.name,u.value)),c.length>0)return er.rename("span")}if("all"!==e.remove){cv(s,l,e,n,r),hu(e.attributes,(u,g)=>{const{name:p,value:f}=lv(g,u,n);if(e.remove_similar||Ge(f)||!Q(r)||Fi(s.getAttrib(r,p),f)){if("class"===p){const h=s.getAttrib(l,p);if(h){let m="";if(H(h.split(/\s+/),b=>{/mce\-\w+/.test(b)&&(m+=(m?" ":"")+b)}),m)return void s.setAttrib(l,p,m)}}if(I_.test(p)&&l.removeAttribute("data-mce-"+p),"style"===p&&nn(["li"])(l)&&"none"===s.getStyle(l,"list-style-type"))return l.removeAttribute(p),void s.setStyle(l,"list-style-type","none");"class"===p&&l.removeAttribute("className"),l.removeAttribute(p)}}),hu(e.classes,u=>{u=co(u,n),Q(r)&&!s.hasClass(r,u)||s.removeClass(l,u)});const c=s.getAttribs(l);for(let u=0;u<c.length;u++)if(!a.isAttributeInternal(c[u].nodeName))return er.keep()}return"none"!==e.remove?(iv(t,l,e),er.removed()):er.keep()},Zs=(t,e,n,o,r)=>uv(t,e,n,o,r).fold(Bt,s=>(t.dom.rename(o,s),!0),jt),F_=(t,e,n,o)=>uv(t,e,n,o,o).fold(G(o),r=>(t.dom.createFragment().appendChild(o),t.dom.rename(o,r)),G(null)),mv=(t,e,n,o,r)=>{const s=t.formatter.get(e),a=s[0],i=t.dom,l=t.selection,d=f=>{const h=((m,b,v,y,w)=>{let k;return b.parentNode&&H(wi(m.dom,b.parentNode).reverse(),x=>{if(!k&&Q(x)&&"_start"!==x.id&&"_end"!==x.id){const S=Sn(m,x,v,y,w);S&&!1!==S.split&&(k=x)}}),k})(t,f,e,n,r);return((m,b,v,y,w,k,x,S)=>{var E,_;let D,T;const P=m.dom;if(v){const O=v.parentNode;for(let F=y.parentNode;F&&F!==O;F=F.parentNode){let q=P.clone(F,!1);for(let W=0;W<b.length&&(q=F_(m,b[W],S,q),null!==q);W++);q&&(D&&q.appendChild(D),T||(T=q),D=q)}x.mixed&&P.isBlock(v)||(y=null!==(E=P.split(v,y))&&void 0!==E?E:y),D&&T&&(null===(_=w.parentNode)||void 0===_||_.insertBefore(D,w),T.appendChild(w),Wt(x)&&tv(m,x,0,D))}return y})(t,s,h,f,f,0,a,n)},c=f=>It(s,h=>Zs(t,h,n,f,f)),u=f=>{const h=Ae(f.childNodes),m=c(f)||It(s,v=>Ii(i,f,v)),b=f.parentNode;if(!m&&Y(b)&&fc(a)&&c(b),a.deep&&h.length)for(let v=0;v<h.length;v++)u(h[v]);H(["underline","line-through","overline"],v=>{Q(f)&&t.dom.getStyle(f,"text-decoration")===v&&f.parentNode&&Mh(i,f.parentNode)===v&&Zs(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:v}},void 0,f)})},g=f=>{const h=i.get(f?"_start":"_end");if(h){let m=h[f?"firstChild":"lastChild"];return je(b=m)&&Q(b)&&("_start"===b.id||"_end"===b.id)&&(m=m[f?"firstChild":"lastChild"]),j(m)&&0===m.data.length&&(m=f?h.previousSibling||h.nextSibling:h.nextSibling||h.previousSibling),i.remove(h,!0),m}var b;return null},p=f=>{let h,m,b=Yo(i,f,s,f.collapsed);if(a.split){if(b=Ri(b),h=rv(t,b,!0),m=rv(t,b),h!==m){if(h=sv(h,!0),m=sv(m,!1),ov(i,h,m)){const y=C.from(h.firstChild).getOr(h);return d(av(i,y,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void g(!0)}if(ov(i,m,h)){const y=C.from(m.lastChild).getOr(m);return d(av(i,y,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void g(!1)}h=bu(i,h,"span",{id:"_start","data-mce-type":"bookmark"}),m=bu(i,m,"span",{id:"_end","data-mce-type":"bookmark"});const v=i.createRng();v.setStartAfter(h),v.setEndBefore(m),js(i,v,y=>{H(y,w=>{je(w)||je(w.parentNode)||d(w)})}),d(h),d(m),h=g(!0),m=g()}else h=m=d(h);b.startContainer=h.parentNode?h.parentNode:h,b.startOffset=i.nodeIndex(h),b.endContainer=m.parentNode?m.parentNode:m,b.endOffset=i.nodeIndex(m)+1}js(i,b,v=>{H(v,u)})};if(o){if(yi(o)){const f=i.createRng();f.setStartBefore(o),f.setEndAfter(o),p(f)}else p(o);Jh(t,e,o,n)}else l.isCollapsed()&&Wt(a)&&!Tr(t).length?((t,e,n,o)=>{const r=t.dom,s=t.selection;let a=!1;const i=t.formatter.get(e);if(!i)return;const l=s.getRng(),d=l.startContainer,c=l.startOffset;let u=d;j(d)&&(c!==d.data.length&&(a=!0),u=u.parentNode);const g=[];let p;for(;u;){if(Sn(t,u,e,n,o)){p=u;break}u.nextSibling&&(a=!0),g.push(u),u=u.parentNode}if(p)if(a){const f=s.getBookmark();l.collapse(!0);let h=Yo(r,l,i,!0);h=Ri(h),t.formatter.remove(e,n,h,o),s.moveToBookmark(f)}else{const f=Ko(t.getBody(),p),h=cu(!1).dom;((v,y,w)=>{var k,x;const S=v.dom,E=S.getParent(w,Z(lc,v.schema));E&&S.isEmpty(E)?null===(k=w.parentNode)||void 0===k||k.replaceChild(y,w):((_=>{const D=se(_,"br"),T=ct((P=>{const O=[];let F=P.dom;for(;F;)O.push(N(F)),F=F.lastChild;return O})(_).slice(-1),Po);D.length===T.length&&H(T,Ot)})(N(w)),S.isEmpty(w)?null===(x=w.parentNode)||void 0===x||x.replaceChild(y,w):S.insertAfter(y,w))})(t,h,f??p);const m=((v,y,w,k,x,S)=>{const E=v.formatter,_=v.dom,D=ct(Oe(E.get()),P=>P!==k&&!re(P,"removeformat")),T=(P=v,O=w,Re(D,(q,W)=>{const ot=mc(P,W,kt=>{const et=ut=>Ct(ut)||ut.length>1&&"%"===ut.charAt(0);return It(["styles","attributes"],ut=>Rt(kt,ut).exists(mt=>{const R=Ht(mt)?mt:Vl(mt);return It(R,et)}))});return P.formatter.matchNode(O,W,{},ot)?q.concat([W]):q},[]));var P,O;if(ct(T,P=>!((O,F,q)=>{const W=["inline","block","selector","attributes","styles","classes"],ot=st=>os(st,(ht,kt)=>It(W,et=>et===kt));return mc(O,F,st=>{const ht=ot(st);return mc(O,q,kt=>{const et=ot(kt);return((ut,mt,R=Ml)=>of(R).eq(ut,mt))(ht,et)})})})(v,P,k)).length>0){const P=w.cloneNode(!1);return _.add(y,P),E.remove(k,x,P,S),_.remove(P),C.some(P)}return C.none()})(t,h,p,e,n,o),b=z0(g.concat(m.toArray()),h);f&&uu(t,f,!1),s.setCursorLocation(b,1),r.isEmpty(p)&&r.remove(p)}})(t,e,n,r):(Dh(t,()=>ac(t,p),f=>Wt(a)&&du(t,e,n,f)),t.nodeChanged()),f=t,m=n,"removeformat"===(h=e)?H(Q0(f.selection),b=>{H(W0,v=>f.dom.setStyle(b,v,"")),dv(f.dom,b)}):K0(f.formatter,h).each(b=>{H(Q0(f.selection),v=>cv(f.dom,v,b,m,null))}),Jh(t,e,o,n);var f,h,m},fv=$.each,Ui=$.each,gv=(t,e,n,o)=>{if(Ui(n.styles,(r,s)=>{t.setStyle(e,s,co(r,o))}),n.styles){const r=t.getAttrib(e,"style");r&&t.setAttrib(e,"data-mce-style",r)}},pv=(t,e,n,o)=>{const r=t.formatter.get(e),s=r[0],a=!o&&t.selection.isCollapsed(),i=t.dom,l=t.selection,d=(f,h=s)=>{Ct(h.onformat)&&h.onformat(f,h,n,o),gv(i,f,h,n),Ui(h.attributes,(m,b)=>{i.setAttrib(f,b,co(m,n))}),Ui(h.classes,m=>{const b=co(m,n);i.hasClass(f,b)||i.addClass(f,b)})},c=(f,h)=>{let m=!1;return Ui(f,b=>!(!He(b)||("false"!==i.getContentEditable(h)||b.ceFalseOverride)&&(!Y(b.collapsed)||b.collapsed===a)&&i.is(h,b.selector)&&!Xe(h)&&(d(h,b),m=!0,1))),m},g=(f,h,m)=>{const b=[];let v=!0;const y=s.inline||s.block,w=(f=>{if(at(f)){const h=i.create(f);return d(h),h}return null})(y);js(f,h,k=>{let x;const S=E=>{let _=!1,D=v,T=!1;const P=E.parentNode,O=P.nodeName.toLowerCase(),F=f.getContentEditable(E);Y(F)&&(D=v,v="true"===F,_=!0,T=Lh(t,E));const q=v&&!_;if(Lt(E)&&!((W,ot,st,ht)=>{if(RE(W)&&Wt(ot)&&st.parentNode){const kt=Gg(W.schema),et=((t,e)=>((n,o)=>{const r=n.dom;return r.parentNode?(s=N(r.parentNode),$t(s.dom.childNodes,i=>(s=>!wt(n,s)&&o(s))(N(i))).map(N)):C.none();var s})(t,e).isSome())(N(st),ut=>Xe(ut.dom));return mr(kt,ht)&&Ft(N(st.parentNode),!1)&&!et}return!1})(t,s,E,O))return x=null,void(En(s)&&f.remove(E));if(W=E,En(ot=s)&&!0===ot.wrapper&&Sn(t,W,e,n))x=null;else{if(((W,ot,st)=>{const ht=En(kt=s)&&!0!==kt.wrapper&&lc(t.schema,W)&&Br(t,ot,y);var kt;return st&&ht})(E,O,q)){const W=f.rename(E,y);return d(W),b.push(W),void(x=null)}if(He(s)){let W=c(r,E);if(!W&&Y(P)&&fc(s)&&(W=c(r,P)),!Wt(s)||W)return void(x=null)}Y(w)&&((W,ot,st,ht)=>{const kt=W.nodeName.toLowerCase(),et=Br(t,y,kt)&&Br(t,ot,y),ut=!m&&j(W)&&Ka(W.data),mt=Xe(W),R=!Wt(s)||!f.isBlock(W);return(st||ht)&&et&&!ut&&!mt&&R})(E,O,q,T)?(x||(x=f.clone(w,!1),P.insertBefore(x,E),b.push(x)),T&&_&&(v=D),x.appendChild(E)):(x=null,H(Ae(E.childNodes),S),_&&(v=D),x=null)}var W,ot};H(k,S)}),!0===s.links&&H(b,k=>{const x=S=>{"A"===S.nodeName&&d(S,s),H(Ae(S.childNodes),x)};x(k)}),H(b,k=>{const x=(S=>{let E=0;return H(S.childNodes,_=>{var D;Y(D=_)&&j(D)&&0===D.length||je(_)||E++}),E})(k);var S;!(b.length>1)&&f.isBlock(k)||0!==x?(Wt(s)||En(s)&&s.wrapper)&&(s.exact||1!==x||(k=$t((S=k).childNodes,ic).filter(_=>"false"!==f.getContentEditable(_)&&Ii(f,_,s)).map(_=>{const D=f.clone(_,!1);return d(D),f.replace(D,S,!0),f.remove(_,!0),D}).getOr(S)),((S,E,_,D)=>{fv(E,T=>{var P,O,F;Wt(T)&&fv(S.dom.select(T.inline,D),P=>{gu(P)&&Zs(S,T,_,P,T.exact?P:null)}),P=S.dom,F=D,(O=T).clear_child_styles&&fu(P.select(O.links?"*:not(a)":"*",F),W=>{gu(W)&&Go(W)&&fu(O.styles,(ot,st)=>{P.setStyle(W,st,"")})})})})(t,r,n,k),((S,E,_,D,T)=>{const P=T.parentNode;Sn(S,P,_,D)&&Zs(S,E,D,T)||E.merge_with_parents&&P&&S.dom.getParent(P,O=>!!Sn(S,O,_,D)&&(Zs(S,E,D,T),!0))})(t,s,e,n,k),((S,E,_,D)=>{if(E.styles&&E.styles.backgroundColor){const T=ev(S,"fontSize");pu(D,P=>T(P)&&Go(P),nv(S,"backgroundColor",co(E.styles.backgroundColor,_)))}})(f,s,n,k),((S,E,_,D)=>{const T=P=>{if(Q(P)&&Q(P.parentNode)&&Go(P)){const O=Mh(S,P.parentNode);S.getStyle(P,"color")&&O?S.setStyle(P,"text-decoration",O):S.getStyle(P,"text-decoration")===O&&S.setStyle(P,"text-decoration",null)}};E.styles&&(E.styles.color||E.styles.textDecoration)&&($.walk(D,T,"childNodes"),T(D))})(f,s,0,k),((S,E,_,D)=>{if(Wt(E)&&("sub"===E.inline||"sup"===E.inline)){const T=ev(S,"fontSize");pu(D,O=>T(O)&&Go(O),nv(S,"fontSize",""));const P=ct(S.select("sup"===E.inline?"sub":"sup",D),Go);S.remove(P,!0)}})(f,s,0,k),tv(t,s,0,k)):f.remove(k,!0)})},p=yi(o)?o:l.getNode();if("false"===i.getContentEditable(p)&&!Lh(t,p))return c(r,o=p),void Qh(t,e,o,n);if(s){if(o)if(yi(o)){if(!c(r,o)){const f=i.createRng();f.setStartBefore(o),f.setEndAfter(o),g(i,Yo(i,f,r),!0)}}else g(i,o,!0);else a&&Wt(s)&&!Tr(t).length?((f,h,m)=>{let b;const v=f.selection,y=f.formatter.get(h);if(!y)return;const w=v.getRng();let k=w.startOffset;const x=w.startContainer.nodeValue;b=Ko(f.getBody(),v.getStart());const S=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(x&&k>0&&k<x.length&&S.test(x.charAt(k))&&S.test(x.charAt(k-1))){const D=v.getBookmark();w.collapse(!0);let T=Yo(f.dom,w,y);T=Ri(T),f.formatter.apply(h,m,T),v.moveToBookmark(D)}else{let D=b?F0(b):null;b&&D?.data===Mr||(E=f.getDoc(),_=cu(!0).dom,b=E.importNode(_,!0),D=b.firstChild,w.insertNode(b),k=1),f.formatter.apply(h,m,b),v.setCursorLocation(D,k)}var E,_})(t,e,n):(l.setRng(nu(l.getRng())),Dh(t,()=>{ac(t,(f,h)=>{const m=h?f:Yo(i,f,r);g(i,m,!1)})},jt),t.nodeChanged()),K0(t.formatter,e).each(f=>{var h;H(ct((m=>{const b=m.getSelectedBlocks(),v=m.getRng();if(m.isCollapsed())return[];if(1===b.length)return G0(v,b[0])&&Y0(v,b[0])?b:[];{const y=we(b).filter(x=>G0(v,x)).toArray(),w=Eo(b).filter(x=>Y0(v,x)).toArray(),k=b.slice(1,-1);return y.concat(k).concat(w)}})(h=t.selection),X0(h.dom)),h=>gv(i,h,f,n))});h=t,pt(Js,f=e)&&H(Js[f],m=>{m(h)})}var f,h;Qh(t,e,o,n)},hv=t=>pt(t,"vars"),bv=t=>t.selection.getStart(),vv=(t,e,n,o,r)=>mf(e,s=>{const a=t.formatter.matchNode(s,n,r??{},o);return!me(a)},s=>!!L0(t,s,n)||!o&&Y(t.formatter.matchNode(s,n,r,!0))),yv=(t,e)=>{const n=e??bv(t);return ct(wi(t.dom,n),o=>Q(o)&&!Do(o))},Cv=(t,e,n)=>{const o=yv(t,e);_t(n,(r,s)=>{const a=i=>{const l=vv(t,o,s,i.similar,hv(i)?i.vars:void 0),d=l.isSome();if(i.state.get()!==d){i.state.set(d);const c=l.getOr(e);hv(i)?i.callback(d,{node:c,format:s,parents:o}):H(i.callbacks,u=>u(d,{node:c,format:s,parents:o}))}};H([r.withSimilar,r.withoutSimilar],a),H(r.withVars,a)})},wv=$.explode,xv=()=>{const t={};return{addFilter:(e,n)=>{H(wv(e),o=>{pt(t,o)||(t[o]={name:o,callbacks:[]}),t[o].callbacks.push(n)})},getFilters:()=>Vl(t),removeFilter:(e,n)=>{H(wv(e),o=>{if(pt(t,o))if(Y(n)){const r=t[o],s=ct(r.callbacks,a=>a!==n);s.length>0?r.callbacks=s:delete t[o]}else delete t[o]})}}},vu=t=>{const[e,...n]=t.split(","),o=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const s=";base64"===r[2],a=s?(i=>{const l=/([a-z0-9+\/=\s]+)/i.exec(i);return l?l[1]:""})(o):decodeURIComponent(o);return C.some({type:r[1],data:a,base64Encoded:s})}return C.none()},kv=(t,e,n=!0)=>{let o=e;if(n)try{o=atob(e)}catch{return C.none()}const r=new Uint8Array(o.length);for(let s=0;s<r.length;s++)r[s]=o.charCodeAt(s);return C.some(new Blob([r],{type:t}))},Ev=t=>new Promise((e,n)=>{const o=new FileReader;o.onloadend=()=>{e(o.result)},o.onerror=()=>{var r;n(null===(r=o.error)||void 0===r?void 0:r.message)},o.readAsDataURL(t)});let z_=0;const Sv=(t,e,n)=>vu(t).bind(({data:o,type:r,base64Encoded:s})=>{if(e&&!s)return C.none();{const a=s?o:btoa(o);return n(a,r)}}),_v=(t,e,n)=>{const o=t.create("blobid"+z_++,e,n);return t.add(o),o},Nv=(t,e,n=!1)=>Sv(e,n,(o,r)=>C.from(t.getByData(o,r)).orThunk(()=>kv(r,o).map(s=>_v(t,s,o))));function nr(t){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function yu(t,e){return(yu=Object.setPrototypeOf||function(n,o){return n.__proto__=o,n})(t,e)}function Cu(t,e,n){return(Cu=function j_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(o,r,s){var a=[null];a.push.apply(a,r);var i=new(Function.bind.apply(o,a));return s&&yu(i,s.prototype),i}).apply(null,arguments)}function an(t){return function(e){if(Array.isArray(e))return wu(e)}(t)||function(e){if(typeof Symbol<"u"&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(e,n){if(e){if("string"==typeof e)return wu(e,n);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?wu(e,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wu(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var H_=Object.hasOwnProperty,Rv=Object.setPrototypeOf,$_=Object.isFrozen,V_=Object.getPrototypeOf,q_=Object.getOwnPropertyDescriptor,Ee=Object.freeze,_n=Object.seal,W_=Object.create,Av=typeof Reflect<"u"&&Reflect,zi=Av.apply,xu=Av.construct;zi||(zi=function(t,e,n){return t.apply(e,n)}),Ee||(Ee=function(t){return t}),_n||(_n=function(t){return t}),xu||(xu=function(t,e){return Cu(t,an(e))});var Ov,K_=ln(Array.prototype.forEach),G_=ln(Array.prototype.pop),ta=ln(Array.prototype.push),ji=ln(String.prototype.toLowerCase),Y_=ln(String.prototype.match),ho=ln(String.prototype.replace),X_=ln(String.prototype.indexOf),Q_=ln(String.prototype.trim),Se=ln(RegExp.prototype.test),ku=(Ov=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return xu(Ov,e)});function ln(t){return function(e){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return zi(t,e,o)}}function xt(t,e){Rv&&Rv(t,null);for(var n=e.length;n--;){var o=e[n];if("string"==typeof o){var r=ji(o);r!==o&&($_(e)||(e[n]=r),o=r)}t[o]=!0}return t}function or(t){var e,n=W_(null);for(e in t)zi(H_,t,[e])&&(n[e]=t[e]);return n}function Hi(t,e){for(;null!==t;){var n=q_(t,e);if(n){if(n.get)return ln(n.get);if("function"==typeof n.value)return ln(n.value)}t=V_(t)}return function(o){return console.warn("fallback value for",o),null}}var Tv=Ee(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Eu=Ee(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Su=Ee(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),J_=Ee(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),_u=Ee(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Z_=Ee(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Bv=Ee(["#text"]),Dv=Ee(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Nu=Ee(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Pv=Ee(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),$i=Ee(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),tN=_n(/\{\{[\w\W]*|[\w\W]*\}\}/gm),eN=_n(/<%[\w\W]*|[\w\W]*%>/gm),nN=_n(/^data-[\-\w.\u00B7-\uFFFF]/),oN=_n(/^aria-[\-\w]+$/),rN=_n(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),sN=_n(/^(?:\w+script|data):/i),aN=_n(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),iN=_n(/^html$/i),lN=function(){return typeof window>"u"?null:window},dN=function(t,e){if("object"!==nr(t)||"function"!=typeof t.createPolicy)return null;var n=null,o="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(o)&&(n=e.currentScript.getAttribute(o));var r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:function(s){return s}})}catch{return console.warn("TrustedTypes policy "+r+" could not be created."),null}},cN=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lN(),n=function(B){return t(B)};if(n.version="2.3.8",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;var o=e.document,r=e.document,s=e.DocumentFragment,a=e.HTMLTemplateElement,i=e.Node,l=e.Element,d=e.NodeFilter,c=e.NamedNodeMap,u=void 0===c?e.NamedNodeMap||e.MozNamedAttrMap:c,g=e.HTMLFormElement,p=e.DOMParser,f=e.trustedTypes,h=l.prototype,m=Hi(h,"cloneNode"),b=Hi(h,"nextSibling"),v=Hi(h,"childNodes"),y=Hi(h,"parentNode");if("function"==typeof a){var w=r.createElement("template");w.content&&w.content.ownerDocument&&(r=w.content.ownerDocument)}var k=dN(f,o),x=k?k.createHTML(""):"",E=r.implementation,_=r.createNodeIterator,D=r.createDocumentFragment,T=r.getElementsByTagName,P=o.importNode,O={};try{O=or(r).documentMode?r.documentMode:{}}catch{}var F={};n.isSupported="function"==typeof y&&E&&void 0!==E.createHTMLDocument&&9!==O;var q,W,ot=tN,st=eN,ht=nN,kt=oN,et=sN,ut=aN,mt=rN,R=null,A=xt({},[].concat(an(Tv),an(Eu),an(Su),an(_u),an(Bv))),M=null,U=xt({},[].concat(an(Dv),an(Nu),an(Pv),an($i))),I=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),z=null,V=null,X=!0,nt=!0,lt=!1,dt=!1,K=!1,ft=!1,Ut=!1,Tt=!1,ye=!1,Ce=!1,un=!0,Je=!0,Zt=!1,_e={},Pt=null,Tn=xt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),yo=null,Dl=xt({},["audio","video","img","source","image","track"]),Bn=null,Ca=xt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Be="http://www.w3.org/1998/Math/MathML",Co="http://www.w3.org/2000/svg",De="http://www.w3.org/1999/xhtml",dr=De,vx=!1,zO=["application/xhtml+xml","text/html"],Xr=null,HO=r.createElement("form"),yx=function(B){return B instanceof RegExp||B instanceof Function},Zm=function(B){Xr&&Xr===B||(B&&"object"===nr(B)||(B={}),B=or(B),R="ALLOWED_TAGS"in B?xt({},B.ALLOWED_TAGS):A,M="ALLOWED_ATTR"in B?xt({},B.ALLOWED_ATTR):U,Bn="ADD_URI_SAFE_ATTR"in B?xt(or(Ca),B.ADD_URI_SAFE_ATTR):Ca,yo="ADD_DATA_URI_TAGS"in B?xt(or(Dl),B.ADD_DATA_URI_TAGS):Dl,Pt="FORBID_CONTENTS"in B?xt({},B.FORBID_CONTENTS):Tn,z="FORBID_TAGS"in B?xt({},B.FORBID_TAGS):{},V="FORBID_ATTR"in B?xt({},B.FORBID_ATTR):{},_e="USE_PROFILES"in B&&B.USE_PROFILES,X=!1!==B.ALLOW_ARIA_ATTR,nt=!1!==B.ALLOW_DATA_ATTR,lt=B.ALLOW_UNKNOWN_PROTOCOLS||!1,dt=B.SAFE_FOR_TEMPLATES||!1,K=B.WHOLE_DOCUMENT||!1,Tt=B.RETURN_DOM||!1,ye=B.RETURN_DOM_FRAGMENT||!1,Ce=B.RETURN_TRUSTED_TYPE||!1,Ut=B.FORCE_BODY||!1,un=!1!==B.SANITIZE_DOM,Je=!1!==B.KEEP_CONTENT,Zt=B.IN_PLACE||!1,mt=B.ALLOWED_URI_REGEXP||mt,dr=B.NAMESPACE||De,B.CUSTOM_ELEMENT_HANDLING&&yx(B.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(I.tagNameCheck=B.CUSTOM_ELEMENT_HANDLING.tagNameCheck),B.CUSTOM_ELEMENT_HANDLING&&yx(B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(I.attributeNameCheck=B.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),B.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(I.allowCustomizedBuiltInElements=B.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),q=q=-1===zO.indexOf(B.PARSER_MEDIA_TYPE)?"text/html":B.PARSER_MEDIA_TYPE,W="application/xhtml+xml"===q?function(it){return it}:ji,dt&&(nt=!1),ye&&(Tt=!0),_e&&(R=xt({},an(Bv)),M=[],!0===_e.html&&(xt(R,Tv),xt(M,Dv)),!0===_e.svg&&(xt(R,Eu),xt(M,Nu),xt(M,$i)),!0===_e.svgFilters&&(xt(R,Su),xt(M,Nu),xt(M,$i)),!0===_e.mathMl&&(xt(R,_u),xt(M,Pv),xt(M,$i))),B.ADD_TAGS&&(R===A&&(R=or(R)),xt(R,B.ADD_TAGS)),B.ADD_ATTR&&(M===U&&(M=or(M)),xt(M,B.ADD_ATTR)),B.ADD_URI_SAFE_ATTR&&xt(Bn,B.ADD_URI_SAFE_ATTR),B.FORBID_CONTENTS&&(Pt===Tn&&(Pt=or(Pt)),xt(Pt,B.FORBID_CONTENTS)),Je&&(R["#text"]=!0),K&&xt(R,["html","head","body"]),R.table&&(xt(R,["tbody"]),delete z.tbody),Ee&&Ee(B),Xr=B)},Cx=xt({},["mi","mo","mn","ms","mtext"]),wx=xt({},["foreignobject","desc","title","annotation-xml"]),$O=xt({},["title","style","font","a","script"]),Pl=xt({},Eu);xt(Pl,Su),xt(Pl,J_);var tf=xt({},_u);xt(tf,Z_);var Kn=function(B){ta(n.removed,{element:B});try{B.parentNode.removeChild(B)}catch{try{B.outerHTML=x}catch{B.remove()}}},Ll=function(B,it){try{ta(n.removed,{attribute:it.getAttributeNode(B),from:it})}catch{ta(n.removed,{attribute:null,from:it})}if(it.removeAttribute(B),"is"===B&&!M[B])if(Tt||ye)try{Kn(it)}catch{}else try{it.setAttribute(B,"")}catch{}},xx=function(B){var it,rt;if(Ut)B="<remove></remove>"+B;else{var Dt=Y_(B,/^[\r\n\t ]+/);rt=Dt&&Dt[0]}"application/xhtml+xml"===q&&(B='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+B+"</body></html>");var Yt=k?k.createHTML(B):B;if(dr===De)try{it=(new p).parseFromString(Yt,q)}catch{}if(!it||!it.documentElement){it=E.createDocument(dr,"template",null);try{it.documentElement.innerHTML=vx?"":Yt}catch{}}var Ne=it.body||it.documentElement;return B&&rt&&Ne.insertBefore(r.createTextNode(rt),Ne.childNodes[0]||null),dr===De?T.call(it,K?"html":"body")[0]:K?it.documentElement:Ne},kx=function(B){return _.call(B.ownerDocument||B,B,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},wa=function(B){return"object"===nr(i)?B instanceof i:B&&"object"===nr(B)&&"number"==typeof B.nodeType&&"string"==typeof B.nodeName},Gn=function(B,it,rt){F[B]&&K_(F[B],function(Dt){Dt.call(n,it,rt,Xr)})},Ex=function(B){var it;if(Gn("beforeSanitizeElements",B,null),function(B){return B instanceof g&&("string"!=typeof B.nodeName||"string"!=typeof B.textContent||"function"!=typeof B.removeChild||!(B.attributes instanceof u)||"function"!=typeof B.removeAttribute||"function"!=typeof B.setAttribute||"string"!=typeof B.namespaceURI||"function"!=typeof B.insertBefore)}(B)||Se(/[\u0080-\uFFFF]/,B.nodeName))return Kn(B),!0;var rt=W(B.nodeName);if(Gn("uponSanitizeElement",B,{tagName:rt,allowedTags:R}),B.hasChildNodes()&&!wa(B.firstElementChild)&&(!wa(B.content)||!wa(B.content.firstElementChild))&&Se(/<[/\w]/g,B.innerHTML)&&Se(/<[/\w]/g,B.textContent)||"select"===rt&&Se(/<template/i,B.innerHTML))return Kn(B),!0;if(!R[rt]||z[rt]){if(!z[rt]&&_x(rt)&&(I.tagNameCheck instanceof RegExp&&Se(I.tagNameCheck,rt)||I.tagNameCheck instanceof Function&&I.tagNameCheck(rt)))return!1;if(Je&&!Pt[rt]){var Dt=y(B)||B.parentNode,Yt=v(B)||B.childNodes;if(Yt&&Dt)for(var Ne=Yt.length-1;Ne>=0;--Ne)Dt.insertBefore(m(Yt[Ne],!0),b(B))}return Kn(B),!0}return B instanceof l&&!function(B){var it=y(B);it&&it.tagName||(it={namespaceURI:De,tagName:"template"});var rt=ji(B.tagName),Dt=ji(it.tagName);return B.namespaceURI===Co?it.namespaceURI===De?"svg"===rt:it.namespaceURI===Be?"svg"===rt&&("annotation-xml"===Dt||Cx[Dt]):Boolean(Pl[rt]):B.namespaceURI===Be?it.namespaceURI===De?"math"===rt:it.namespaceURI===Co?"math"===rt&&wx[Dt]:Boolean(tf[rt]):B.namespaceURI===De&&!(it.namespaceURI===Co&&!wx[Dt])&&!(it.namespaceURI===Be&&!Cx[Dt])&&!tf[rt]&&($O[rt]||!Pl[rt])}(B)?(Kn(B),!0):"noscript"!==rt&&"noembed"!==rt||!Se(/<\/no(script|embed)/i,B.innerHTML)?(dt&&3===B.nodeType&&(it=ho(it=B.textContent,ot," "),it=ho(it,st," "),B.textContent!==it&&(ta(n.removed,{element:B.cloneNode()}),B.textContent=it)),Gn("afterSanitizeElements",B,null),!1):(Kn(B),!0)},Sx=function(B,it,rt){if(un&&("id"===it||"name"===it)&&(rt in r||rt in HO))return!1;if((!nt||V[it]||!Se(ht,it))&&(!X||!Se(kt,it)))if(!M[it]||V[it]){if(!(_x(B)&&(I.tagNameCheck instanceof RegExp&&Se(I.tagNameCheck,B)||I.tagNameCheck instanceof Function&&I.tagNameCheck(B))&&(I.attributeNameCheck instanceof RegExp&&Se(I.attributeNameCheck,it)||I.attributeNameCheck instanceof Function&&I.attributeNameCheck(it))||"is"===it&&I.allowCustomizedBuiltInElements&&(I.tagNameCheck instanceof RegExp&&Se(I.tagNameCheck,rt)||I.tagNameCheck instanceof Function&&I.tagNameCheck(rt))))return!1}else if(!Bn[it]&&!Se(mt,ho(rt,ut,""))&&("src"!==it&&"xlink:href"!==it&&"href"!==it||"script"===B||0!==X_(rt,"data:")||!yo[B])&&(!lt||Se(et,ho(rt,ut,"")))&&rt)return!1;return!0},_x=function(B){return B.indexOf("-")>0},Nx=function(B){var it,rt,Dt,Yt;Gn("beforeSanitizeAttributes",B,null);var Ne=B.attributes;if(Ne){var ue={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:M};for(Yt=Ne.length;Yt--;){var xa=it=Ne[Yt],Dn=xa.name,mn=xa.namespaceURI;rt="value"===Dn?it.value:Q_(it.value),Dt=W(Dn);var KO=rt;if(ue.attrName=Dt,ue.attrValue=rt,ue.keepAttr=!0,ue.forceKeepAttr=void 0,Gn("uponSanitizeAttribute",B,ue),rt=ue.attrValue,!ue.forceKeepAttr)if(ue.keepAttr)if(Se(/\/>/i,rt))Ll(Dn,B);else{dt&&(rt=ho(rt,ot," "),rt=ho(rt,st," "));var GO=W(B.nodeName);if(Sx(GO,Dt,rt)){if(rt!==KO)try{mn?B.setAttributeNS(mn,Dn,rt):B.setAttribute(Dn,rt)}catch{Ll(Dn,B)}}else Ll(Dn,B)}else Ll(Dn,B)}Gn("afterSanitizeAttributes",B,null)}},WO=function B(it){var rt,Dt=kx(it);for(Gn("beforeSanitizeShadowDOM",it,null);rt=Dt.nextNode();)Gn("uponSanitizeShadowNode",rt,null),Ex(rt)||(rt.content instanceof s&&B(rt.content),Nx(rt));Gn("afterSanitizeShadowDOM",it,null)};return n.sanitize=function(B,it){var rt,Dt,Yt,Ne,ue;if((vx=!B)&&(B="\x3c!--\x3e"),"string"!=typeof B&&!wa(B)){if("function"!=typeof B.toString)throw ku("toString is not a function");if("string"!=typeof(B=B.toString()))throw ku("dirty is not a string, aborting")}if(!n.isSupported){if("object"===nr(e.toStaticHTML)||"function"==typeof e.toStaticHTML){if("string"==typeof B)return e.toStaticHTML(B);if(wa(B))return e.toStaticHTML(B.outerHTML)}return B}if(ft||Zm(it),n.removed=[],"string"==typeof B&&(Zt=!1),Zt){if(B.nodeName){var xa=W(B.nodeName);if(!R[xa]||z[xa])throw ku("root node is forbidden and cannot be sanitized in-place")}}else if(B instanceof i)1===(Dt=(rt=xx("\x3c!----\x3e")).ownerDocument.importNode(B,!0)).nodeType&&"BODY"===Dt.nodeName||"HTML"===Dt.nodeName?rt=Dt:rt.appendChild(Dt);else{if(!Tt&&!dt&&!K&&-1===B.indexOf("<"))return k&&Ce?k.createHTML(B):B;if(!(rt=xx(B)))return Tt?null:Ce?x:""}rt&&Ut&&Kn(rt.firstChild);for(var Dn=kx(Zt?B:rt);Yt=Dn.nextNode();)3===Yt.nodeType&&Yt===Ne||Ex(Yt)||(Yt.content instanceof s&&WO(Yt.content),Nx(Yt),Ne=Yt);if(Ne=null,Zt)return B;if(Tt){if(ye)for(ue=D.call(rt.ownerDocument);rt.firstChild;)ue.appendChild(rt.firstChild);else ue=rt;return M.shadowroot&&(ue=P.call(o,ue,!0)),ue}var mn=K?rt.outerHTML:rt.innerHTML;return K&&R["!doctype"]&&rt.ownerDocument&&rt.ownerDocument.doctype&&rt.ownerDocument.doctype.name&&Se(iN,rt.ownerDocument.doctype.name)&&(mn="<!DOCTYPE "+rt.ownerDocument.doctype.name+">\n"+mn),dt&&(mn=ho(mn,ot," "),mn=ho(mn,st," ")),k&&Ce?k.createHTML(mn):mn},n.setConfig=function(B){Zm(B),ft=!0},n.clearConfig=function(){Xr=null,ft=!1},n.isValidAttribute=function(B,it,rt){Xr||Zm({});var Dt=W(B),Yt=W(it);return Sx(Dt,Yt,rt)},n.addHook=function(B,it){"function"==typeof it&&(F[B]=F[B]||[],ta(F[B],it))},n.removeHook=function(B){if(F[B])return G_(F[B])},n.removeHooks=function(B){F[B]&&(F[B]=[])},n.removeAllHooks=function(){F={}},n}();const Lv=$.each,uN=$.trim,mN=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],fN={ftp:21,http:80,https:443,mailto:25},gN=["img","video"],Mv=(t,e,n)=>{const o=(r=>{try{return decodeURIComponent(r)}catch{return unescape(r)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!t.allow_html_data_urls&&(/^data:image\//i.test(o)?(s=n,(Y(r=t.allow_svg_data_urls)?!r:!Y(s)||!St(gN,s))&&/^data:image\/svg\+xml/i.test(o)):/^data:/i.test(o)));var r,s};class dn{constructor(e,n={}){this.path="",this.directory="",e=uN(e),this.settings=n;const o=n.base_uri,r=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(r.source=e);const s=0===e.indexOf("//");if(0!==e.indexOf("/")||s||(e=(o&&o.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){const i=o?o.path:new dn(document.location.href).directory;if(""===o?.protocol)e="//mce_host"+r.toAbsPath(i,e);else{const l=/([^#?]*)([#?]?.*)/.exec(e);l&&(e=(o&&o.protocol||"http")+"://mce_host"+r.toAbsPath(i,l[1])+l[2])}}e=e.replace(/@@/g,"(mce_at)");const a=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);a&&Lv(mN,(i,l)=>{let d=a[l];d&&(d=d.replace(/\(mce_at\)/g,"@@")),r[i]=d}),o&&(r.protocol||(r.protocol=o.protocol),r.userInfo||(r.userInfo=o.userInfo),r.port||"mce_host"!==r.host||(r.port=o.port),r.host&&"mce_host"!==r.host||(r.host=o.host),r.source=""),s&&(r.protocol="")}static parseDataUri(e){let n;const o=decodeURIComponent(e).split(","),r=/data:([^;]+)/.exec(o[0]);return r&&(n=r[1]),{type:n,data:o[1]}}static isDomSafe(e,n,o={}){if(o.allow_script_urls)return!0;{const r=oo.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Mv(o,r,n)}}static getDocumentBaseUrl(e){var n;let o;return o=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(n=e.href)&&void 0!==n?n:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/")),o}setPath(e){const n=/^(.*?)\/?(\w+)?$/.exec(e);n&&(this.path=n[0],this.directory=n[1],this.file=n[2]),this.source="",this.getURI()}toRelative(e){if("./"===e)return e;const n=new dn(e,{base_uri:this});if("mce_host"!==n.host&&this.host!==n.host&&n.host||this.port!==n.port||this.protocol!==n.protocol&&""!==n.protocol)return n.getURI();const o=this.getURI(),r=n.getURI();if(o===r||"/"===o.charAt(o.length-1)&&o.substr(0,o.length-1)===r)return o;let s=this.toRelPath(this.path,n.path);return n.query&&(s+="?"+n.query),n.anchor&&(s+="#"+n.anchor),s}toAbsolute(e,n){const o=new dn(e,{base_uri:this});return o.getURI(n&&this.isSameOrigin(o))}isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;const n=this.protocol?fN[this.protocol]:null;if(n&&(this.port||n)==(e.port||n))return!0}return!1}toRelPath(e,n){let o,r,s=0,a="";const i=e.substring(0,e.lastIndexOf("/")).split("/"),l=n.split("/");if(i.length>=l.length)for(o=0,r=i.length;o<r;o++)if(o>=l.length||i[o]!==l[o]){s=o+1;break}if(i.length<l.length)for(o=0,r=l.length;o<r;o++)if(o>=i.length||i[o]!==l[o]){s=o+1;break}if(1===s)return n;for(o=0,r=i.length-(s-1);o<r;o++)a+="../";for(o=s-1,r=l.length;o<r;o++)a+=o!==s-1?"/"+l[o]:l[o];return a}toAbsPath(e,n){let o=0;const r=/\/$/.test(n)?"/":"",s=e.split("/"),a=n.split("/"),i=[];Lv(s,u=>{u&&i.push(u)});const l=[];for(let u=a.length-1;u>=0;u--)0!==a[u].length&&"."!==a[u]&&(".."!==a[u]?o>0?o--:l.push(a[u]):o++);const d=i.length-o;let c;return c=d<=0?ns(l).join("/"):i.slice(0,d).join("/")+"/"+ns(l).join("/"),0!==c.indexOf("/")&&(c="/"+c),r&&c.lastIndexOf("/")!==c.length-1&&(c+=r),c}getURI(e=!1){let n;return this.source&&!e||(n="",e||(n+=this.protocol?this.protocol+"://":"//",this.userInfo&&(n+=this.userInfo+"@"),this.host&&(n+=this.host),this.port&&(n+=":"+this.port)),this.path&&(n+=this.path),this.query&&(n+="?"+this.query),this.anchor&&(n+="#"+this.anchor),this.source=n),this.source}}const pN=$.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Ru="data-mce-type";let Iv=0;const Fv=(t,e,n,o)=>{var r,s,a,i;const l=e.validate,d=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(r=t.nodeValue)&&void 0!==r?r:"")&&(t.nodeValue=" "+t.nodeValue);const c=null!==(s=o?.tagName)&&void 0!==s?s:t.nodeName.toLowerCase();if(1!==t.nodeType||"body"===c)return;const u=N(t),g=Ba(u,Ru),p=Le(u,"data-mce-bogus");if(!g&&at(p))return void("all"===p?Ot(u):Un(u));const f=n.getElementRule(c);if(!l||f){if(Y(o)&&(o.allowedTags[c]=!0),l&&f&&!g){if(H(null!==(a=f.attributesForced)&&void 0!==a?a:[],h=>{Xt(u,h.name,"{$uid}"===h.value?"mce_"+Iv++:h.value)}),H(null!==(i=f.attributesDefault)&&void 0!==i?i:[],h=>{Ba(u,h.name)||Xt(u,h.name,"{$uid}"===h.value?"mce_"+Iv++:h.value)}),f.attributesRequired&&!It(f.attributesRequired,h=>Ba(u,h))||f.removeEmptyAttrs&&(h=>{const m=h.dom.attributes;return null==m||0===m.length})(u))return void Un(u);f.outputName&&f.outputName!==c&&((h,m)=>{const b=((y,w)=>{const k=Qt(w),x=Vf(y);return Qn(k,x),k})(h,m);Zn(h,b);const v=ne(h);To(b,v),Ot(h)})(u,f.outputName)}}else pt(d,c)?Ot(u):Un(u)},Uv=(t,e,n,o,r)=>!(o in pN&&Mv(t,r,n))&&(!t.validate||e.isValid(n,o)||te(o,"data-")||te(o,"aria-")),zv=(t,e)=>t.hasAttribute(Ru)&&("id"===e||"class"===e||"style"===e),jv=(t,e)=>t in e.getBoolAttrs(),hN=(t,e,n)=>{const{attributes:o}=t;for(let r=o.length-1;r>=0;r--){const s=o[r],a=s.name,i=s.value;Uv(e,n,t.tagName.toLowerCase(),a,i)||zv(t,a)?jv(a,n)&&t.setAttribute(a,a):t.removeAttribute(a)}},Hv=$.makeMap,$v=$.extend,Vv=(t,e,n)=>{const o=t.name,r=o in n&&"title"!==o&&"textarea"!==o,s=e.childNodes;for(let a=0,i=s.length;a<i;a++){const l=s[a],d=new be(l.nodeName.toLowerCase(),l.nodeType);if(Q(l)){const c=l.attributes;for(let u=0,g=c.length;u<g;u++){const p=c[u];d.attr(p.name,p.value)}}else j(l)?(d.value=l.data,r&&(d.raw=!0)):(to(l)||sk(l)||ak(l))&&(d.value=l.data);Vv(d,l,n),t.append(d)}},Ir=(t={},e=ro())=>{const n=xv(),o=xv(),r={validate:!0,root_name:"body",sanitize:!0,...t},s=new DOMParser,a=((h,m)=>{if(h.sanitize){const b=((t,e)=>{const n=cN();return n.addHook("uponSanitizeElement",(o,r)=>{Fv(o,t,e,r)}),n.addHook("uponSanitizeAttribute",(o,r)=>{const s=o.tagName.toLowerCase(),{attrName:a,attrValue:i}=r;r.keepAttr=Uv(t,e,s,a,i),r.keepAttr?(r.allowedAttributes[a]=!0,jv(a,e)&&(r.attrValue=a),t.allow_svg_data_urls&&te(i,"data:image/svg+xml")&&(r.forceKeepAttr=!0)):zv(o,a)&&(r.forceKeepAttr=!0)}),n})(h,m);return(v,y)=>{b.sanitize(v,((w,k)=>{const x={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return x.PARSER_MEDIA_TYPE=k,w.allow_script_urls?x.ALLOWED_URI_REGEXP=/.*/:w.allow_html_data_urls&&(x.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),x})(h,y)),b.removed=[]}}return(b,v)=>{const y=document.createNodeIterator(b,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let w;for(;w=y.nextNode();)Fv(w,h,m),Q(w)&&hN(w,h,m)}})(r,e),l=n.getFilters,u=o.getFilters,p=(h,m)=>{const b=at(m.attr(Ru)),v=!(1!==m.type||pt(h,m.name)||(y=e,w=m,1===w.type&&Qa(y,w.name)&&at(w.attr(Cs))));var y,w;return 3===m.type||v&&!b},f={schema:e,addAttributeFilter:o.addFilter,getAttributeFilters:u,removeAttributeFilter:o.removeFilter,addNodeFilter:n.addFilter,getNodeFilters:l,removeNodeFilter:n.removeFilter,parse:(h,m={})=>{var b;const v=r.validate,y=null!==(b=m.context)&&void 0!==b?b:r.root_name,w=((O,F,q="html")=>{const W="xhtml"===q?"application/xhtml+xml":"text/html",ot=pt(e.getSpecialElements(),F.toLowerCase()),st=ot?`<${F}>${O}</${F}>`:O,kt=s.parseFromString("xhtml"===q?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${st}</body></html>`:`<body>${st}</body>`,W).body;return a(kt,W),ot?kt.firstChild:kt})(h,y,m.format);bd(e,w);const k=new be(y,11);Vv(k,w,e.getSpecialElements()),w.innerHTML="";const[x,S]=((O,F,q,W)=>{const ot=q.validate,st=F.getNonEmptyElements(),ht=F.getWhitespaceElements(),kt=$v(Hv("script,style,head,html,body,title,meta,param"),F.getBlockElements()),et=Gg(F),ut=/[ \t\r\n]+/g,mt=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,A=I=>{let z=I.parent;for(;Y(z);){if(z.name in ht)return!0;z=z.parent}return!1},M=I=>I.name in kt&&!Mg(F,I),U=(I,z)=>!Y(z?I.prev:I.next)&&!zt(I.parent)&&M(I.parent)&&(I.parent!==O||!0===W.isRootContent);return[I=>{var z,X,nt;if(3===I.type&&!A(I)){let V=null!==(z=I.value)&&void 0!==z?z:"";V=V.replace(ut," "),nt=M,(Y(X=I.prev)&&(nt(X)||"br"===X.name)||U(I,!0))&&(V=V.replace(mt,"")),0===V.length?I.remove():I.value=V}},I=>{var z,nt,lt;if(1===I.type){const V=F.getElementRule(I.name);if(ot&&V){const X=Qs(F,st,ht,I);V.paddInEmptyBlock&&X&&(nt=>{let lt=nt;for(;Y(lt);){if(lt.name in et)return Qs(F,st,ht,lt);lt=lt.parent}return!1})(I)?Zc(W,M,I):V.removeEmpty&&X?M(I)?I.remove():I.unwrap():V.paddEmpty&&(X||T0(nt=I,"#text")&&(null===(lt=nt?.firstChild)||void 0===lt?void 0:lt.value)===Jt)&&Zc(W,M,I)}}else if(3===I.type&&!A(I)){let V=null!==(z=I.value)&&void 0!==z?z:"";(I.next&&M(I.next)||U(I,!1))&&(V=V.replace(R,"")),0===V.length?I.remove():I.value=V}}]})(k,e,r,m),E=[],D={nodes:{},attributes:{}},T=O=>R0(l(),u(),O,D);if(((O,F,q)=>{const W=[];for(let ot=O,st=ot;ot;st=ot,ot=ot.walk()){const ht=ot;H(F,kt=>kt(ht)),zt(ht.parent)&&ht!==O?ot=st:W.push(ht)}for(let ot=W.length-1;ot>=0;ot--){const st=W[ot];H(q,ht=>ht(st))}})(k,[x,T],[S,v?O=>{return q=E,void(B0(e,F=O)&&q.push(F));var F,q}:bt]),E.reverse(),v&&E.length>0)if(m.context){const{pass:O,fail:F}=Zr(E,q=>q.parent===k);eu(F,e,k,T),m.invalid=O.length>0}else eu(E,e,k,T);const P=((O,F)=>{var q;const W=null!==(q=F.forced_root_block)&&void 0!==q?q:O.forced_root_block;return!1===W?"":!0===W?"p":W})(r,m);return P&&("body"===k.name||m.isRootContent)&&((O,F)=>{const q=$v(Hv("script,style,head,html,body,title,meta,param"),e.getBlockElements()),W=/^[ \t\r\n]+/,ot=/[ \t\r\n]+$/;let st=O.firstChild,ht=null;const kt=et=>{var ut,mt;et&&(st=et.firstChild,st&&3===st.type&&(st.value=null===(ut=st.value)||void 0===ut?void 0:ut.replace(W,"")),st=et.lastChild,st&&3===st.type&&(st.value=null===(mt=st.value)||void 0===mt?void 0:mt.replace(ot,"")))};if(e.isValidChild(O.name,F.toLowerCase())){for(;st;){const et=st.next;p(q,st)?(ht||(ht=new be(F,1),ht.attr(r.forced_root_block_attrs),O.insert(ht,st)),ht.append(st)):(kt(ht),ht=null),st=et}kt(ht)}})(k,P),m.invalid||A0(D,m),k}};return((h,m)=>{const b=h.schema;m.remove_trailing_brs&&h.addNodeFilter("br",(y,w,k)=>{const x=$.extend({},b.getBlockElements()),S=b.getNonEmptyElements(),E=b.getWhitespaceElements();x.body=1;const _=D=>D.name in x&&Mg(b,D);for(let D=0,T=y.length;D<T;D++){let P=y[D],O=P.parent;if(O&&x[O.name]&&P===O.lastChild){let F=P.prev;for(;F;){const q=F.name;if("span"!==q||"bookmark"!==F.attr("data-mce-type")){"br"===q&&(P=null);break}F=F.prev}if(P&&(P.remove(),Qs(b,S,E,O))){const q=b.getElementRule(O.name);q&&(q.removeEmpty?O.remove():q.paddEmpty&&Zc(k,_,O))}}else{let F=P;for(;O&&O.firstChild===F&&O.lastChild===F&&(F=O,!x[O.name]);)O=O.parent;if(F===O){const q=new be("#text",3);q.value=Jt,P.replace(q)}}}}),h.addAttributeFilter("href",y=>{let w=y.length;const k=x=>{const S=x?$.trim(x):"";return/\b(noopener)\b/g.test(S)?S:S.split(" ").filter(_=>_.length>0).concat(["noopener"]).sort().join(" ")};if(!m.allow_unsafe_link_target)for(;w--;){const x=y[w];"a"===x.name&&"_blank"===x.attr("target")&&x.attr("rel",k(x.attr("rel")))}}),m.allow_html_in_named_anchor||h.addAttributeFilter("id,name",y=>{let w,k,x,S,E=y.length;for(;E--;)if(S=y[E],"a"===S.name&&S.firstChild&&!S.attr("href"))for(x=S.parent,w=S.lastChild;w&&x;)k=w.prev,x.insert(w,S),w=k}),m.fix_list_elements&&h.addNodeFilter("ul,ol",y=>{let w,k,x=y.length;for(;x--;)if(w=y[x],k=w.parent,k&&("ul"===k.name||"ol"===k.name))if(w.prev&&"li"===w.prev.name)w.prev.append(w);else{const S=new be("li",1);S.attr("style","list-style-type: none"),w.wrap(S)}});const v=b.getValidClasses();m.validate&&v&&h.addAttributeFilter("class",y=>{var w;let k=y.length;for(;k--;){const x=y[k],S=null!==(w=x.attr("class"))&&void 0!==w?w:"",E=$.explode(S," ");let _="";for(let D=0;D<E.length;D++){const T=E[D];let P=!1,O=v["*"];O&&O[T]&&(P=!0),O=v[x.name],!P&&O&&O[T]&&(P=!0),P&&(_&&(_+=" "),_+=T)}_.length||(_=null),x.attr("class",_)}}),((y,w)=>{const{blob_cache:k}=w;if(k){const x=S=>{const E=S.attr("src");var _;(_=S).attr("src")===vt.transparentSrc||Y(_.attr("data-mce-placeholder"))||(_=>Y(_.attr("data-mce-bogus")))(S)||zt(E)||Nv(k,E,!0).each(_=>{S.attr("src",_.blobUri())})};y.addAttributeFilter("src",S=>H(S,x))}})(h,m)})(f,r),(m=r).inline_styles&&((t,e,n)=>{var o;const r=Sd();var s,a,i;e.convert_fonts_to_spans&&(s=t,a=r,i=$.explode(null!==(o=e.font_size_legacy_values)&&void 0!==o?o:""),s.addNodeFilter("font",l=>{H(l,d=>{const c=a.parse(d.attr("style")),u=d.attr("color"),g=d.attr("face"),p=d.attr("size");var f;u&&(c.color=u),g&&(c["font-family"]=g),p&&Oa(p).each(f=>{c["font-size"]=i[f-1]}),d.name="span",d.attr("style",a.serialize(c)),f=d,H(["color","face","size"],m=>{f.attr(m,null)})})})),((s,a,i)=>{s.addNodeFilter("strike",l=>{const d="html4"!==a.type;H(l,c=>{if(d)c.name="s";else{const u=i.parse(c.attr("style"));u["text-decoration"]="line-through",c.name="span",c.attr("style",i.serialize(u))}})})})(t,n,r)})(f,m,e),f;var m},qv=(t,e,n)=>{const o=Mi(s=t)?uo({validate:!1}).serialize(s):s,r=e(o);var s;if(r.isDefaultPrevented())return r;if(Mi(t)){if(r.content!==o){const s=Ir({validate:!1,forced_root_block:!1,sanitize:n}).parse(r.content,{context:t.name});return{...r,content:s}}return{...r,content:t}}return r},Wv=(t,e)=>{if(e.no_events)return pe.value(e);{const n=t.dispatch("BeforeGetContent",e);return n.isDefaultPrevented()?pe.error(tb(t,{content:"",...n}).content):pe.value(n)}},Kv=(t,e,n)=>n.no_events?e:qv(e,r=>tb(t,{...n,content:r}),qd(t)).content,Au=(t,e)=>{if(e.no_events)return pe.value(e);{const n=qv(e.content,o=>{return r=t,s={...e,content:o},r.dispatch("BeforeSetContent",s);var r,s},qd(t));return n.isDefaultPrevented()?(Zh(t,n),pe.error(void 0)):pe.value(n)}},Ou=(t,e,n)=>{n.no_events||Zh(t,{...n,content:e})},Tu=(t,e,n)=>({element:t,width:e,rows:n}),Gv=(t,e)=>({element:t,cells:e}),vN=(t,e)=>({x:t,y:e}),Yv=(t,e)=>Ln(t,e).bind(Oa).getOr(1),yN=(t,e,n)=>{const o=t.rows;return!!(o[n]?o[n].cells:[])[e]},Xv=t=>Re(t,(e,n)=>n.cells.length>e?n.cells.length:e,0),Qv=(t,e)=>{const n=t.rows;for(let o=0;o<n.length;o++){const r=n[o].cells;for(let s=0;s<r.length;s++)if(wt(r[s],e))return C.some(vN(s,o))}return C.none()},Jv=(t,e,n,o,r)=>{const s=[],a=t.rows;for(let i=n;i<=r;i++){const l=a[i].cells,d=e<o?l.slice(e,o+1):l.slice(o,e+1);s.push(Gv(a[i].element,d))}return s},CN=t=>((e,n)=>{const o=jo(e.element),r=Qt("tbody");return To(r,n),Vt(o,r),o})(t,yt(t.rows,n=>{const o=yt(n.cells,s=>{const a=lp(s);return ee(a,"colspan"),ee(a,"rowspan"),a}),r=jo(n.element);return To(r,o),r})),Zv=()=>bc([]),Vi=(t,e)=>e>=0&&e<t.length&&Or(t.charAt(e)),ty=t=>jn(t.innerText),ey=t=>Q(t)?t.outerHTML:j(t)?oo.encodeRaw(t.data,!1):to(t)?"\x3c!--"+t.data+"--\x3e":"",SN=_o(()=>document.implementation.createHTMLDocument("undo")),qi=t=>{const e=(n=t.getBody(),ct(yt(Ae(n.childNodes),ey),s=>s.length>0));var n;const o=fn(e,s=>{const a=Ib(t.serializer,s);return a.length>0?[a]:[]}),r=o.join("");return-1!==r.indexOf("</iframe>")?{type:"fragmented",fragments:o,content:"",bookmark:null,beforeBookmark:null}:(s=>({type:"complete",fragments:null,content:s,bookmark:null,beforeBookmark:null}))(r)},Bu=(t,e,n)=>{const o=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((n,o)=>{let r=0;H(n,s=>{var a,i;0===s[0]?r++:1===s[0]?(((a,i,l)=>{const d=(c=>{let u;const g=document.createElement("div"),p=document.createDocumentFragment();for(c&&(g.innerHTML=c);u=g.firstChild;)p.appendChild(u);return p})(i);a.hasChildNodes()&&l<a.childNodes.length?a.insertBefore(d,a.childNodes[l]):a.appendChild(d)})(o,s[1],r),r++):2===s[0]&&(i=r,(a=o).hasChildNodes()&&i<a.childNodes.length&&a.removeChild(a.childNodes[i]))})})(((n,o)=>{const r=n.length+o.length+2,s=new Array(r),a=new Array(r),i=(u,g,p,f,h)=>{const m=d(u,g,p,f);if(null===m||m.start===g&&m.diag===g-f||m.end===u&&m.diag===u-p){let b=u,v=p;for(;b<g||v<f;)b<g&&v<f&&n[b]===o[v]?(h.push([0,n[b]]),++b,++v):g-u>f-p?(h.push([2,n[b]]),++b):(h.push([1,o[v]]),++v)}else{i(u,m.start,p,m.start-m.diag,h);for(let b=m.start;b<m.end;++b)h.push([0,n[b]]);i(m.end,g,m.end-m.diag,f,h)}},l=(u,g,p,f)=>{let h=u;for(;h-g<f&&h<p&&n[h]===o[h-g];)++h;return{start:u,end:h,diag:g}},d=(u,g,p,f)=>{const h=g-u,m=f-p;if(0===h||0===m)return null;const b=h-m,v=m+h,y=(v%2==0?v:v+1)/2;let w,k,x,S,E;for(s[1+y]=u,a[1+y]=g+1,w=0;w<=y;++w){for(k=-w;k<=w;k+=2){for(x=k+y,s[x]=k===-w||k!==w&&s[x-1]<s[x+1]?s[x+1]:s[x-1]+1,S=s[x],E=S-u+p-k;S<g&&E<f&&n[S]===o[E];)s[x]=++S,++E;if(b%2!=0&&b-w<=k&&k<=b+w&&a[x-b]<=s[x])return l(a[x-b],k+u-p,g,f)}for(k=b-w;k<=b+w;k+=2){for(x=k+y-b,a[x]=k===b-w||k!==b+w&&a[x+1]<=a[x-1]?a[x+1]-1:a[x-1],S=a[x]-1,E=S-u+p-k;S>=u&&E>=p&&n[S]===o[E];)a[x]=S--,E--;if(b%2==0&&-w<=k&&k<=w&&a[x]<=s[x+b])return l(a[x],k+u-p,g,f)}}return null},c=[];return i(0,n.length,0,o.length,c),c})(yt(Ae(e.childNodes),ey),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!Y(o)||!kh(o)||!o.isFakeCaret}),o&&(t.selection.moveToBookmark(o),t.selection.scrollIntoView())},Du=t=>"fragmented"===t.type?t.fragments.join(""):t.content,ny=t=>{const e=Qt("body",SN());return Fa(e,Du(t)),H(se(e,"*[data-mce-bogus]"),Un),fg(e)},Pu=(t,e)=>{return!(!t||!e)&&(o=e,!(Du(t)!==Du(o))||((n,o)=>ny(n)===ny(o))(t,e));var o},Lu=t=>0===t.get(),Wi=(t,e,n)=>{Lu(n)&&(t.typing=e)},oy=(t,e)=>{t.typing&&(Wi(t,!1,e),t.add())},ry=t=>({init:{bindEvents:bt},undoManager:{beforeChange:(e,n)=>{return o=t,s=n,void(Lu(e)&&s.set(Ud(o.selection)));var o,s},add:(e,n,o,r,s,a)=>((i,l,d,c,u,g,p)=>{const f=qi(i),h=$.extend(g||{},f);if(!Lu(c)||i.removed)return null;const m=l.data[d.get()];if(i.dispatch("BeforeAddUndo",{level:h,lastLevel:m,originalEvent:p}).isDefaultPrevented()||m&&Pu(m,h))return null;l.data[d.get()]&&u.get().each(y=>{l.data[d.get()].beforeBookmark=y});const b=LE(i);if(b&&l.data.length>b){for(let y=0;y<l.data.length-1;y++)l.data[y]=l.data[y+1];l.data.length--,d.set(l.data.length)}h.bookmark=Ud(i.selection),d.get()<l.data.length-1&&(l.data.length=d.get()+1),l.data.push(h),d.set(l.data.length-1);const v={level:h,lastLevel:m,originalEvent:p};return d.get()>0?(i.setDirty(!0),i.dispatch("AddUndo",v),i.dispatch("change",v)):i.dispatch("AddUndo",v),h})(t,e,n,o,r,s,a),undo:(e,n,o)=>((r,s,a,i)=>{let l;return s.typing&&(s.add(),s.typing=!1,Wi(s,!1,a)),i.get()>0&&(i.set(i.get()-1),l=s.data[i.get()],Bu(r,l,!0),r.setDirty(!0),r.dispatch("Undo",{level:l})),l})(t,e,n,o),redo:(e,n)=>((o,r,s)=>{let a;return r.get()<s.length-1&&(r.set(r.get()+1),a=s[r.get()],Bu(o,a,!1),o.setDirty(!0),o.dispatch("Redo",{level:a})),a})(t,e,n),clear:(e,n)=>{return o=t,s=n,(r=e).data=[],s.set(0),r.typing=!1,void o.dispatch("ClearUndos");var o,r,s},reset:e=>{return(n=e).clear(),void n.add();var n},hasUndo:(e,n)=>{return o=t,r=e,n.get()>0||r.typing&&r.data[0]&&!Pu(qi(o),r.data[0]);var o,r},hasRedo:(e,n)=>{return o=e,n.get()<o.data.length-1&&!o.typing;var o},transact:(e,n,o)=>{return a=o,oy(r=e,n),r.beforeChange(),r.ignore(a),r.add();var r,a},ignore:(e,n)=>((o,r)=>{try{o.set(o.get()+1),r()}finally{o.set(o.get()-1)}})(e,n),extra:(e,n,o,r)=>((s,a,i,l,d)=>{if(a.transact(l)){const c=a.data[i.get()].bookmark,u=a.data[i.get()-1];Bu(s,u,!0),a.transact(d)&&(a.data[i.get()-1].beforeBookmark=c)}})(t,e,n,o,r)},formatter:{match:(e,n,o,r)=>du(t,e,n,o,r),matchAll:(e,n)=>((o,r,s)=>{const a=[],i={},l=o.selection.getStart();return o.dom.getParent(l,d=>{for(let c=0;c<r.length;c++){const u=r[c];!i[u]&&Sn(o,d,u,s)&&(i[u]=!0,a.push(u))}},o.dom.getRoot()),a})(t,e,n),matchNode:(e,n,o,r)=>Sn(t,e,n,o,r),canApply:e=>((n,o)=>{const r=n.formatter.get(o),s=n.dom;if(r){const a=n.selection.getStart(),i=wi(s,a);for(let l=r.length-1;l>=0;l--){const d=r[l];if(!He(d))return!0;for(let c=i.length-1;c>=0;c--)if(s.is(i[c],d.selector))return!0}}return!1})(t,e),closest:e=>((n,o)=>{const r=s=>wt(s,N(n.getBody()));return C.from(n.selection.getStart(!0)).bind(s=>au(N(s),a=>ur(o,i=>{return Sn(n,a.dom,d=i)?C.some(d):C.none();var d}),r)).getOrNull()})(t,e),apply:(e,n,o)=>pv(t,e,n,o),remove:(e,n,o,r)=>mv(t,e,n,o,r),toggle:(e,n,o)=>((r,s,a,i)=>{const l=r.formatter.get(s);l&&(!du(r,s,a,i)||"toggle"in l[0]&&!l[0].toggle?pv(r,s,a,i):mv(r,s,a,i))})(t,e,n,o),formatChanged:(e,n,o,r,s)=>{return((g,p,f,h,m,b)=>{const v=p.get();H(f.split(","),y=>{const w=Rt(v,y).getOrThunk(()=>{const x={withSimilar:{state:Kt(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Kt(!1),similar:!1,callbacks:[]},withVars:[]};return v[y]=x,x}),k=()=>{const x=yv(g);return vv(g,x,y,m,b).isSome()};if(me(b)){const x=m?w.withSimilar:w.withoutSimilar;x.callbacks.push(h),1===x.callbacks.length&&x.state.set(k())}else w.withVars.push({state:Kt(k()),similar:m,vars:b,callback:h})}),p.set(v)})(t,i=e,l=n,d=o,r,s),{unbind:()=>((g,p,f)=>{const h=g.get();H(p.split(","),m=>Rt(h,m).each(b=>{h[m]={withSimilar:{...b.withSimilar,callbacks:ct(b.withSimilar.callbacks,v=>v!==f)},withoutSimilar:{...b.withoutSimilar,callbacks:ct(b.withoutSimilar.callbacks,v=>v!==f)},withVars:ct(b.withVars,v=>v.callback!==f)}})),g.set(h)})(i,l,d)};var i,l,d}},editor:{getContent:e=>{return o=e,C.from((n=t).getBody()).fold(G("tree"===o.format?new be("body",11):""),r=>((t,e,n)=>{let o;return o="raw"===e.format?$.trim(s_(t.serializer,n.innerHTML)):"text"===e.format?((r,s)=>{const a=r.getDoc(),i=Jn(N(r.getBody())),l=Qt("div",a);Xt(l,"data-mce-bogus","all"),Ma(l,{position:"fixed",left:"-9999999px",top:"0"}),Fa(l,s.innerHTML),Fb(l),Ub(l);const d=od(u=i)?u:N(In(u).dom.body);var u;Vt(d,l);const c=jn(l.dom.innerText);return Ot(l),c})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((r,s)=>{const a=Te(r),i=new RegExp(`^(<${a}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${a}>[\r\n]*|<br \\/>[\r\n]*)$`);return s.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!qa(N(n))&&at(o)?$.trim(o):o})(n,o,r));var n,o},setContent:(e,n)=>{return r=e,s=n,C.from((o=t).getBody()).map(a=>Mi(r)?((i,l,d,c)=>{O0(i.parser.getNodeFilters(),i.parser.getAttributeFilters(),d);const u=uo({validate:!1},i.schema).serialize(d),g=qa(N(l))?u:$.trim(u);return su(i,g,c.no_selection),{content:d,html:g}})(o,a,r,s):((i,l,d,c)=>{if(0===d.length||/^\s+$/.test(d)){const u='<br data-mce-bogus="1">';"TABLE"===l.nodeName?d="<tr><td>"+u+"</td></tr>":/^(UL|OL)$/.test(l.nodeName)&&(d="<li>"+u+"</li>");const g=Te(i);return i.schema.isValidChild(l.nodeName.toLowerCase(),g.toLowerCase())?(d=u,d=i.dom.createHTML(g,Bs(i),d)):d||(d=u),su(i,d,c.no_selection),{content:d,html:d}}{"raw"!==c.format&&(d=uo({validate:!1},i.schema).serialize(i.parser.parse(d,{isRootContent:!0,insert:!0})));const u=qa(N(l))?d:$.trim(d);return su(i,u,c.no_selection),{content:u,html:u}}})(o,a,r,s)).getOr({content:r,html:Mi(s.content)?"":s.content});var o,r,s},insertContent:(e,n)=>P_(t,e,n),addVisual:e=>((n,o)=>{const r=n.dom,s=Y(o)?o:n.getBody();H(r.select("table,a",s),a=>{switch(a.nodeName){case"TABLE":const i=zE(n),l=r.getAttrib(a,"border");l&&"0"!==l||!n.hasVisual?r.removeClass(a,i):r.addClass(a,i);break;case"A":if(!r.getAttrib(a,"href")){const d=r.getAttrib(a,"name")||a.id,c=Jp(n);d&&n.hasVisual?r.addClass(a,c):r.removeClass(a,c)}}}),n.dispatch("VisualAid",{element:o,hasVisual:n.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((o,r,s={})=>{const a=(i=s,l=r,{...i,format:l,get:!0,selection:!0,getInner:!0});var i,l;return Wv(o,a).fold(fe,i=>{const l=((d,c)=>{if("text"===c.format)return C.from((u=d).selection.getRng()).map(g=>{var p;const f=C.from(u.dom.getParent(g.commonAncestorContainer,u.dom.isBlock)),h=u.getBody(),m=f.map(x=>x.nodeName).getOr("div").toLowerCase(),b=N(g.cloneContents());Fb(b),Ub(b);const v=u.dom.add(h,m,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},b.dom),y=ty(v),w=jn(null!==(p=v.textContent)&&void 0!==p?p:"");if(u.dom.remove(v),Vi(w,0)||Vi(w,w.length-1)){const k=f.getOr(h),x=ty(k),S=x.indexOf(y);return-1===S?y:(Vi(x,S-1)?" ":"")+y+(Vi(x,S+y.length)?" ":"")}return y}).getOr("");var u;{const u=((g,p)=>{const f=g.selection.getRng(),h=g.dom.create("body"),m=g.selection.getSel(),b=Oc(g,nc(m)),v=p.contextual?((t,e)=>{const n=Oh(e,t);return n.length>0?((t,e)=>{return(n=t,o=e[0],fs(o,"table",Z(wt,n))).bind(n=>{const o=e[0],r=e[e.length-1],s=(a=>{const i=Tu(jo(a),0,[]);return H(se(a,"tr"),(l,d)=>{H(se(l,"td,th"),(c,u)=>{((g,p,f,h,m)=>{const b=Yv(m,"rowspan"),v=Yv(m,"colspan"),y=g.rows;for(let w=f;w<f+b;w++){y[w]||(y[w]=Gv(lp(h),[]));for(let k=p;k<p+v;k++)y[w].cells[k]=w===f&&k===p?m:jo(m)}})(i,((g,p,f)=>{for(;yN(g,p,f);)p++;return p})(i,u,d),d,l,c)})}),Tu(i.element,Xv(i.rows),i.rows)})(n);return(a=s,i=o,l=r,Qv(a,i).bind(d=>Qv(a,l).map(c=>((u,g,p)=>{const f=g.x,h=g.y,m=p.x,b=p.y,v=h<b?Jv(u,f,h,m,b):Jv(u,f,b,m,h);return Tu(u.element,Xv(v),v)})(a,d,c)))).map(a=>bc([CN(a)]));var a,i,l}).getOrThunk(Zv);var n,o})(t,n):(o=t,(r=e).length>0&&r[0].collapsed?Zv():(s=o,((i,l)=>{const d=Re(l,(c,u)=>(Vt(u,c),u),i);return l.length>0?bc([d]):d})(N((a=r[0]).cloneContents()),((t,e)=>{const n=N(e.commonAncestorContainer),o=Vn(n,t),r=ct(o,mk),s=(l=e,$t(i=o,d=>"li"===At(d)&&rc(d,l)).fold(G([]),d=>{return(c=i,$t(c,u=>"ul"===At(u)||"ol"===At(u))).map(c=>{const u=Qt(At(c)),g=os(lg(c),(p,f)=>te(f,"list-style"));return Ma(u,g),[Qt("li"),u]}).getOr([]);var c})),a=r.concat(s.length?s:(i=>vs(i)?en(i).filter(ud).fold(G([]),l=>[i,l]):ud(i)?[i]:[])(n));var i,l;return yt(a,jo)})(s,a))));var o,r,s,a})(N(g.getBody()),b).dom:f.cloneContents();return v&&h.appendChild(v),g.selection.serializer.serialize(h,p)})(d,c);return"tree"===c.format?u:d.selection.isCollapsed()?"":u}})(o,i);return Kv(o,l,i)})})(t,e,n)},autocompleter:{addDecoration:e=>((t,e)=>{if(Pb(N(t.getBody())).isNone()){const o=Da('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',t.getDoc());Vt(o,N(e.extractContents())),e.insertNode(o.dom),en(o).each(r=>r.dom.normalize()),(n=o,((r,s)=>{const a=i=>{const l=ne(i);for(let d=l.length-1;d>=0;d--){const c=l[d];if(s(c))return C.some(c);const u=a(c);if(u.isSome())return u}return C.none()};return a(r)})(n,Bb)).map(r=>{var s;t.selection.setCursorLocation(r.dom,"img"===At(s=r)?1:Eg(s).fold(()=>ne(s).length,a=>a.length))})}var n})(t,e),removeDecoration:()=>{return e=t,n=N(t.getBody()),Pb(n).each(o=>{const r=e.selection.getBookmark();Un(o),e.selection.moveToBookmark(r)});var e,n}},raw:{getModel:()=>C.none()}}),Nn=t=>pt(t.plugins,"rtc"),Mu=t=>t.rtcInstance?t.rtcInstance:ry(t),Mt=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},sy=t=>Mt(t).init.bindEvents(),ay=t=>0===t.dom.length?(Ot(t),C.none()):C.some(t),iy=(t,e,n,o)=>{t.bind(r=>((o?zc:Bi)(r.dom,o?r.dom.length:0),e.filter(Pe).map(s=>((a,i,l,d)=>{const c=a.dom,u=i.dom,g=d?c.length:u.length;d?(jc(c,u,!1,!d),l.setStart(u,g)):(jc(u,c,!1,!d),l.setEnd(u,g))})(r,s,n,o)))).orThunk(()=>{return(s=e,a=o,s.filter(i=>Hs.isBookmarkNode(i.dom)).bind(a?ms:Ro)).or(e).filter(Pe).map(s=>((a,i)=>{en(a).each(l=>{const d=a.dom;i&&Gs(l,L(d,0))?Bi(d,0):!i&&Ys(l,L(d,d.length))&&zc(d,d.length)})})(s,o));var s,a})},ly=(t,e,n)=>{if(pt(t,e)){const o=ct(t[e],r=>r!==n);0===o.length?delete t[e]:t[e]=o}},dy=t=>!(!t||!t.ownerDocument)&&Mn(N(t.ownerDocument),N(t)),cy=(t,e,n,o)=>{let r,s;const{selectorChangedWithUnbind:a}=((m,b)=>{let v,y;const w=(x,S)=>$t(S,E=>m.is(E,x)),k=x=>m.getParents(x,void 0,m.getRoot());return{selectorChangedWithUnbind:(x,S)=>(v||(v={},y={},b.on("NodeChange",E=>{const _=E.element,D=k(_),T={};_t(v,(P,O)=>{w(O,D).each(F=>{y[O]||(H(P,q=>{q(!0,{node:F,selector:O,parents:D})}),y[O]=P),T[O]=P})}),_t(y,(P,O)=>{T[O]||(delete y[O],H(P,F=>{F(!1,{node:_,selector:O,parents:D})}))})})),v[x]||(v[x]=[]),v[x].push(S),w(x,k(b.selection.getStart())).each(()=>{y[x]=v[x]}),{unbind:()=>{ly(v,x,S),ly(y,x,S)}})}})(t,o),i=(m,b)=>((v,y,w={})=>{const k=(x=w,S=y,{format:"html",...x,set:!0,selection:!0,content:S});var x,S;Au(v,k).each(x=>{const S=((_,D)=>{if("raw"!==D.format){const T=_.selection.getRng(),P=_.dom.getParent(T.commonAncestorContainer,_.dom.isBlock),O=P?{context:P.nodeName.toLowerCase()}:{},F=_.parser.parse(D.content,{forced_root_block:!1,...O,...D});return uo({validate:!1},_.schema).serialize(F)}return D.content})(v,x),E=v.selection.getRng();((_,D)=>{const T=C.from(D.firstChild).map(N),P=C.from(D.lastChild).map(N);_.deleteContents(),_.insertNode(D);const O=T.bind(Ro).filter(Pe).bind(ay),F=P.bind(ms).filter(Pe).bind(ay);iy(O,T,_,!0),iy(F,P,_,!1),_.collapse(!1)})(E,E.createContextualFragment(S)),v.selection.setRng(E),qs(v,E),Ou(v,S,x)})})(o,m,b),l=m=>{const b=c();b.collapse(!!m),u(b)},d=()=>e.getSelection?e.getSelection():e.document.selection,c=()=>{let m;const b=(y,w,k)=>{try{return w.compareBoundaryPoints(y,k)}catch{return-1}},v=e.document;if(Y(o.bookmark)&&!Qo(o)){const y=Ec(o);if(y.isSome())return y.map(w=>Oc(o,[w])[0]).getOr(v.createRange())}try{const y=d();y&&!za(y.anchorNode)&&(m=y.rangeCount>0?y.getRangeAt(0):v.createRange(),m=Oc(o,[m])[0])}catch{}if(m||(m=v.createRange()),hs(m.startContainer)&&m.collapsed){const y=t.getRoot();m.setStart(y,0),m.setEnd(y,0)}return r&&s&&(0===b(m.START_TO_START,m,r)&&0===b(m.END_TO_END,m,r)?m=s:(r=null,s=null)),m},u=(m,b)=>{if(!((y=m)&&dy(y.startContainer)&&dy(y.endContainer)))return;var y;const v=d();if(m=o.dispatch("SetSelectionRange",{range:m,forward:b}).range,v){s=m;try{v.removeAllRanges(),v.addRange(m)}catch{}!1===b&&v.extend&&(v.collapse(m.endContainer,m.endOffset),v.extend(m.startContainer,m.startOffset)),r=v.rangeCount>0?v.getRangeAt(0):null}if(!m.collapsed&&m.startContainer===m.endContainer&&v?.setBaseAndExtent&&m.endOffset-m.startOffset<2&&m.startContainer.hasChildNodes()){const y=m.startContainer.childNodes[m.startOffset];y&&"IMG"===y.nodeName&&(v.setBaseAndExtent(m.startContainer,m.startOffset,m.endContainer,m.endOffset),v.anchorNode===m.startContainer&&v.focusNode===m.endContainer||v.setBaseAndExtent(y,0,y,1))}o.dispatch("AfterSetSelectionRange",{range:m,forward:b})},g=()=>{const m=d(),b=m?.anchorNode,v=m?.focusNode;if(!m||!b||!v||za(b)||za(v))return!0;const y=t.createRng(),w=t.createRng();try{y.setStart(b,m.anchorOffset),y.collapse(!0),w.setStart(v,m.focusOffset),w.collapse(!0)}catch{return!0}return y.compareBoundaryPoints(y.START_TO_START,w)<=0},p={dom:t,win:e,serializer:n,editor:o,expand:(m={type:"word"})=>u(Xo(t).expand(c(),m)),collapse:l,setCursorLocation:(m,b)=>{const v=t.createRng();Y(m)&&Y(b)?(v.setStart(m,b),v.setEnd(m,b),u(v),l(!1)):(sc(t,v,o.getBody(),!0),u(v))},getContent:m=>((b,v={})=>{return w=v.format?v.format:"html",k=v,Mt(b).selection.getContent(w,k);var w,k})(o,m),setContent:i,getBookmark:(m,b)=>f.getBookmark(m,b),moveToBookmark:m=>f.moveToBookmark(m),select:(m,b)=>{return(v=t,y=m,w=b,C.from(y).bind(k=>C.from(k.parentNode).map(x=>{const S=v.nodeIndex(k),E=v.createRng();return E.setStart(x,S),E.setEnd(x,S+1),w&&(sc(v,E,k,!0),sc(v,E,k,!1)),E}))).each(u),m;var v,y,w},isCollapsed:()=>{const m=c(),b=d();return!(!m||m.item)&&(m.compareEndPoints?0===m.compareEndPoints("StartToEnd",m):!b||m.collapsed)},isEditable:()=>{const m=c(),b=o.getBody().querySelectorAll('[data-mce-selected="1"]');return b.length>0?Yn(b,v=>t.isEditable(v.parentElement)):m.startContainer===m.endContainer?t.isEditable(m.startContainer):t.isEditable(m.startContainer)&&t.isEditable(m.endContainer)},isForward:g,setNode:m=>(i(t.getOuterHTML(m)),m),getNode:()=>((m,b)=>{if(!b)return m;let v=b.startContainer,y=b.endContainer;const w=b.startOffset,k=b.endOffset;let x=b.commonAncestorContainer;b.collapsed||(v===y&&k-w<2&&v.hasChildNodes()&&(x=v.childNodes[w]),j(v)&&j(y)&&(v=v.length===w?Tb(v.nextSibling,!0):v.parentNode,y=0===k?Tb(y.previousSibling,!1):y.parentNode,v&&v===y&&(x=v)));const S=j(x)?x.parentNode:x;return Q(S)?S:m})(o.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:m=>Ab(o.getBody(),c(),m),getEnd:m=>Ob(o.getBody(),c(),m),getSelectedBlocks:(m,b)=>((v,y,w,k)=>{const x=[],S=v.getRoot(),E=v.getParent(w||Ab(S,y,y.collapsed),v.isBlock),_=v.getParent(k||Ob(S,y,y.collapsed),v.isBlock);if(E&&E!==S&&x.push(E),E&&_&&E!==_){let D;const T=new qt(E,S);for(;(D=T.next())&&D!==_;)v.isBlock(D)&&x.push(D)}return _&&E!==_&&_!==S&&x.push(_),x})(t,c(),m,b),normalize:()=>{const m=c(),b=d();if(!(nc(b).length>1)&&vi(o)){const v=_i(t,m);return v.each(y=>{u(y,g())}),v.getOr(m)}return m},selectorChanged:(m,b)=>(a(m,b),p),selectorChangedWithUnbind:a,getScrollContainer:()=>{let m,b=t.getRoot();for(;b&&"BODY"!==b.nodeName;){if(b.scrollHeight>b.clientHeight){m=b;break}b=b.parentNode}return m},scrollIntoView:(m,b)=>{var v;Y(m)?((v=o).inline?WS:GS)(v,m,b):qs(o,c(),b)},placeCaretAt:(m,b)=>u(lb(m,b,o.getDoc())),getBoundingClientRect:()=>{const m=c();return m.collapsed?L.fromRangeStart(m).getClientRects()[0]:m.getBoundingClientRect()},destroy:()=>{e=r=s=null,h.destroy()}},f=Hs(p),h=ob(p,o);return p.bookmarkManager=f,p.controlSelection=h,p},_N=(t,e,n)=>{-1===$.inArray(e,n)&&(t.addAttributeFilter(n,(o,r)=>{let s=o.length;for(;s--;)o[s].attr(r,null)}),e.push(n))},uy=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],o=e&&e.dom?e.dom:Et.DOM,r=e&&e.schema?e.schema:ro(t);t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs;const s=Ir(t,r);return i=t,l=o,(a=s).addAttributeFilter("data-mce-tabindex",(d,c)=>{let u=d.length;for(;u--;){const g=d[u];g.attr("tabindex",g.attr("data-mce-tabindex")),g.attr(c,null)}}),a.addAttributeFilter("src,href,style",(d,c)=>{const u="data-mce-"+c,g=i.url_converter,p=i.url_converter_scope;let f=d.length;for(;f--;){const h=d[f];let m=h.attr(u);void 0!==m?(h.attr(c,m.length>0?m:null),h.attr(u,null)):(m=h.attr(c),"style"===c?m=l.serializeStyle(l.parseStyle(m),h.name):g&&(m=g.call(p,m,c,h.name)),h.attr(c,m.length>0?m:null))}}),a.addAttributeFilter("class",d=>{let c=d.length;for(;c--;){const u=d[c];let g=u.attr("class");g&&(g=g.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),u.attr("class",g.length>0?g:null))}}),a.addAttributeFilter("data-mce-type",(d,c,u)=>{let g=d.length;for(;g--;){const p=d[g];"bookmark"===p.attr("data-mce-type")&&!u.cleanup&&(C.from(p.firstChild).exists(h=>{var m;return!Ka(null!==(m=h.value)&&void 0!==m?m:"")})?p.unwrap():p.remove())}}),a.addNodeFilter("noscript",d=>{var c;let u=d.length;for(;u--;){const g=d[u].firstChild;g&&(g.value=oo.decode(null!==(c=g.value)&&void 0!==c?c:""))}}),a.addNodeFilter("script,style",(d,c)=>{var u;const g=f=>f.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let p=d.length;for(;p--;){const f=d[p],h=f.firstChild,m=null!==(u=h?.value)&&void 0!==u?u:"";if("script"===c){const b=f.attr("type");b&&f.attr("type","mce-no/type"===b?null:b.replace(/^mce\-/,"")),"xhtml"===i.element_format&&h&&m.length>0&&(h.value="// <![CDATA[\n"+g(m)+"\n// ]]>")}else"xhtml"===i.element_format&&h&&m.length>0&&(h.value="\x3c!--\n"+g(m)+"\n--\x3e")}}),a.addNodeFilter("#comment",d=>{let c=d.length;for(;c--;){const u=d[c],g=u.value;i.preserve_cdata&&0===g?.indexOf("[CDATA[")?(u.name="#cdata",u.type=4,u.value=l.decode(g.replace(/^\[CDATA\[|\]\]$/g,""))):0===g?.indexOf("mce:protected ")&&(u.name="#text",u.type=3,u.raw=!0,u.value=unescape(g).substr(14))}}),a.addNodeFilter("xml:namespace,input",(d,c)=>{let u=d.length;for(;u--;){const g=d[u];7===g.type?g.remove():1===g.type&&("input"!==c||g.attr("type")||g.attr("type","text"))}}),a.addAttributeFilter("data-mce-type",d=>{H(d,c=>{"format-caret"===c.attr("data-mce-type")&&(c.isEmpty(a.schema.getNonEmptyElements())?c.remove():c.unwrap())})}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(d,c)=>{let u=d.length;for(;u--;)d[u].attr(c,null)}),{schema:r,addNodeFilter:s.addNodeFilter,addAttributeFilter:s.addAttributeFilter,serialize:(a,i={})=>{const l={format:"html",...i},d=(p=a,m=f=l,Y(h=g=e)&&h.hasEventListeners("PreProcess")&&!m.no_events?((h,m,b)=>{let v;const y=h.dom;let w=m.cloneNode(!0);const k=document.implementation;if(k.createHTMLDocument){const x=k.createHTMLDocument("");$.each("BODY"===w.nodeName?w.childNodes:[w],S=>{x.body.appendChild(x.importNode(S,!0))}),w="BODY"!==w.nodeName?x.body.firstChild:x.body,v=y.doc,y.doc=x}return S={...b,node:w},h.dispatch("PreProcess",S),v&&(y.doc=v),w;var S})(g,p,f):p),c=((g,p,f)=>{const h=jn(f.getInner?p.innerHTML:g.getOuterHTML(p));return f.selection||qa(N(p))?h:$.trim(h)})(o,d,l),u=((g,p,f)=>{const h=f.selection?{forced_root_block:!1,...f}:f,m=g.parse(p,h);return(b=>{const v=w=>"br"===w?.name,y=b.lastChild;if(v(y)){const w=y.prev;v(w)&&(y.remove(),w.remove())}})(m),m})(s,c,l);var g,p,f,h,m;return"tree"===l.format?u:((g,p,f,h,m)=>{var w;return((v,y,w)=>{return!y.no_events&&v?(x=v,S={...y,content:w},x.dispatch("PostProcess",S)).content:w;var x,S})(g,m,(w=h,uo(p,f).serialize(w)))})(e,t,r,u,l)},addRules:r.addValidElements,setRules:r.setValidElements,addTempAttr:Z(_N,s,n),getTempAttrs:G(n),getNodeFilters:s.getNodeFilters,getAttributeFilters:s.getAttributeFilters,removeNodeFilter:s.removeNodeFilter,removeAttributeFilter:s.removeAttributeFilter};var a,i,l})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Iu=(t,e,n={})=>{const o=(r=n,s=e,{format:"html",...r,set:!0,content:s});var r,s;return Au(t,o).map(r=>{const s=(i=r.content,l=r,Mu(t).editor.setContent(i,l));var i,l;return Ou(t,s.html,r),s.content}).getOr(e)},RN="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),AN="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),ON="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),my=[{name:"template",replacedWith:"Advanced Template"}],fy=(t,e)=>{const n=ct(e,o=>pt(t,o));return ko(n)},gy=(t,e)=>{const n=$.makeMap(t.plugins," "),o=ct(e,r=>pt(n,r));return ko(o)},LN=t=>$t(my,e=>e.name===t).fold(()=>t,e=>`${t}, replaced by ${e.replacedWith}`),Ki=Et.DOM,Gi=t=>C.from(t).each(e=>e.destroy()),Yi=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>pt(t,e)}})(),Fr=de.ModelManager,py=(t,e)=>e.dom[t],hy=(t,e)=>parseInt(bn(e,t),10),MN=Z(py,"clientWidth"),IN=Z(py,"clientHeight"),FN=Z(hy,"margin-top"),UN=Z(hy,"margin-left"),by=t=>{const e=[],n=()=>{const l=t.theme;return l&&l.getNotificationManagerImpl?l.getNotificationManagerImpl():(()=>{const d=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:d,close:d,getArgs:d}})()},o=()=>C.from(e[0]),r=()=>{H(e,l=>{l.reposition()})},s=l=>{es(e,d=>d===l).each(d=>{e.splice(d,1)})},a=(l,d=!0)=>{return t.removed||!(u=(c=t).inline?c.getBody():c.getContentAreaContainer(),C.from(u).map(N)).map(br).getOr(!1)?{}:(d&&t.dispatch("BeforeOpenNotification",{notification:l}),$t(e,c=>{return!((u=n().getArgs(c)).type!==(g=l).type||u.text!==g.text||u.progressBar||u.timeout||g.progressBar||g.timeout);var u,g}).getOrThunk(()=>{t.editorManager.setActive(t);const c=n().open(l,()=>{s(c),r(),o().fold(()=>t.focus(),u=>wb(N(u.getEl())))});return(u=>{e.push(u)})(c),r(),t.dispatch("OpenNotification",{notification:{...c}}),c}));var c,u},i=G(e);return(l=t).on("SkinLoaded",()=>{const d=kE(l);d&&a({text:d,type:"warning",timeout:0},!1),r()}),l.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),l.on("remove",()=>{H(e.slice(),d=>{n().close(d)})}),{open:a,close:()=>{o().each(l=>{n().close(l),s(l),r()})},getNotifications:i};var l},Ur=de.PluginManager,rr=de.ThemeManager,vy=t=>{let e=[];const n=()=>{const a=t.theme;return a&&a.getWindowManagerImpl?a.getWindowManagerImpl():(()=>{const i=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:i,openUrl:i,alert:i,confirm:i,close:i}})()},o=(a,i)=>(...l)=>i?i.apply(a,l):void 0,r=a=>{t.dispatch("CloseWindow",{dialog:a}),e=ct(e,i=>i!==a),0===e.length&&t.focus()},s=a=>{t.editorManager.setActive(t),kc(t),t.ui.show();const i=a();return e.push(l=i),t.dispatch("OpenWindow",{dialog:l}),i;var l};return t.on("remove",()=>{H(e,a=>{n().close(a)})}),{open:(a,i)=>s(()=>n().open(a,i,r)),openUrl:a=>s(()=>n().openUrl(a,r)),alert:(a,i,l)=>{const d=n();d.alert(a,o(l||d,i))},confirm:(a,i,l)=>{const d=n();d.confirm(a,o(l||d,i))},close:()=>{C.from(e[e.length-1]).each(a=>{n().close(a),r(a)})}}},yy=(t,e)=>{t.notificationManager.open({type:"error",text:e})},Xi=(t,e)=>{t._skinLoaded?yy(t,e):t.on("SkinLoaded",()=>{yy(t,e)})},ea=(t,e,n)=>{Xh(t,e,{message:n}),console.error(n)},na=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,Qi=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},Cy=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",o=`content${t.editorManager.suffix}.css`;return yt(e,r=>/^[a-z0-9\-]+$/i.test(r)&&!t.inline?`${n}/${r}/${o}`:t.documentBaseURI.toAbsolute(r))},wy=()=>{let t={};const e=(o,r)=>({status:o,resultUri:r}),n=o=>o in t;return{hasBlobUri:n,getResultUri:o=>{const r=t[o];return r?r.resultUri:null},isPending:o=>!!n(o)&&1===t[o].status,isUploaded:o=>!!n(o)&&2===t[o].status,markPending:o=>{t[o]=e(1,null)},markUploaded:(o,r)=>{t[o]=e(2,r)},removeFailed:o=>{delete t[o]},destroy:()=>{t={}}}};let jN=0;const xy=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),ky=(t,e)=>((t,e)=>{const n={},o=(l,d)=>new Promise((c,u)=>{const g=new XMLHttpRequest;g.open("POST",e.url),g.withCredentials=e.credentials,g.upload.onprogress=f=>{d(f.loaded/f.total*100)},g.onerror=()=>{u("Image upload failed due to a XHR Transport error. Code: "+g.status)},g.onload=()=>{if(g.status<200||g.status>=300)return void u("HTTP Error: "+g.status);const f=JSON.parse(g.responseText);var h,m;f&&at(f.location)?c((m=f.location,(h=e.basePath)?h.replace(/\/$/,"")+"/"+m.replace(/^\//,""):m)):u("Invalid JSON: "+g.responseText)};const p=new FormData;p.append("file",l.blob(),l.filename()),g.send(p)}),r=Ct(e.handler)?e.handler:o,s=(l,d)=>({url:d,blobInfo:l,status:!0}),a=(l,d)=>({url:"",blobInfo:l,status:!1,error:d}),i=(l,d)=>{$.each(n[l],c=>{c(d)}),delete n[l]};return{upload:(l,d)=>{return e.url||r!==o?(u=d,c=$.grep(c=l,g=>!t.isUploaded(g.blobUri())),Promise.all($.map(c,g=>{return t.isPending(g.blobUri())?(p=>{const f=p.blobUri();return new Promise(h=>{n[f]=n[f]||[],n[f].push(h)})})(g):(f=r,h=u,t.markPending((p=g).blobUri()),new Promise(m=>{let b,v;try{const y=()=>{b&&(b.close(),v=bt)},w=x=>{y(),t.markUploaded(p.blobUri(),x),i(p.blobUri(),s(p,x)),m(s(p,x))},k=x=>{y(),t.removeFailed(p.blobUri()),i(p.blobUri(),a(p,x)),m(a(p,x))};v=x=>{x<0||x>100||C.from(b).orThunk(()=>C.from(h).map(Ul)).each(S=>{b=S,S.progressBar.value(x)})},f(p,v).then(w,x=>{k(at(x)?{message:x}:x)})}catch(y){m(a(p,y))}}));var p,f,h}))):new Promise(c=>{c([])});var c,u}}})(e,{url:cE(t),basePath:uE(t),credentials:mE(t),handler:fE(t)}),Ey={remove_similar:!0,inherit:!1},zr={selector:"td,th",...Ey},VN={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...zr},tablecellverticalalign:{styles:{"vertical-align":"%value"},...zr},tablecellbordercolor:{styles:{borderColor:"%value"},...zr},tablecellclass:{classes:["%value"],...zr},tableclass:{selector:"table",classes:["%value"],...Ey},tablecellborderstyle:{styles:{borderStyle:"%value"},...zr},tablecellborderwidth:{styles:{borderWidth:"%value"},...zr}},qN=G(VN),Ji=$.each,qe=Et.DOM,Fu=t=>Y(t)&&le(t),Sy=(t,e)=>{const n=e&&e.schema||ro({}),o=a=>{const i=at(a)?{name:a,classes:[],attrs:{}}:a,l=qe.create(i.name);return d=l,(c=i).classes.length>0&&qe.addClass(d,c.classes.join(" ")),qe.setAttribs(d,c.attrs),l;var d,c},r=(a,i,l)=>{let d;const c=i[0],u=Fu(c)?c.name:void 0,g=((h,m)=>{const v=n.getElementRule(h.nodeName.toLowerCase())?.parentsRequired;return!(!v||!v.length)&&(m&&St(v,m)?m:v[0])})(a,u);if(g)u===g?(d=c,i=i.slice(1)):d=g;else if(c)d=c,i=i.slice(1);else if(!l)return a;const p=d?o(d):qe.create("div");p.appendChild(a),l&&$.each(l,h=>{const m=o(h);p.insertBefore(m,a)});const f=Fu(d)?d.siblings:void 0;return r(p,i,f)},s=qe.create("div");if(t.length>0){const a=t[0],i=o(a),l=Fu(a)?a.siblings:void 0;s.appendChild(r(i,t.slice(1),l))}return s},WN=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=$.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(o,r,s,a,i)=>{switch(r){case"#":n.attrs.id=s;break;case".":n.classes.push(s);break;case":":-1!==$.inArray("checked disabled enabled read-only required".split(" "),s)&&(n.attrs[s]=s)}if("["===a){const l=i.match(/([\w\-]+)(?:\=\"([^\"]+))?/);l&&(n.attrs[l[1]]=l[2])}return""})),n.name=e||"div",n},KN=(t,e)=>{let n="",o=NE(t);if(""===o)return"";const r=p=>at(p)?p.replace(/%(\w+)/g,""):"",s=(p,f)=>qe.getStyle(f??t.getBody(),p,!0);if(at(e)){const p=t.formatter.get(e);if(!p)return"";e=p[0]}if("preview"in e){const p=e.preview;if(!1===p)return"";o=p||o}let a,i=e.block||e.inline||"span";const l=at(d=e.selector)?(d=(d=d.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),$.map(d.split(/(?:>|\s+(?![^\[\]]+\]))/),p=>{const f=$.map(p.split(/(?:~\+|~|\+)/),WN),h=f.pop();return f.length&&(h.siblings=f),h}).reverse()):[];var d;l.length>0?(l[0].name||(l[0].name=i),i=e.selector,a=Sy(l,t)):a=Sy([i],t);const c=qe.select(i,a)[0]||a.firstChild;Ji(e.styles,(p,f)=>{const h=r(p);h&&qe.setStyle(c,f,h)}),Ji(e.attributes,(p,f)=>{const h=r(p);h&&qe.setAttrib(c,f,h)}),Ji(e.classes,p=>{const f=r(p);qe.hasClass(c,f)||qe.addClass(c,f)}),t.dispatch("PreviewFormats"),qe.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const u=s("fontSize"),g=/px$/.test(u)?parseInt(u,10):0;return Ji(o.split(" "),p=>{let f=s(p,c);if(!("background-color"===p&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(f)&&(f=s(p),"#ffffff"===bi(f).toLowerCase())||"color"===p&&"#000000"===bi(f).toLowerCase())){if("font-size"===p&&/em|%$/.test(f)){if(0===g)return;f=parseFloat(f)/(/%$/.test(f)?100:1)*g+"px"}"border"===p&&f&&(n+="padding:0 2px;"),n+=p+":"+f+";"}}),t.dispatch("AfterPreviewFormats"),qe.remove(a),n},_y=t=>{const e=(o=>{const r={},s=(a,i)=>{a&&(at(a)?(Ht(i)||(i=[i]),H(i,l=>{me(l.deep)&&(l.deep=!He(l)),me(l.split)&&(l.split=!He(l)||Wt(l)),me(l.remove)&&He(l)&&!Wt(l)&&(l.remove="none"),He(l)&&Wt(l)&&(l.mixed=!0,l.block_expand=!0),at(l.classes)&&(l.classes=l.classes.split(/\s+/))}),r[a]=i):_t(a,(l,d)=>{s(d,l)}))};return s((a=>{const i=a.dom,l=a.schema.type,d={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:c=>{i.setStyle(c,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const c={inline:"span",styles:{textDecoration:"line-through"},exact:!0},u={inline:"strike",remove:"all",preserve_attributes:["class","style"]},g={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==l?[g,c,u]:[c,g,u]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(c,u,g)=>Q(c)&&c.hasAttribute("href"),onformat:(c,u,g)=>{$.each(g,(p,f)=>{i.setAttrib(c,f,p)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":c=>{var u;return null!==(u=c?.customValue)&&void 0!==u?u:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return $.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),c=>{d[c]={block:c,remove:"all"}}),d})(o)),s(qN()),s(_E(o)),{get:a=>Y(a)?r[a]:r,has:a=>pt(r,a),register:s,unregister:a=>(a&&r[a]&&delete r[a],r)}})(t),n=Kt({});return(o=>{o.addShortcut("meta+b","","Bold"),o.addShortcut("meta+i","","Italic"),o.addShortcut("meta+u","","Underline");for(let r=1;r<=6;r++)o.addShortcut("access+"+r,"",["FormatBlock",!1,"h"+r]);o.addShortcut("access+7","",["FormatBlock",!1,"p"]),o.addShortcut("access+8","",["FormatBlock",!1,"div"]),o.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(o=t).on("mouseup keydown",r=>{((s,a)=>{const i=s.selection,l=s.getBody();mu(s,null,!1),8!==a&&46!==a||!i.isCollapsed()||i.getStart().innerHTML!==Mr||mu(s,Ko(l,i.getStart())),37!==a&&39!==a||mu(s,Ko(l,i.getStart()))})(o,r.keyCode)}),Nn(t)||((o,r)=>{o.set({}),r.on("NodeChange",s=>{Cv(r,s.element,o.get())}),r.on("FormatApply FormatRemove",s=>{const a=C.from(s.node).map(i=>yi(i)?i:i.startContainer).bind(i=>Q(i)?C.some(i):C.from(i.parentElement)).getOrThunk(()=>bv(r));Cv(r,a,o.get())})})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Mt(t).formatter.apply(i,l,d)},remove:(o,r,s,a)=>{var l,d,c,u;l=o,d=r,c=s,u=a,Mt(t).formatter.remove(l,d,c,u)},toggle:(o,r,s)=>{var i,l,d;i=o,l=r,d=s,Mt(t).formatter.toggle(i,l,d)},match:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Mt(t).formatter.match(l,d,c,u);var l,d,c,u},closest:o=>{return s=o,Mt(t).formatter.closest(s);var s},matchAll:(o,r)=>{return a=o,i=r,Mt(t).formatter.matchAll(a,i);var a,i},matchNode:(o,r,s,a)=>{return l=o,d=r,c=s,u=a,Mt(t).formatter.matchNode(l,d,c,u);var l,d,c,u},canApply:o=>{return s=o,Mt(t).formatter.canApply(s);var s},formatChanged:(o,r,s,a)=>{return l=n,d=o,c=r,u=s,g=a,Mt(t).formatter.formatChanged(l,d,c,u,g);var l,d,c,u,g},getCssText:Z(KN,t)};var o},Ny=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},Ry=t=>{const e=so(),n=Kt(0),o=Kt(0),r={data:[],typing:!1,beforeChange:()=>{var a,i;a=n,i=e,Mt(t).undoManager.beforeChange(a,i)},add:(s,a)=>{return l=r,d=o,c=n,u=e,g=s,p=a,Mt(t).undoManager.add(l,d,c,u,g,p);var l,d,c,u,g,p},dispatchChange:()=>{t.setDirty(!0);const s=qi(t);s.bookmark=Ud(t.selection),t.dispatch("change",{level:s,lastLevel:_a(r.data,o.get()).getOrUndefined()})},undo:()=>{return a=r,i=n,l=o,Mt(t).undoManager.undo(a,i,l);var a,i,l},redo:()=>{return a=o,i=r.data,Mt(t).undoManager.redo(a,i);var a,i},clear:()=>{var a,i;a=r,i=o,Mt(t).undoManager.clear(a,i)},reset:()=>{var a;a=r,Mt(t).undoManager.reset(a)},hasUndo:()=>{return a=r,i=o,Mt(t).undoManager.hasUndo(a,i);var a,i},hasRedo:()=>{return a=r,i=o,Mt(t).undoManager.hasRedo(a,i);var a,i},transact:s=>{return i=r,l=n,d=s,Mt(t).undoManager.transact(i,l,d);var i,l,d},ignore:s=>{var i,l;i=n,l=s,Mt(t).undoManager.ignore(i,l)},extra:(s,a)=>{var l,d,c,u;l=r,d=o,c=s,u=a,Mt(t).undoManager.extra(l,d,c,u)}};return Nn(t)||((s,a,i)=>{const l=Kt(!1),d=c=>{Wi(a,!1,i),a.add({},c)};s.on("init",()=>{a.add()}),s.on("BeforeExecCommand",c=>{Ny(c.command)||(oy(a,i),a.beforeChange())}),s.on("ExecCommand",c=>{Ny(c.command)||d(c)}),s.on("ObjectResizeStart cut",()=>{a.beforeChange()}),s.on("SaveContent ObjectResized blur",d),s.on("dragend",d),s.on("keyup",c=>{const u=c.keyCode;c.isDefaultPrevented()||((u>=33&&u<=36||u>=37&&u<=40||45===u||c.ctrlKey)&&(d(),s.nodeChanged()),46!==u&&8!==u||s.nodeChanged(),l.get()&&a.typing&&!Pu(qi(s),a.data[0])&&(s.isDirty()||s.setDirty(!0),s.dispatch("TypingUndo"),l.set(!1),s.nodeChanged()))}),s.on("keydown",c=>{const u=c.keyCode;c.isDefaultPrevented()||(u>=33&&u<=36||u>=37&&u<=40||45===u?a.typing&&d(c):!(u<16||u>20)||224===u||91===u||a.typing||c.ctrlKey&&!c.altKey||c.metaKey||(a.beforeChange(),Wi(a,!0,i),a.add({},c),l.set(!0)))}),s.on("mousedown",c=>{a.typing&&d(c)}),s.on("input",c=>{var u,g;c.inputType&&("insertReplacementText"===c.inputType||"insertText"===(u=c).inputType&&null===u.data||"insertFromPaste"===(g=c).inputType||"insertFromDrop"===g.inputType)&&d(c)}),s.on("AddUndo Undo Redo ClearUndos",c=>{c.isDefaultPrevented()||s.nodeChanged()})})(t,r,n),(s=t).addShortcut("meta+z","","Undo"),s.addShortcut("meta+y,meta+shift+z","","Redo"),r;var s},GN=[9,27,tt.HOME,tt.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,tt.DOWN,tt.UP,tt.LEFT,tt.RIGHT].concat(vt.browser.isFirefox()?[224]:[]),Ay="data-mce-placeholder",Oy=t=>"keydown"===t.type||"keyup"===t.type,Ty=t=>{const e=t.keyCode;return e===tt.BACKSPACE||e===tt.DELETE},YN=(t,e)=>({from:t,to:e}),Uu=(t,e)=>{const n=N(t),o=N(e.container());return Di(n,o).map(r=>({block:r,position:e}))},By=(t,e)=>Ao(e,n=>ys(n)||on(n.dom),n=>wt(n,t)).filter(xe).getOr(t),Dy=t=>{const e=(n=>{const o=ne(n);return es(o,Ie).fold(G(o),r=>o.slice(0,r))})(t);return H(e,Ot),e},Py=(t,e)=>{const n=Vn(e,t);return $t(n.reverse(),o=>Ft(o)).each(Ot)},XN=(t,e,n,o)=>{if(Ft(n))return Lo(n),he(n.dom);0===ct(Zf(o),s=>!Ft(s)).length&&Ft(e)&&Me(o,Qt("br"));const r=ze(n.dom,L.before(o.dom));return H(Dy(e),s=>{Me(o,s)}),Py(t,e),r},QN=(t,e,n)=>{if(Ft(n)){if(Ft(e)){const s=ts((a=>{const i=(l,d)=>ed(l).fold(()=>d,c=>Va(c)?i(c,d.concat(jo(c))):d);return i(a,[])})(n),(a,i)=>(ug(a,i),i),Wa());vr(e),Vt(e,s)}return Ot(n),he(e.dom)}const o=kn(n.dom);return H(Dy(e),r=>{Vt(n,r)}),Py(t,e),o},Ly=(t,e)=>{Ar(t,e.dom).bind(n=>C.from(n.getNode())).map(N).filter(Po).each(Ot)},My=(t,e,n)=>{return Ly(!0,e),Ly(!1,n),(o=e,r=n,Mn(r,o)?((s,a)=>{const i=Vn(a,s);return C.from(i[i.length-1])})(r,o):C.none()).fold(Z(QN,t,e,n),Z(XN,t,e,n));var o,r},Iy=(t,e,n,o)=>e?My(t,o,n):My(t,n,o),zu=(t,e)=>{const n=N(t.getBody());return(r=n.dom,s=e,a=t.selection.getRng(),a.collapsed?((i,l,d)=>{const c=Uu(i,L.fromRangeStart(d)),u=c.bind(g=>Ue(l,i,g.position).bind(p=>Uu(i,p).map(f=>{return h=i,m=l,Lt((b=f).position.getNode())&&!Ft(b.block)?Ar(!1,b.block.dom).bind(v=>v.isEqual(b.position)?Ue(m,h,v).bind(y=>Uu(h,y)):C.some(b)).getOr(b):b;var h,m,b})));return ge(c,u,YN).filter(g=>{return!wt((p=g).from.block,p.to.block)&&((p,f)=>{const h=N(p);return wt(By(h,f.from.block),By(h,f.to.block))})(i,g)&&(p=>!1===Nt(p.from.block.dom)&&!1===Nt(p.to.block.dom))(g)&&(p=>{const f=h=>Sg(h)||vd(h.dom);return f(p.from.block)&&f(p.to.block)})(g);var p})})(r,s,a):C.none()).map(r=>()=>{Iy(n,e,r.from.block,r.to.block).each(s=>{t.selection.setRng(s.toRange())})});var r,s,a},Fy=(t,e)=>{const n=N(e),o=Z(wt,t);return Fn(n,ys,o).isSome()},ju=(t,e)=>t.selection.isCollapsed()?C.none():(t=>{const e=N(t.getBody());return((n,o)=>{const r=ze(n.dom,L.fromRangeStart(o)).isNone(),s=ke(n.dom,L.fromRangeEnd(o)).isNone();return!(Fy(a=n,(i=o).startContainer)||Fy(a,i.endContainer))&&r&&s;var a,i})(e,t.selection.getRng())?(n=t,C.some(()=>{n.setContent(""),n.selection.setCursorLocation()})):((n,o)=>{const r=o.getRng();return ge(Di(n,N(r.startContainer)),Di(n,N(r.endContainer)),(s,a)=>wt(s,a)?C.none():C.some(()=>{r.deleteContents(),Iy(n,!0,s,a).each(i=>{o.setRng(i.toRange())})})).getOr(C.none())})(e,t.selection);var n})(t),qn=(t,e,n,o,r)=>C.from(e._selectionOverrides.showCaret(t,n,o,r)),oa=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?C.none():C.some((n=>{const o=n.ownerDocument.createRange();return o.selectNode(n),o})(e)),Hu=(t,e,n)=>e.collapsed?((o,r,s)=>{const a=Gd(1,o.getBody(),r),i=L.fromRangeStart(a),l=i.getNode();if(Ps(l))return qn(1,o,l,!i.isAtEnd(),!1);const d=i.getNode(!0);if(Ps(d))return qn(1,o,d,!1,!1);const c=tr(o.dom.getRoot(),i.getNode());return Ps(c)?qn(1,o,c,!1,s):C.none()})(t,e,n).getOr(e):e,ZN=t=>fo(t)||Ws(t),tR=t=>go(t)||Ks(t),Uy=(t,e,n,o,r,s)=>{var a,i;qn(o,t,s.getNode(!r),r,!0).each(a=>{if(e.collapsed){const i=e.cloneRange();r?i.setEnd(a.startContainer,a.startOffset):i.setStart(a.endContainer,a.endOffset),i.deleteContents()}else e.deleteContents();t.selection.setRng(a)}),a=t.dom,j(i=n)&&0===i.data.length&&a.remove(i)},$u=(t,e)=>((n,o)=>{const r=n.selection.getRng();if(!j(r.commonAncestorContainer))return C.none();const s=o?Gt.Forwards:Gt.Backwards,a=xn(n.getBody()),i=Z(Yd,o?a.next:a.prev),l=o?ZN:tR,d=Us(s,n.getBody(),r),c=i(d),u=c&&Ve(o,c);if(!u||!mi(d,u))return C.none();if(l(u))return C.some(()=>Uy(n,r,d.getNode(),s,o,u));const g=i(u);return g&&l(g)&&mi(u,g)?C.some(()=>Uy(n,r,d.getNode(),s,o,g)):C.none()})(t,e),Vu=(t,e)=>{const n=t.getBody();return e?he(n).filter(fo):kn(n).filter(go)},qu=t=>{const e=t.selection.getRng();return!e.collapsed&&(Vu(t,!0).exists(n=>n.isEqual(L.fromRangeStart(e)))||Vu(t,!1).exists(n=>n.isEqual(L.fromRangeEnd(e))))},We=yn([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),zy=(t,e,n)=>Ue(e,t,n).bind(o=>{return r=o.getNode(),Y(r)&&(ys(N(r))||vs(N(r)))||((s,a,i,l)=>{const d=c=>Va(N(c))&&!Cn(i,l,s);return fh(!a,i).fold(()=>fh(a,l).fold(Bt,d),d)})(t,e,n,o)?C.none():e&&Nt(o.getNode())||!e&&Nt(o.getNode(!0))?((s,a,i,l)=>{const d=l.getNode(!a);return Di(N(s),N(i.getNode())).map(c=>Ft(c)?We.remove(c.dom):We.moveToElement(d)).orThunk(()=>C.some(We.moveToElement(d)))})(t,e,n,o):e&&go(n)||!e&&fo(n)?C.some(We.moveToPosition(o)):C.none();var r}),jy=(t,e)=>C.from(tr(t.getBody(),e)),Hy=t=>{const e=t.dom,n=t.selection,o=tr(t.getBody(),n.getNode());if(on(o)&&e.isBlock(o)&&e.isEmpty(o)){const r=e.create("br",{"data-mce-bogus":"1"});e.setHTML(o,""),o.appendChild(r),n.setRng(L.before(r).toRange())}return!0},Wu=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return jy(t,n).filter(Nt).fold(()=>((o,r,s)=>{const a=Gd(r?1:-1,o,s),i=L.fromRangeStart(a),l=N(o);return!r&&go(i)?C.some(We.remove(i.getNode(!0))):r&&fo(i)?C.some(We.remove(i.getNode())):!r&&fo(i)&&Ic(l,i)?g_(l,i).map(d=>We.remove(d.getNode())):r&&go(i)&&Mc(l,i)?p_(l,i).map(d=>We.remove(d.getNode())):(d=o,((g,p)=>{const f=p.getNode(!g),h=g?"after":"before";return Q(f)&&f.getAttribute("data-mce-caret")===h})(c=r,u=i)?(g=c,p=u.getNode(!c),zt(p)?C.none():g&&Nt(p.nextSibling)?C.some(We.moveToElement(p.nextSibling)):!g&&Nt(p.previousSibling)?C.some(We.moveToElement(p.previousSibling)):C.none()).orThunk(()=>zy(d,c,u)):zy(d,c,u).bind(g=>((p,f,h)=>h.fold(m=>C.some(We.remove(m)),m=>C.some(We.moveToElement(m)),m=>Cn(f,m,p)?C.none():C.some(We.moveToPosition(m))))(d,u,g)));var d,c,u,g,p})(t.getBody(),e,t.selection.getRng()).map(o=>()=>{return o.fold((r=t,s=e,a=>(r._selectionOverrides.hideFakeCaret(),Jo(r,s,N(a)),!0)),((r,s)=>a=>{const i=s?L.before(a):L.after(a);return r.selection.setRng(i.toRange()),!0})(t,e),(r=>s=>(r.selection.setRng(s.toRange()),!0))(t));var r,s}),()=>C.some(bt))})(t,e):((n,o)=>{const r=n.selection.getNode();return Nt(r)&&!Ha(r)?jy(n,r.parentNode).filter(Nt).fold(()=>C.some(()=>{var s;s=N(n.getBody()),H(se(s,".mce-offscreen-selection"),Ot),Jo(n,o,N(n.selection.getNode())),$c(n)}),()=>C.some(bt)):qu(n)?C.some(()=>{b0(n,n.selection.getRng(),N(n.getBody()))}):C.none()})(t,e),Ku=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=L.fromRangeStart(n.selection.getRng());return Ue(o,n.getBody(),r).filter(s=>o?d_(s):c_(s)).bind(s=>Kd(o?0:-1,s)).map(s=>()=>n.selection.select(s))})(t,e):C.none(),jr=j,$y=t=>jr(t)&&t.data[0]===ae,Vy=t=>jr(t)&&t.data[t.data.length-1]===ae,qy=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(ae)},Zi=(t,e)=>t?(n=>{var o;if(jr(n.previousSibling))return Vy(n.previousSibling)||n.previousSibling.appendData(ae),n.previousSibling;if(jr(n))return $y(n)||n.insertData(0,ae),n;{const r=qy(n);return null===(o=n.parentNode)||void 0===o||o.insertBefore(r,n),r}})(e):(n=>{var o,r;if(jr(n.nextSibling))return $y(n.nextSibling)||n.nextSibling.insertData(0,ae),n.nextSibling;if(jr(n))return Vy(n)||n.appendData(ae),n;{const s=qy(n);return n.nextSibling?null===(o=n.parentNode)||void 0===o||o.insertBefore(s,n.nextSibling):null===(r=n.parentNode)||void 0===r||r.appendChild(s),s}})(e),nR=Z(Zi,!0),oR=Z(Zi,!1),Wy=(t,e)=>j(t.container())?Zi(e,t.container()):Zi(e,t.getNode()),Ky=(t,e)=>{const n=e.get();return n&&t.container()===n&&no(n)},Gu=(t,e)=>e.fold(n=>{qo(t.get());const o=nR(n);return t.set(o),C.some(L(o,o.length-1))},n=>he(n).map(o=>{if(Ky(o,t)){const r=t.get();return L(r,1)}{qo(t.get());const r=Wy(o,!0);return t.set(r),L(r,1)}}),n=>kn(n).map(o=>{if(Ky(o,t)){const r=t.get();return L(r,r.length-1)}{qo(t.get());const r=Wy(o,!1);return t.set(r),L(r,r.length-1)}}),n=>{qo(t.get());const o=oR(n);return t.set(o),C.some(L(o,1))}),Gy=(t,e)=>{for(let n=0;n<t.length;n++){const o=t[n].apply(null,e);if(o.isSome())return o}return C.none()},ce=yn([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Yy=(t,e)=>lo(e,t)||t,rR=(t,e,n)=>{const o=f0(n),r=Yy(e,o.container());return po(t,r,o).fold(()=>ke(r,o).bind(Z(po,t,r)).map(s=>ce.before(s)),C.none)},sR=(t,e)=>null===Ko(t,e),Xy=(t,e,n)=>po(t,e,n).filter(Z(sR,e)),aR=(t,e,n)=>{const o=g0(n);return Xy(t,e,o).bind(r=>ze(r,o).isNone()?C.some(ce.start(r)):C.none())},iR=(t,e,n)=>{const o=f0(n);return Xy(t,e,o).bind(r=>ke(r,o).isNone()?C.some(ce.end(r)):C.none())},lR=(t,e,n)=>{const o=g0(n),r=Yy(e,o.container());return po(t,r,o).fold(()=>ze(r,o).bind(Z(po,t,r)).map(s=>ce.after(s)),C.none)},Qy=t=>{return e=Yu(t),!("rtl"===Et.DOM.getStyle(e,"direction",!0)||(o=null!==(n=e.textContent)&&void 0!==n?n:"",w_.test(o)));var o,e,n},Rn=(t,e,n)=>Gy([rR,aR,iR,lR],[t,e,n]).filter(Qy),Yu=t=>t.fold(fe,fe,fe,fe),Jy=t=>t.fold(G("before"),G("start"),G("end"),G("after")),tl=t=>t.fold(ce.before,ce.before,ce.after,ce.after),Xu=t=>t.fold(ce.start,ce.start,ce.end,ce.end),dR=(t,e,n,o,r,s)=>ge(po(e,n,o),po(e,n,r),(a,i)=>a!==i&&((l,d,c)=>{const u=lo(d,l),g=lo(c,l);return Y(u)&&u===g})(n,a,i)?ce.after(t?a:i):s).getOr(s),cR=(t,e)=>t.fold(jt,n=>{return r=e,!(Jy(o=n)===Jy(r)&&Yu(o)===Yu(r));var o,r}),uR=(t,e)=>t?e.fold(xo(C.some,ce.start),C.none,xo(C.some,ce.after),C.none):e.fold(C.none,xo(C.some,ce.before),C.none,xo(C.some,ce.end)),Zy=(t,e,n)=>{const o=t?1:-1;return e.setRng(L(n.container(),n.offset()+o).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var An;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(An||(An={}));const el=(t,e)=>t===Gt.Backwards?ns(e):e,mR=(t,e,n)=>t===Gt.Forwards?e.next(n):e.prev(n),fR=(t,e,n,o)=>Lt(o.getNode(e===Gt.Forwards))?An.Br:!1===Cn(n,o)?An.Block:An.Wrap,tC=(t,e,n,o)=>{const r=xn(n);let s=o;const a=[];for(;s;){const i=mR(e,r,s);if(!i)break;if(Lt(i.getNode(!1)))return e===Gt.Forwards?{positions:el(e,a).concat([i]),breakType:An.Br,breakAt:C.some(i)}:{positions:el(e,a),breakType:An.Br,breakAt:C.some(i)};if(i.isVisible()){if(t(s,i)){const l=fR(0,e,s,i);return{positions:el(e,a),breakType:l,breakAt:C.some(i)}}a.push(i),s=i}else s=i}return{positions:el(e,a),breakType:An.Eol,breakAt:C.none()}},eC=(t,e,n,o)=>e(n,o).breakAt.map(r=>{const s=e(n,r).positions;return t===Gt.Backwards?s.concat(r):[r].concat(s)}).getOr([]),Qu=(t,e)=>Re(t,(n,o)=>n.fold(()=>C.some(o),r=>ge(we(r.getClientRects()),we(o.getClientRects()),(s,a)=>{const i=Math.abs(e-s.left);return Math.abs(e-a.left)<=i?o:r}).or(n)),C.none()),nl=(t,e)=>we(e.getClientRects()).bind(n=>Qu(t,n.left)),ra=Z(tC,L.isAbove,-1),sa=Z(tC,L.isBelow,1),nC=Z(eC,-1,ra),oC=Z(eC,1,sa),gR=(t,e)=>nl(nC(t,e),e),pR=(t,e)=>nl(oC(t,e),e),hR=Nt,rC=(t,e)=>Math.abs(t.left-e),sC=(t,e)=>Math.abs(t.right-e),aC=(t,e)=>Aa(t,(n,o)=>{const r=Math.min(rC(n,e),sC(n,e)),s=Math.min(rC(o,e),sC(o,e));return s===r&&mr(o,"node")&&hR(o.node)||s<r?o:n}),bR=t=>{const e=n=>yt(n,o=>{const r=$o(o);return r.node=t,r});if(Q(t))return e(t.getClientRects());if(j(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},iC=t=>fn(t,bR);var aa;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(aa||(aa={}));const lC=(t,e,n,o,r,s)=>{let a=0;const i=[],l=u=>{let g=iC([u]);-1===t&&(g=g.reverse());for(let p=0;p<g.length;p++){const f=g[p];if(!n(f,d)){if(i.length>0&&e(f,So(i))&&a++,f.line=a,r(f))return!0;i.push(f)}}return!1},d=So(s.getClientRects());if(!d)return i;const c=s.getNode();return c&&(l(c),((u,g,p,f)=>{let h=f;for(;h=Ms(h,u,Og,g);)if(p(h))return})(t,o,l,c)),i},vR=Z(lC,aa.Up,Rs,As),yR=Z(lC,aa.Down,As,Rs),dC=t=>So(t.getClientRects()),cC=t=>e=>e.line>t,Ju=t=>e=>e.line===t,Wn=(t,e)=>{t.selection.setRng(e),qs(t,t.selection.getRng())},Zu=(t,e,n)=>C.some(Hu(t,e,n)),uC=(t,e,n,o,r,s)=>{const a=e===Gt.Forwards,i=xn(t.getBody()),l=Z(Yd,a?i.next:i.prev),d=a?o:r;if(!n.collapsed){const f=ri(n);if(s(f))return qn(e,t,f,e===Gt.Backwards,!1);if(qu(t)){const h=n.cloneRange();return h.collapse(e===Gt.Backwards),C.from(h)}}const c=Us(e,t.getBody(),n);if(d(c))return oa(t,c.getNode(!a));let u=l(c);const g=Ng(n);if(!u)return g?C.some(n):C.none();if(u=Ve(a,u),d(u))return qn(e,t,u.getNode(!a),a,!1);const p=l(u);return p&&d(p)&&mi(u,p)?qn(e,t,p.getNode(!a),a,!1):g?Zu(t,u.toRange(),!1):C.none()},mC=(t,e,n,o,r,s)=>{const a=Us(e,t.getBody(),n),i=So(a.getClientRects()),l=e===aa.Down,d=t.getBody();if(!i)return C.none();if(qu(t)){const h=l?L.fromRangeEnd(n):L.fromRangeStart(n);return(l?pR:gR)(d,h).orThunk(()=>C.from(h)).map(m=>m.toRange())}const c=(l?yR:vR)(d,cC(1),a),u=ct(c,Ju(1)),g=i.left,p=aC(u,g);if(p&&s(p.node)){const h=Math.abs(g-p.left),m=Math.abs(g-p.right);return qn(e,t,p.node,h<m,!1)}let f;if(f=o(a)?a.getNode():r(a)?a.getNode(!0):ri(n),f){const h=((b,v,y,w)=>{const k=xn(v);let x,S,E,_;const D=[];let T=0;1===b?(x=k.next,S=As,E=Rs,_=L.after(w)):(x=k.prev,S=Rs,E=As,_=L.before(w));const P=dC(_);do{if(!_.isVisible())continue;const O=dC(_);if(E(O,P))continue;D.length>0&&S(O,So(D))&&T++;const F=$o(O);if(F.position=_,F.line=T,y(F))return D;D.push(F)}while(_=x(_));return D})(e,d,cC(1),f);let m=aC(ct(h,Ju(1)),g);if(m||(m=So(ct(h,Ju(0))),m))return Zu(t,m.position.toRange(),!1)}return 0===u.length?tm(t,l).filter(l?r:o).map(h=>Hu(t,h.toRange(),!1)):C.none()},tm=(t,e)=>{const n=t.selection.getRng(),o=e?L.fromRangeEnd(n):L.fromRangeStart(n),r=(s=o.container(),a=t.getBody(),Fn(N(s),i=>bS(i.dom),i=>i.dom===a).map(i=>i.dom).getOr(a));var s,a;if(e){const i=sa(r,o);return Eo(i.positions)}{const i=ra(r,o);return we(i.positions)}},fC=(t,e,n)=>tm(t,e).filter(n).exists(o=>(t.selection.setRng(o.toRange()),!0)),ol=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},gC=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},pC=(t,e,n)=>Gu(e,n).map(o=>(ol(t,o),n)),hC=(t,e,n)=>!!Ds(t)&&((t,e,n)=>{const o=t.getBody(),r=((s,a,i)=>{const l=L.fromRangeStart(s);if(s.collapsed)return l;{const d=L.fromRangeEnd(s);return i?ze(a,d).getOr(d):ke(a,l).getOr(l)}})(t.selection.getRng(),o,n);return((s,a,i,l)=>{const d=Ve(s,l),c=Rn(a,i,d);return Rn(a,i,d).bind(Z(uR,s)).orThunk(()=>((u,g,p,f,h)=>{const m=Ve(u,h);return Ue(u,p,m).map(Z(Ve,u)).fold(()=>f.map(tl),b=>Rn(g,p,b).map(Z(dR,u,g,p,m,b)).filter(Z(cR,f))).filter(Qy)})(s,a,i,c,l))})(n,Z(Zo,t),o,r).bind(s=>pC(t,e,s))})(t,e,n).isSome(),bC=(t,e,n)=>!!Ds(e)&&((o,r)=>{const s=r.selection.getRng(),a=o?L.fromRangeEnd(s):L.fromRangeStart(s);return!!Ct(r.selection.getSel().modify)&&(o&&md(a)?Zy(!0,r.selection,a):!(o||!fd(a))&&Zy(!1,r.selection,a))})(t,e),xR=Z(bC,!0),kR=Z(bC,!1),rl=(t,e,n)=>{if(Ds(t)){const o=tm(t,e).getOrThunk(()=>{const r=t.selection.getRng();return e?L.fromRangeEnd(r):L.fromRangeStart(r)});return Rn(Z(Zo,t),t.getBody(),o).exists(r=>{const s=tl(r);return Gu(n,s).exists(a=>(ol(t,a),!0))})}return!1},vC=(t,e)=>n=>Gu(e,n).map(o=>()=>ol(t,o)),yC=(t,e,n,o)=>{const r=t.getBody(),s=Z(Zo,t);t.undoManager.ignore(()=>{t.selection.setRng(((a,i)=>{const l=document.createRange();return l.setStart(a.container(),a.offset()),l.setEnd(i.container(),i.offset()),l})(n,o)),Hc(t),Rn(s,r,L.fromRangeStart(t.selection.getRng())).map(Xu).bind(vC(t,e)).each(Jr)}),t.nodeChanged()},em=(t,e,n)=>{if(t.selection.isCollapsed()&&Ds(t)){const o=L.fromRangeStart(t.selection.getRng());return((r,s,a,i)=>{const l=(u=r.getBody(),g=i.container(),lo(g,u)||u),d=Z(Zo,r),c=Rn(d,l,i);var u,g;return c.bind(u=>a?u.fold(G(C.some(Xu(u))),C.none,G(C.some(tl(u))),C.none):u.fold(C.none,G(C.some(tl(u))),C.none,G(C.some(Xu(u))))).map(vC(r,s)).getOrThunk(()=>{const u=gi(a,l,i),g=u.bind(p=>Rn(d,l,p));return ge(c,g,()=>po(d,l,i).bind(p=>{return ge(he(f=p),kn(f),(h,m)=>{const b=Ve(!0,h),v=Ve(!1,m);return ke(f,b).forall(y=>y.isEqual(v))}).getOr(!0)?C.some(()=>{Jo(r,a,N(p))}):C.none();var f})).getOrThunk(()=>g.bind(()=>u.map(p=>()=>{a?yC(r,s,i,p):yC(r,s,p,i)})))})})(t,e,n,o)}return C.none()},CC=(t,e)=>{const n=N(t.getBody()),o=N(t.selection.getStart()),r=Vn(o,n);return es(r,e).fold(G(r),s=>r.slice(0,s))},wC=(t,e)=>{const n=Z($0,t);return fn(e,o=>n(o)?[o.dom]:[])},xC=t=>{const e=CC(t,Ie);return wC(t,e)},kC=(t,e)=>{const n=t.selection.getStart(),o=((r,s)=>{const a=s.parentElement;return Lt(s)&&!Ge(a)&&r.dom.isEmpty(a)})(t,n)||V0(N(n))?H0(n,e):((r,s)=>{const{caretContainer:a,caretPosition:i}=j0(s);return r.selection.getRng().insertNode(a.dom),i})(t,e);t.selection.setRng(o.toRange())},EC=t=>j(t.startContainer),nm=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=CC(t,r=>Ie(r)||eg(r)>1);return Eo(n).bind(o=>{const r=L.fromRangeStart(t.selection.getRng());return s=e,a=r,ge(he(i=o.dom),kn(i),(l,d)=>{const c=Ve(!0,l),u=Ve(!1,d),g=Ve(!1,a);return s?ke(i,g).exists(p=>p.isEqual(u)&&a.isEqual(c)):ze(i,g).exists(p=>p.isEqual(c)&&a.isEqual(u))}).getOr(!0)&&!V0(o)?C.some(()=>((s,a,i,l)=>{const d=wC(a,l);if(0===d.length)Jo(a,s,i);else{const c=H0(i.dom,d);a.selection.setRng(c.toRange())}})(e,t,o,n)):C.none();var s,a,i})})(t,e):(n=>{if((t=>{const e=t.selection.getRng();return 0===(n=e).startOffset&&EC(n)&&((n,o)=>{const r=o.startContainer.parentElement;return!Ge(r)&&$0(n,N(r))})(t,e)&&(n=>{return(r=>{const s=r.startContainer.parentNode,a=r.endContainer.parentNode;return!Ge(s)&&!Ge(a)&&s.isEqualNode(a)})(o=n)&&(r=>{const s=r.endContainer;return r.endOffset===(j(s)?s.length:s.childNodes.length)})(o)||(o=>!o.endContainer.isEqualNode(o.commonAncestorContainer))(n);var o})(e);var n})(n)){const o=xC(n);return C.some(()=>{Hc(n),((r,s)=>{const a=Sa(s,xC(r));a.length>0&&kC(r,a)})(n,o)})}return C.none()})(t),ia=t=>((e=>{const n=e.selection.getRng();return n.collapsed&&(EC(n)||e.dom.isEmpty(n.startContainer))&&!(t=>Fn(t,r=>Xe(r.dom),Ie).isSome())(N(e.selection.getStart()))})(t)&&kC(t,[]),!0),om=(t,e,n)=>Y(n)?C.some(()=>{t._selectionOverrides.hideFakeCaret(),Jo(t,e,N(n))}):C.none(),rm=(t,e)=>t.selection.isCollapsed()?((n,o)=>{const r=o?Ws:Ks,a=Us(o?Gt.Forwards:Gt.Backwards,n.getBody(),n.selection.getRng());return r(a)?om(n,o,a.getNode(!o)):C.from(Ve(o,a)).filter(i=>r(i)&&mi(a,i)).bind(i=>om(n,o,i.getNode(!o)))})(t,e):((n,o)=>{const r=n.selection.getNode();return vn(r)?om(n,o,r):C.none()})(t,e),sm=t=>Oa(t??"").getOr(0),SC=(t,e)=>(t||"table"===At(e)?"margin":"padding")+("rtl"===bn(e,"direction")?"-right":"-left"),_C=t=>{const e=RC(t);return!t.mode.isReadOnly()&&(e.length>1||(n=t,Yn(e,r=>{const s=SC(Wp(n),r),a=Ia(r,s).map(sm).getOr(0);return"false"!==n.dom.getContentEditable(r.dom)&&a>0})));var n},NC=t=>ud(t)||vs(t),RC=t=>ct(mg(t.selection.getSelectedBlocks()),e=>!NC(e)&&!en(e).exists(NC)&&Ao(e,n=>on(n.dom)||Nt(n.dom)).exists(n=>on(n.dom))),AC=(t,e)=>{var n,o;const{dom:r}=t,s=hE(t),a=null!==(o=null===(n=/[a-z%]+$/i.exec(s))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",i=sm(s),l=Wp(t);H(RC(t),d=>{((c,u,g,p,f,h)=>{const m=SC(g,N(h)),b=sm(c.getStyle(h,m));if("outdent"===u){const v=Math.max(0,b-p);c.setStyle(h,m,v?v+f:"")}else c.setStyle(h,m,b+p+f)})(r,e,l,i,a,d.dom)})},OC=t=>AC(t,"outdent"),TC=t=>{if(t.selection.isCollapsed()&&_C(t)){const e=t.dom,n=t.selection.getRng(),o=L.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&Lc(N(r),o))return C.some(()=>OC(t))}return C.none()},BC=(t,e,n)=>ur([TC,Wu,$u,(o,r)=>em(o,e,r),zu,Qc,Ku,rm,ju,nm],o=>o(t,n)).filter(o=>t.selection.isEditable()),DC=t=>void 0===t.touches||1!==t.touches.length?C.none():C.some(t.touches[0]),am=(t,e)=>pt(t,e.nodeName),RR=(t,e)=>!!j(e)||!!Q(e)&&!am(t.getBlockElements(),e)&&!je(e)&&!Io(t,e),AR=(t,e)=>!(!j(e)||0!==e.data.length&&(!/^\s+$/.test(e.data)||e.nextSibling&&!am(t,e.nextSibling))),PC=t=>t.dom.create(Te(t),Bs(t)),OR=t=>{const e=t.dom,n=t.selection,o=t.schema,r=o.getBlockElements(),s=n.getStart(),a=t.getBody();let i,l,d=!1;const c=Te(t);if(!s||!Q(s))return;const u=a.nodeName.toLowerCase();if(!o.isValidChild(u,c.toLowerCase())||(y=r,w=a,It(Yb(N(s),N(w)),x=>am(y,x.dom))))return;var y,w;const g=n.getRng(),{startContainer:p,startOffset:f,endContainer:h,endOffset:m}=g,b=Qo(t);let v=a.firstChild;for(;v;)if(Q(v)&&_k(o,v),RR(o,v)){if(AR(r,v)){l=v,v=v.nextSibling,e.remove(l);continue}i||(i=PC(t),a.insertBefore(i,v),d=!0),l=v,v=v.nextSibling,i.appendChild(l)}else i=null,v=v.nextSibling;d&&b&&(g.setStart(p,f),g.setEnd(h,m),n.setRng(g),t.nodeChanged())},LC=(t,e,n)=>{const o=N(PC(t)),r=Wa();Vt(o,r),n(e,o);const s=document.createRange();return s.setStartBefore(r.dom),s.setEndBefore(r.dom),s},MC=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),TR=(t,e,n)=>function(o){const r=arguments,s=r[r.length-2],a=s>0?e.charAt(s-1):"";if('"'===a)return o;if(">"===a){const i=e.lastIndexOf("<",s);if(-1!==i&&-1!==e.substring(i,s).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},IC=(t,e)=>{e.hasAttribute("data-mce-caret")&&(gd(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},BR=(t,e)=>{const n=gs(N(t.getBody()),"*[data-mce-caret]").map(r=>r.dom).getOrNull();if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void IC(t,n)):void(_g(n)&&(IC(t,n),t.undoManager.add()))},FC=Nt,UC=(t,e,n)=>{const o=xn(t.getBody()),r=Z(Yd,1===e?o.next:o.prev);if(n.collapsed){const s=t.dom.getParent(n.startContainer,"PRE");if(!s)return;if(!r(L.fromRangeStart(n))){const a=N((i=>{const l=i.dom.create(Te(i));return l.innerHTML='<br data-mce-bogus="1">',l})(t));1===e?Zn(N(s),a):Me(N(s),a),t.selection.select(a.dom,!0),t.selection.collapse()}}},zC=(t,e)=>((n,o)=>{const r=o?Gt.Forwards:Gt.Backwards,s=n.selection.getRng();return(a=r,i=n,l=s,uC(i,a,l,fo,go,FC)).orThunk(()=>(UC(n,r,s),C.none()));var a,i,l})(t,e).exists(n=>(Wn(t,n),!0)),jC=(t,e)=>((n,o)=>{const r=o?1:-1,s=n.selection.getRng();return(a=r,i=n,l=s,mC(i,a,l,d=>fo(d)||Kb(d),d=>go(d)||Gb(d),FC)).orThunk(()=>(UC(n,r,s),C.none()));var a,i,l})(t,e).exists(n=>(Wn(t,n),!0)),HC=(t,e)=>fC(t,e,e?go:fo),sl=(t,e)=>Vu(t,!e).map(n=>{const o=n.toRange(),r=t.selection.getRng();return e?o.setStart(r.startContainer,r.startOffset):o.setEnd(r.endContainer,r.endOffset),o}).exists(n=>(Wn(t,n),!0)),DR=t=>St(["figcaption"],At(t)),$C=(t,e)=>!!t.selection.isCollapsed()&&((t,e)=>{const n=N(t.getBody()),o=L.fromRangeStart(t.selection.getRng());return((r,s)=>{const a=Z(wt,s);return Ao(N(r.container()),Ie,a).filter(DR)})(o,n).exists(()=>{if(r=n,a=o,e?sa(r.dom,a).breakAt.isNone():ra(r.dom,a).breakAt.isNone()){const r=LC(t,n,e?Vt:cg);return t.selection.setRng(r),!0}var r,a;return!1})})(t,e),VC={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},qC=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,gt=(t,...e)=>()=>t.apply(null,e),la=(t,e)=>{return $t((o=e,fn(yt(t,s=>({...VC,...s})),r=>qC(r,o)?[r]:[])),n=>n.action());var o},WC=(t,e)=>{return ur((o=e,fn(yt(t,s=>({...VC,...s})),r=>qC(r,o)?[r]:[])),n=>n.action());var o},KC=(t,e)=>{const n=e?Gt.Forwards:Gt.Backwards,o=t.selection.getRng();return uC(t,n,o,Ws,Ks,vn).exists(r=>(Wn(t,r),!0))},GC=(t,e)=>{const n=e?1:-1,o=t.selection.getRng();return mC(t,n,o,Ws,Ks,vn).exists(r=>(Wn(t,r),!0))},YC=(t,e)=>fC(t,e,e?Ks:Ws),XC=yn([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),da={...XC,none:t=>XC.none(t)},QC=(t,e,n)=>fn(ne(t),o=>tn(o,e)?n(o)?[o]:[]:QC(o,e,n)),JC=(t,e)=>Oo(t,"table",e),im=(t,e,n,o,r=jt)=>{const s=1===o;if(!s&&n<=0)return da.first(t[0]);if(s&&n>=t.length-1)return da.last(t[t.length-1]);{const a=n+o,i=t[a];return r(i)?da.middle(e,i):im(t,e,a,o,r)}},ZC=(t,e)=>JC(t,e).bind(n=>{const o=QC(n,"th,td",jt);return es(o,r=>wt(t,r)).map(r=>({index:r,all:o}))}),t1=(t,e,n,o,r)=>{const s=se(N(n),"td,th,caption").map(i=>i.dom);var i;return((i,l,d)=>Re(i,(c,u)=>c.fold(()=>C.some(u),g=>{const p=Math.sqrt(Math.abs(g.x-l)+Math.abs(g.y-d)),f=Math.sqrt(Math.abs(u.x-l)+Math.abs(u.y-d));return C.some(f<p?u:g)}),C.none()))(ct((i=t,fn(s,d=>{const c={left:(u=$o(d.getBoundingClientRect())).left- -1,top:u.top- -1,right:u.right+-2,bottom:u.bottom+-2,width:u.width+-1,height:u.height+-1};var u;return[{x:c.left,y:i(c),cell:d},{x:c.right,y:i(c),cell:d}]})),i=>e(i,r)),o,r).map(i=>i.cell)},LR=Z(t1,t=>t.bottom,(t,e)=>t.y<e),MR=Z(t1,t=>t.top,(t,e)=>t.y>e),e1=(t,e,n)=>{const o=t(e,n);return(r=o).breakType===An.Wrap&&0===r.positions.length||!Lt(n.getNode())&&(r=>r.breakType===An.Br&&1===r.positions.length)(o)?!((r,s,a)=>a.breakAt.exists(i=>r(s,i).breakAt.isSome()))(t,e,o):o.breakAt.isNone();var r},IR=Z(e1,ra),FR=Z(e1,sa),UR=(t,e,n,o)=>{const r=t.selection.getRng(),s=e?1:-1;return!(!ih()||!((a,i,l)=>{const d=L.fromRangeStart(i);return Ar(!a,l).exists(c=>c.isEqual(d))})(e,r,n)||(qn(s,t,n,!e,!1).each(a=>{Wn(t,a)}),0))},n1=(t,e,n)=>{const o=((s,a)=>{const i=a.getNode(s);return zn(i)?C.some(i):C.none()})(!!e,n),r=!1===e;o.fold(()=>Wn(t,n.toRange()),s=>Ar(r,t.getBody()).filter(a=>a.isEqual(n)).fold(()=>Wn(t,n.toRange()),a=>{return i=e,d=s,void(l=t).undoManager.transact(()=>{const c=i?Zn:Me,u=LC(l,N(d),c);Wn(l,u)});var i,l,d}))},zR=(t,e,n,o)=>{const r=t.selection.getRng(),s=L.fromRangeStart(r),a=t.getBody();if(!e&&IR(o,s)){const i=(l=a,(u=d=n,g=c=s,we(g.getClientRects()).bind(p=>LR(u,p.left,p.top)).bind(p=>{return nl(kn(f=p).map(h=>ra(f,h).positions.concat(h)).getOr([]),g);var f})).orThunk(()=>we(c.getClientRects()).bind(u=>Qu(nC(l,L.before(d)),u.left))).getOr(L.before(d)));return n1(t,e,i),!0}var l,d,c,u,g;if(e&&FR(o,s)){const i=((l,d,c)=>((u,g)=>Eo(g.getClientRects()).bind(p=>MR(u,p.left,p.top)).bind(p=>{return nl(he(f=p).map(h=>[h].concat(sa(f,h).positions)).getOr([]),g);var f}))(d,c).orThunk(()=>we(c.getClientRects()).bind(u=>Qu(oC(l,L.after(d)),u.left))).getOr(L.after(d)))(a,n,s);return n1(t,e,i),!0}return!1},o1=(t,e,n)=>C.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind(o=>C.from(t.dom.getParent(o,"table")).map(r=>n(t,e,r,o))).getOr(!1),r1=(t,e)=>o1(t,e,UR),s1=(t,e)=>o1(t,e,zR),a1=(t,e,n)=>n.fold(C.none,C.none,(o,r)=>{return(s=r,((a,i)=>{const l=d=>{for(let c=0;c<d.childNodes.length;c++){const u=N(d.childNodes[c]);if(i(u))return C.some(u);const g=l(d.childNodes[c]);if(g.isSome())return g}return C.none()};return l(a.dom)})(s,Bb)).map(a=>{return(t=>{const e=Pr.getWin(t).dom,n=(r,s,a,i)=>pc(e,r,s,a,i),o=t.match({domRange:s=>{const a=N(s.startContainer),i=N(s.endContainer);return ib(a,s.startOffset,i,s.endOffset)},relative:IS,exact:ib});return((r,s)=>{var i;return((i,l)=>{const d=l.ltr();return d.collapsed?l.rtl().filter(c=>!1===c.collapsed).map(c=>Vs.rtl(N(c.endContainer),c.endOffset,N(c.startContainer),c.startOffset)).getOrThunk(()=>sb(0,Vs.ltr,d)):sb(0,Vs.ltr,d)})(0,(i=r,s.match({domRange:d=>({ltr:G(d),rtl:C.none}),relative:(d,c)=>({ltr:_o(()=>rb(i,d,c)),rtl:_o(()=>C.some(rb(i,c,d)))}),exact:(d,c,u,g)=>({ltr:_o(()=>pc(i,d,c,u,g)),rtl:_o(()=>C.some(pc(i,u,g,d,c)))})})))})(e,o).match({ltr:n,rtl:n})})(Pr.exact(i=a,0,i,0));var i});var s},o=>(t.execCommand("mceTableInsertRowAfter"),i1(t,e,o))),i1=(t,e,n)=>{return a1(t,e,(r=La,ZC(o=n,void 0).fold(()=>da.none(o),s=>im(s.all,o,s.index,1,r))));var o,r},jR=(t,e,n)=>{return a1(t,e,(r=La,ZC(o=n,void 0).fold(()=>da.none(),s=>im(s.all,o,s.index,-1,r))));var o,r},l1=(t,e)=>{const n=["table","li","dl"],o=N(t.getBody()),r=a=>{const i=At(a);return wt(a,o)||St(n,i)},s=t.selection.getRng();return(a=N(e?s.endContainer:s.startContainer),i=r,((l,d,c=Bt)=>c(d)?C.none():St(l,At(d))?C.some(d):fs(d,l.join(","),u=>tn(u,"table")||c(u)))(["td","th"],a,i)).map(a=>(JC(a,r).each(i=>{t.model.table.clearSelectedCells(i.dom)}),t.selection.collapse(!e),(e?i1:jR)(t,r,a).each(i=>{t.selection.setRng(i)}),!0)).getOr(!1);var a,i},cn=(t,e)=>({container:t,offset:e}),al=Et.DOM,il=t=>e=>t===e?-1:0,lm=(t,e,n)=>{if(j(t)&&e>=0)return C.some(cn(t,e));{const o=Ho(al);return C.from(o.backwards(t,e,il(t),n)).map(r=>cn(r.container,r.container.data.length))}},dm=(t,e,n)=>{if(!j(t))return C.none();if(e>=0&&e<=t.data.length)return C.some(cn(t,e));{const r=Ho(al);return C.from(r.backwards(t,e,il(t),n)).bind(s=>dm(s.container,e+s.container.data.length,n))}},d1=(t,e,n)=>{if(!j(t))return C.none();const o=t.data;if(e<=o.length)return C.some(cn(t,e));{const r=Ho(al);return C.from(r.forwards(t,e,il(t),n)).bind(s=>d1(s.container,e-o.length,n))}},cm=(t,e,n,o,r)=>{const s=Ho(t,(a=t,i=>a.isBlock(i)||St(["BR","IMG","HR","INPUT"],i.nodeName)||"false"===a.getContentEditable(i)));var a;return C.from(s.backwards(e,n,o,r))},c1=t=>jn(t.toString().replace(/\u00A0/g," ")),u1=t=>""!==t&&-1!==" \xa0\f\n\r\t\v".indexOf(t),um=(t,e)=>t.substring(e.length),m1=(t,e,n,o=0)=>{return(r=N(e.startContainer),Oo(r,Db)).fold(()=>((s,a,i,l=0)=>{if(!(d=a).collapsed||!j(d.startContainer))return C.none();var d;const c={text:"",offset:0},u=s.getParent(a.startContainer,s.isBlock)||s.getRoot();return cm(s,a.startContainer,a.startOffset,(g,p,f)=>(c.text=f+c.text,c.offset+=p,((h,m,b)=>{let v;const y=b.charAt(0);for(v=m-1;v>=0;v--){const w=h.charAt(v);if(u1(w))return C.none();if(y===w&&re(h,b,v,m))break}return C.some(v)})(c.text,c.offset,i).getOr(p)),u).bind(g=>{const p=a.cloneRange();if(p.setStart(g.container,g.offset),p.setEnd(a.endContainer,a.endOffset),p.collapsed)return C.none();const f=c1(p);return 0!==f.lastIndexOf(i)||um(f,i).length<l?C.none():C.some({text:um(f,i),range:p,trigger:i})})})(t,e,n,o),s=>{const a=t.createRng();a.selectNode(s.dom);const i=c1(a);return C.some({range:a,text:um(i,n),trigger:n})});var r},f1=t=>{if(3===t.nodeType)return cn(t,t.data.length);{const e=t.childNodes;return e.length>0?f1(e[e.length-1]):cn(t,e.length)}},g1=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?g1(n[e],0):n.length>0&&1===t.nodeType&&n.length===e?f1(n[n.length-1]):cn(t,e)},p1=(t,e,n,o={})=>{var r;const s=e(),a=null!==(r=t.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",i=ct(s.lookupByTrigger(n.trigger),d=>n.text.length>=d.minChars&&d.matches.getOrThunk(()=>{return c=t.dom,u=>{const g=g1(u.startContainer,u.startOffset);return!((p,f)=>{var h;const m=null!==(h=p.getParent(f.container,p.isBlock))&&void 0!==h?h:p.getRoot();return cm(p,f.container,f.offset,(b,v)=>0===v?-1:v,m).filter(b=>{const v=b.container.data.charAt(b.offset-1);return!u1(v)}).isSome()})(c,g)};var c})(n.range,a,n.text));if(0===i.length)return C.none();const l=Promise.all(yt(i,d=>d.fetch(n.text,d.maxResults,o).then(c=>({matchText:n.text,items:c,columns:d.columns,onAction:d.onAction,highlightOn:d.highlightOn}))));return C.some({lookupData:l,context:n})};var On;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(On||(On={}));const mm=(t,e,n)=>t.stype===On.Error?e(t.serror):n(t.svalue),Hr=t=>({stype:On.Value,svalue:t}),ca=t=>({stype:On.Error,serror:t}),HR=mm,fm=t=>le(t)&&Oe(t).length>100?" removed due to size":JSON.stringify(t,null,2),ll=(t,e)=>ca([{path:t,getErrorInfo:e}]),h1=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let o=0;o<e.length;o++){const r=e[o];for(const s in r)pt(r,s)&&(n[s]=t(n[s],r[s]))}return n},gm=h1((t,e)=>af(t)&&af(e)?gm(t,e):e),b1=(h1((t,e)=>e),t=>({tag:"defaultedThunk",process:G(t)})),v1=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},pm=t=>({extract:(e,n)=>{return(o=t(n)).stype===On.Error?ll(e,G(o.serror)):o;var o},toString:G("val")}),qR=pm(Hr),y1=(t,e,n,o)=>o(Rt(t,e).getOrThunk(()=>n(t))),WR=(t,e,n,o,r)=>{const s=i=>r.extract(e.concat([o]),i),a=i=>i.fold(()=>Hr(C.none()),l=>{return(c=r.extract(e.concat([o]),l)).stype===On.Value?{stype:On.Value,svalue:(0,C.some)(c.svalue)}:c;var c});switch(t.tag){case"required":return i=e,c=s,Rt(l=n,d=o).fold(()=>{return g=d,p=l,ll(i,()=>'Could not find valid *required* value for "'+g+'" in '+fm(p));var g,p},c);case"defaultedThunk":return y1(n,o,t.process,s);case"option":return((i,l,d)=>d(Rt(i,l)))(n,o,a);case"defaultedOptionThunk":return((i,l,d,c)=>c(Rt(i,l).map(u=>!0===u?d(i):u)))(n,o,t.process,a);case"mergeWithThunk":return y1(n,o,G({}),i=>{const l=gm(t.process(n),i);return s(l)})}var i,l,d,c},hm=t=>({extract:(e,n)=>((o,r,s)=>{const a={},i=[];for(const l of s)v1(l,(d,c,u,g)=>{const p=WR(u,o,r,d,g);HR(p,f=>{i.push(...f)},f=>{a[c]=f})},(d,c)=>{a[d]=c(r)});return i.length>0?ca(i):Hr(a)})(e,n,t),toString:()=>"obj{\n"+yt(t,n=>v1(n,(o,r,s,a)=>o+" -> "+a.toString(),(o,r)=>"state("+o+")")).join("\n")+"}"}),C1=t=>({extract:(e,n)=>(t=>{const e=(o=>{const r=[],s=[];return H(o,a=>{mm(a,i=>s.push(i),i=>r.push(i))}),{values:r,errors:s}})(t);return e.errors.length>0?(n=e.errors,xo(ca,ff)(n)):Hr(e.values);var n})(yt(n,(r,s)=>t.extract(e.concat(["["+s+"]"]),r))),toString:()=>"array("+t.toString()+")"}),w1=(t,e)=>((t,e)=>({extract:(n,o)=>Rt(o,t).fold(()=>{return s=t,ll(n,()=>'Choice schema did not contain choice key: "'+s+'"');var s},r=>{return s=n,a=o,Rt(i=e,l=r).fold(()=>{return c=i,u=l,ll(s,()=>'The chosen schema: "'+u+'" did not exist in branches: '+fm(c));var c,u},d=>d.extract(s.concat(["branch: "+l]),a));var s,a,i,l}),toString:()=>"chooseOn("+t+"). Possible values: "+Oe(e)}))(t,Na(e,hm)),GR=G(qR),dl=(t,e)=>pm(n=>{const o=typeof n;return t(n)?Hr(n):ca(`Expected type: ${e} but got: ${o}`)}),YR=dl(Ze,"number"),cl=dl(at,"string"),XR=dl(wo,"boolean"),bm=dl(Ct,"function"),ua=(t,e,n,o)=>({tag:"field",key:t,newKey:e,presence:n,prop:o}),x1=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),k1=(t,e)=>ua(t,t,{tag:"required",process:{}},e),E1=t=>k1(t,cl),S1=t=>k1(t,bm),vm=(t,e)=>ua(t,t,{tag:"option",process:{}},e),ul=t=>vm(t,cl),$r=(t,e,n)=>ua(t,t,b1(e),n),_1=(t,e)=>$r(t,e,YR),N1=(t,e,n)=>{return $r(t,e,(o=n,r=s=>St(o,s)?pe.value(s):pe.error(`Unsupported value: "${s}", choose one of "${o.join(", ")}".`),pm(s=>r(s).fold(ca,Hr))));var o,r},ym=(t,e)=>$r(t,e,XR),Cm=(t,e)=>$r(t,e,bm),QR=E1("type"),JR=S1("fetch"),wm=S1("onAction"),ZR=Cm("onSetup",()=>bt),tA=ul("text"),eA=ul("icon"),nA=ul("tooltip"),oA=ul("label"),rA=ym("active",!1),sA=ym("enabled",!0),R1=ym("primary",!1),ma=t=>$r("type",t,cl),aA=hm([QR,E1("trigger"),_1("minChars",1),((t,e)=>ua(t,t,b1(1),GR()))("columns"),_1("maxResults",10),vm("matches",bm),JR,wm,(A1=cl,$r("highlightOn",[],C1(A1)))]);var A1;const xm=[sA,nA,eA,tA,ZR],O1=[rA].concat(xm),iA=[Cm("predicate",Bt),N1("scope","node",["node","editor"]),N1("position","selection",["node","selection","line"])],lA=xm.concat([ma("contextformbutton"),R1,wm,x1("original",fe)]),dA=O1.concat([ma("contextformbutton"),R1,wm,x1("original",fe)]),cA=xm.concat([ma("contextformbutton")]),uA=O1.concat([ma("contextformtogglebutton")]),mA=w1("type",{contextformbutton:lA,contextformtogglebutton:dA});hm([ma("contextform"),Cm("initValue",G("")),oA,((t,e)=>ua(t,t,{tag:"required",process:{}},C1(e)))("commands",mA),vm("launch",w1("type",{contextformbutton:cA,contextformtogglebutton:uA}))].concat(iA));const gA=t=>{const e=so(),n=Kt(!1),o=e.isSet,r=()=>{o()&&(Mt(t).autocompleter.removeDecoration(),t.dispatch("AutocompleterEnd"),n.set(!1),e.clear())},s=_o(()=>(t=>{const e=t.ui.registry.getAll().popups,n=Na(e,s=>{return(a=s,((t,e,n)=>{return o=(i=e.extract([t],a=n)).stype===On.Error?{stype:On.Error,serror:(i=>({input:a,errors:i}))(i.serror)}:i,mm(o,pe.error,pe.value);var a,i,o})("Autocompleter",aA,{trigger:a.ch,...a})).fold(i=>{throw new Error("Errors: \n"+(d=>{const c=d.length>10?d.slice(0,10).concat([{path:[],getErrorInfo:G("... (only showing first ten failures)")}]):d;return yt(c,u=>"Failed path: ("+u.path.join(" > ")+")\n"+u.getErrorInfo())})((l=i).errors).join("\n")+"\n\nInput object: "+fm(l.input));var l},fe);var a}),o=pf($l(n,s=>s.trigger)),r=Vl(n);return{dataset:n,triggers:o,lookupByTrigger:s=>ct(r,a=>a.trigger===s)}})(t)),a=i=>{var l;(l=i,e.get().map(d=>m1(t.dom,t.selection.getRng(),d.trigger).bind(c=>p1(t,s,c,l))).getOrThunk(()=>((d,c)=>{const u=c(),g=d.selection.getRng();return(p=d.dom,f=g,h=u,ur(h.triggers,m=>m1(p,f,m))).bind(p=>p1(d,c,p));var p,f,h})(t,s))).fold(r,l=>{var d,u;d=l.context,o()||(u=d.range,Mt(t).autocompleter.addDecoration(u),e.set({trigger:d.trigger,matchLength:d.text.length})),l.lookupData.then(d=>{e.get().map(c=>{const u=l.context;c.trigger===u.trigger&&(u.text.length-c.matchLength>=10?r():(e.set({...c,matchLength:u.text.length}),n.get()?t.dispatch("AutocompleterUpdate",{lookupData:d}):(n.set(!0),t.dispatch("AutocompleterStart",{lookupData:d}))))})})})};t.addCommand("mceAutocompleterReload",(i,l)=>{const d=le(l)?l.fetchOptions:{};a(d)}),t.addCommand("mceAutocompleterClose",r),((i,l)=>{const d=Td(l.load,50);i.on("keypress compositionend",c=>{27!==c.which&&d.throttle()}),i.on("keydown",c=>{const u=c.which;8===u?d.throttle():27===u&&l.cancelIfNecessary()}),i.on("remove",d.cancel)})(t,{cancelIfNecessary:r,load:a})},T1=t=>(e,n,o={})=>{const r=e.getBody(),s={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:bt,inputType:n},a=Yg(new InputEvent(t));return e.dispatch(t,{...a,...s,...o})},km=T1("input"),Em=T1("beforeinput"),fa=(t,e)=>{const n=t.dom,o=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const s=(a=>{for(;a;){if(Q(a)||j(a)&&a.data&&/[\r\n\s]/.test(a.data))return a;a=a.nextSibling}return null})(e.firstChild);s&&/^(UL|OL|DL)$/.test(s.nodeName)&&e.insertBefore(n.doc.createTextNode(Jt),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const s=new qt(e,e);let a,i=e;for(;a=s.current();){if(j(a)){r.setStart(a,0),r.setEnd(a,0);break}if(o[a.nodeName.toLowerCase()]){r.setStartBefore(a),r.setEndBefore(a);break}i=a,a=s.next()}a||(r.setStart(i,0),r.setEnd(i,0))}else Lt(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),qs(t,r)},ml=(t,e)=>{const n=t.getRoot();let o,r=e;for(;r!==n&&r&&"false"!==t.getContentEditable(r);)"true"===t.getContentEditable(r)&&(o=r),r=r.parentNode;return r!==n?o:n},Sm=t=>C.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),B1=(t,e)=>{const n=t?.parentNode;return Y(n)&&n.nodeName===e},D1=t=>Y(t)&&/^(OL|UL|LI)$/.test(t.nodeName),fl=t=>{const e=t.parentNode;return Y(n=e)&&/^(LI|DT|DD)$/.test(n.nodeName)?e:t;var n},gl=(t,e,n)=>{let o=t[n?"firstChild":"lastChild"];for(;o&&!Q(o);)o=o[n?"nextSibling":"previousSibling"];return o===e},pA=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),_m=t=>{t.innerHTML='<br data-mce-bogus="1">'},Nm=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,Rm=(t,e)=>Y(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),Am=(t,e,n)=>j(e)?t?1===n&&e.data.charAt(n-1)===ae?0:n:n===e.data.length-1&&e.data.charAt(n)===ae?e.data.length:n:n,ga=(t,e)=>{Te(t).toLowerCase()===e.tagName.toLowerCase()&&((n,o,r)=>{const s=n.dom;C.from(r.style).map(s.parseStyle).each(c=>{const u={...lg(N(o)),...c};s.setStyles(o,u)});const a=C.from(r.class).map(c=>c.split(/\s+/)),i=C.from(o.className).map(c=>ct(c.split(/\s+/),u=>""!==u));ge(a,i,(c,u)=>{const g=ct(u,f=>!St(c,f)),p=[...c,...g];s.setAttrib(o,"class",p.join(" "))});const l=["style","class"],d=os(r,(c,u)=>!St(l,u));s.setAttribs(o,d)})(t,e,Bs(t))},P1={insert:(t,e)=>{let n,o,r,s,a=!1;const i=t.dom,l=t.schema,d=l.getNonEmptyElements(),c=t.selection.getRng(),u=Te(t),g=x=>{let S=n;const E=l.getTextInlineElements();let _;_=x||"TABLE"===r||"HR"===r?i.create(x||u):v.cloneNode(!1);let D=_;if(!1===aE(t))i.setAttrib(_,"style",null),i.setAttrib(_,"class",null);else do{if(E[S.nodeName]){if(Xe(S)||je(S))continue;const T=S.cloneNode(!1);i.setAttrib(T,"id",""),_.hasChildNodes()?(T.appendChild(_.firstChild),_.appendChild(T)):(D=T,_.appendChild(T))}}while((S=S.parentNode)&&S!==b);return ga(t,_),_m(D),_},p=x=>{const S=Am(x,n,o);if(j(n)&&(x?S>0:S<n.data.length))return!1;if(n.parentNode===v&&a&&!x||x&&Q(n)&&n===v.firstChild)return!0;if(Nm(n,"TABLE")||Nm(n,"HR"))return a&&!x||!a&&x;const E=new qt(n,v);let _;for(j(n)&&(x&&0===S?E.prev():x||S!==n.data.length||E.next());_=E.current();){if(Q(_)){if(!_.getAttribute("data-mce-bogus")){const D=_.nodeName.toLowerCase();if(d[D]&&"br"!==D)return!1}}else if(j(_)&&!Mo(_.data))return!1;x?E.prev():E.next()}return!0},f=()=>{let x;return x=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==y?g(u):g(),((S,E)=>{const _=iE(S);return!zt(E)&&(at(_)?St($.explode(_),E.nodeName.toLowerCase()):_)})(t,s)&&Rm(i,s)&&i.isEmpty(v)?x=i.split(s,v):i.insertAfter(x,v),fa(t,x),x};_i(i,c).each(x=>{c.setStart(x.startContainer,x.startOffset),c.setEnd(x.endContainer,x.endOffset)}),n=c.startContainer,o=c.startOffset;const h=!(!e||!e.shiftKey),m=!(!e||!e.ctrlKey);Q(n)&&n.hasChildNodes()&&(a=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=a&&j(n)?n.data.length:0);const b=ml(i,n);if(!b||((x,S)=>{const E=x.dom.getParent(S,"ol,ul,dl");return null!==E&&"false"===x.dom.getContentEditableParent(E)})(t,n))return;h||(n=((x,S,E,_,D)=>{var T,P;const O=x.dom,F=null!==(T=ml(O,_))&&void 0!==T?T:O.getRoot();let q=O.getParent(_,O.isBlock);if(!q||!Rm(O,q)){if(q=q||F,!q.hasChildNodes()){const ht=O.create(S);return ga(x,ht),q.appendChild(ht),E.setStart(ht,0),E.setEnd(ht,0),ht}let W,ot=_;for(;ot&&ot.parentNode!==q;)ot=ot.parentNode;for(;ot&&!O.isBlock(ot);)W=ot,ot=ot.previousSibling;const st=null===(P=W?.parentElement)||void 0===P?void 0:P.nodeName;if(W&&st&&x.schema.isValidChild(st,S.toLowerCase())){const ht=W.parentNode,kt=O.create(S);for(ga(x,kt),ht.insertBefore(kt,W),ot=W;ot&&!O.isBlock(ot);){const et=ot.nextSibling;kt.appendChild(ot),ot=et}E.setStart(_,D),E.setEnd(_,D)}}return _})(t,u,c,n,o));let v=i.getParent(n,i.isBlock)||i.getRoot();s=Y(v?.parentNode)?i.getParent(v.parentNode,i.isBlock):null,r=v?v.nodeName.toUpperCase():"";const y=s?s.nodeName.toUpperCase():"";if("LI"!==y||m||(v=s,s=s.parentNode,r=y),/^(LI|DT|DD)$/.test(r)&&Q(s)&&i.isEmpty(v))return void((x,S,E,_,D)=>{const T=x.dom,P=x.selection.getRng(),O=E.parentNode;if(E===x.getBody()||!O)return;var F;D1(F=E)&&D1(F.parentNode)&&(D="LI");let q=S(D);if(gl(E,_,!0)&&gl(E,_,!1))if(B1(E,"LI")){const W=fl(E);T.insertAfter(q,W),(null===(st=(ot=E).parentNode)||void 0===st?void 0:st.firstChild)===ot?T.remove(W):T.remove(E)}else T.replace(q,E);else if(gl(E,_,!0))B1(E,"LI")?(T.insertAfter(q,fl(E)),q.appendChild(T.doc.createTextNode(" ")),q.appendChild(E)):O.insertBefore(q,E),T.remove(_);else if(gl(E,_,!1))T.insertAfter(q,fl(E)),T.remove(_);else{E=fl(E);const W=P.cloneRange();W.setStartAfter(_),W.setEndAfter(E);const ot=W.extractContents();"LI"===D&&((st,ht)=>st.firstChild&&"LI"===st.firstChild.nodeName)(ot)?(q=ot.firstChild,T.insertAfter(ot,E)):(T.insertAfter(ot,E),T.insertAfter(q,E)),T.remove(_)}var ot,st;fa(x,q)})(t,g,s,v,u);if(v===t.getBody()||!Rm(i,v))return;const w=v.parentNode;let k;if(wr(v))k=gd(v),i.isEmpty(v)&&_m(v),ga(t,k),fa(t,k);else if(p(!1))k=f();else if(p(!0)&&w)k=w.insertBefore(g(),v),fa(t,Nm(v,"HR")?k:v);else{const x=(E=>{const _=E.cloneRange();return _.setStart(E.startContainer,Am(!0,E.startContainer,E.startOffset)),_.setEnd(E.endContainer,Am(!1,E.endContainer,E.endOffset)),_})(c).cloneRange();x.setEndAfter(v);const S=x.extractContents();H(vg(N(S),Pe),_=>{const D=_.dom;D.nodeValue=jn(D.data)}),(E=>{let _=E;do{j(_)&&(_.data=_.data.replace(/^[\r\n]+/,"")),_=_.firstChild}while(_)})(S),k=S.firstChild,i.insertAfter(S,v),((E,_,D)=>{var T;const P=[];if(!D)return;let O=D;for(;O=O.firstChild;){if(E.isBlock(O))return;Q(O)&&!_[O.nodeName.toLowerCase()]&&P.push(O)}let F=P.length;for(;F--;)O=P[F],(!O.hasChildNodes()||O.firstChild===O.lastChild&&""===(null===(T=O.firstChild)||void 0===T?void 0:T.nodeValue)||pA(E,O))&&E.remove(O)})(i,d,k),((E,_)=>{_.normalize();const D=_.lastChild;(!D||Q(D)&&/^(left|right)$/gi.test(E.getStyle(D,"float",!0)))&&E.add(_,"br")})(i,v),i.isEmpty(v)&&_m(v),k.normalize(),i.isEmpty(k)?(i.remove(k),f()):(ga(t,k),fa(t,k))}i.setAttrib(k,"id",""),t.dispatch("NewBlock",{newBlock:k})},fakeEventName:"insertParagraph"},L1=(t,e,n)=>{const o=t.dom.createRng();n?(o.setStartBefore(e),o.setEndBefore(e)):(o.setStartAfter(e),o.setEndAfter(e)),t.selection.setRng(o),qs(t,o)},hA=(t,e)=>{const n=Qt("br");Me(N(e),n),t.undoManager.add()},bA=(t,e)=>{vA(t.getBody(),e)||Zn(N(e),Qt("br"));const n=Qt("br");Zn(N(e),n),L1(t,n.dom,!1),t.undoManager.add()},vA=(t,e)=>{return n=L.after(e),!!Lt(n.getNode())||ke(t,L.after(e)).map(o=>Lt(o.getNode())).getOr(!1);var n},M1=t=>t&&"A"===t.nodeName&&"href"in t,yA=t=>t.fold(Bt,M1,M1,Bt),CA=(t,e)=>{e.fold(bt,Z(hA,t),Z(bA,t),bt)},I1={insert:(t,e)=>{const n=(o=>{const r=Z(Zo,o),s=L.fromRangeStart(o.selection.getRng());return Rn(r,o.getBody(),s).filter(yA)})(t);n.isSome()?n.each(Z(CA,t)):((o,r)=>{const a=o.dom,i=o.selection.getRng();let l,d=!1;_i(a,i).each(m=>{i.setStart(m.startContainer,m.startOffset),i.setEnd(m.endContainer,m.endOffset)});let c=i.startOffset,u=i.startContainer;if(Q(u)&&u.hasChildNodes()){const m=c>u.childNodes.length-1;u=u.childNodes[Math.min(c,u.childNodes.length-1)]||u,c=m&&j(u)?u.data.length:0}let g=a.getParent(u,a.isBlock);const p=g&&g.parentNode?a.getParent(g.parentNode,a.isBlock):null;"LI"!==(p?p.nodeName.toUpperCase():"")||!(!r||!r.ctrlKey)||(g=p),j(u)&&c>=u.data.length&&(((m,b,v)=>{const y=new qt(b,v);let w;const k=m.getNonEmptyElements();for(;w=y.next();)if(k[w.nodeName.toLowerCase()]||j(w)&&w.length>0)return!0;return!1})(o.schema,u,g||a.getRoot())||(l=a.create("br"),i.insertNode(l),i.setStartAfter(l),i.setEndAfter(l),d=!0)),l=a.create("br"),Md(a,i,l),L1(o,l,d),o.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},F1=(t,e)=>Sm(t).filter(n=>e.length>0&&tn(N(n),e)).isSome(),Ke=yn([{br:[]},{block:[]},{none:[]}]),wA=(t,e)=>{return F1(n=t,sE(n));var n},U1=t=>(e,n)=>Sm(e).filter(r=>vs(N(r))).isSome()===t,z1=(t,e)=>(n,o)=>Sm(n).fold(G(""),a=>a.nodeName.toUpperCase())===t.toUpperCase()===e,xA=t=>{const e=ml(t.dom,t.selection.getStart());return zt(e)},pa=t=>z1("pre",t),pl=t=>(e,n)=>nE(e)===t,kA=(t,e)=>{return F1(n=t,rE(n));var n},hl=(t,e)=>e,EA=t=>{const e=Te(t),n=ml(t.dom,t.selection.getStart());return Y(n)&&t.schema.isValidChild(n.nodeName,e)},Qe=(t,e)=>(n,o)=>Re(t,(r,s)=>r&&s(n,o),!0)?C.some(e):C.none(),bl=(t,e,n)=>{e.selection.isCollapsed()||e.execCommand("delete"),Y(n)&&Em(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),Y(n)&&km(e,t.fakeEventName))},j1=(t,e)=>{const n=()=>bl(I1,t,e),o=()=>bl(P1,t,e),r=(s=t,a=e,Gy([Qe([wA],Ke.none()),Qe([pa(!0),xA],Ke.none()),Qe([z1("summary",!0)],Ke.br()),Qe([pa(!0),pl(!1),hl],Ke.br()),Qe([pa(!0),pl(!1)],Ke.block()),Qe([pa(!0),pl(!0),hl],Ke.block()),Qe([pa(!0),pl(!0)],Ke.br()),Qe([U1(!0),hl],Ke.br()),Qe([U1(!0)],Ke.block()),Qe([kA],Ke.br()),Qe([hl],Ke.br()),Qe([EA],Ke.block())],[s,!(!a||!a.shiftKey)]).getOr(Ke.none()));var s,a;switch(oE(t)){case"linebreak":r.fold(n,n,bt);break;case"block":r.fold(o,o,bt);break;case"invert":r.fold(o,n,bt);break;default:r.fold(n,o,bt)}},SA=Xn(),H1=t=>t.stopImmediatePropagation(),$1=t=>t.keyCode===tt.PAGE_UP||t.keyCode===tt.PAGE_DOWN,V1=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",H1,!0):!n&&t.get()&&e.off("NodeChange",H1),t.set(n)},q1=(t,e)=>{const n=e.container(),o=e.offset();return j(n)?(n.insertData(o,t),C.some(L(n,o+t.length))):ui(e).map(r=>{const s=hr(t);return e.isAtEnd()?Zn(r,s):Me(r,s),L(s.dom,t.length)})},_A=Z(q1,Jt),NA=Z(q1," "),AA=t=>{const e=L.fromRangeStart(t.selection.getRng()),n=N(t.getBody());if(t.selection.isCollapsed()){const o=Z(Zo,t),r=L.fromRangeStart(t.selection.getRng());return Rn(o,t.getBody(),r).bind((s=n,a=>a.fold(i=>ze(s.dom,L.before(i)),i=>he(i),i=>kn(i),i=>ke(s.dom,L.after(i))))).map(s=>()=>{return((t,e)=>n=>{return o=t,!Fc(r=n)&&(ze((s=o).dom,a=r).isNone()||ke(s.dom,a).isNone()||Lc(s,a)||Zb(s,a)||Ic(s,a)||Mc(s,a)||n0(o,r)||o0(o,r))?_A(e):NA(e);var o,r,s,a})(n,e)(s).each((a=t,i=>(a.selection.setRng(i.toRange()),a.nodeChanged(),!0)));var a})}var s;return C.none()},OA=t=>cS(t)?[{keyCode:tt.TAB,action:gt(l1,t,!0)},{keyCode:tt.TAB,shiftKey:!0,action:gt(l1,t,!1)}]:[],TA=t=>{if(t.addShortcut("Meta+P","","mcePrint"),gA(t),Nn(t))return Kt(null);{const e=(t=>{const e=Kt(null),n=Z(Zo,t);return t.on("NodeChange",o=>{Ds(t)&&(((r,s,a)=>{const i=yt(se(N(s.getRoot()),'*[data-mce-selected="inline-boundary"]'),c=>c.dom),l=ct(i,r),d=ct(a,r);H(Sa(l,d),Z(gC,!1)),H(Sa(d,l),Z(gC,!0))})(n,t.dom,o.parents),((r,s)=>{const a=s.get();if(r.selection.isCollapsed()&&!r.composing&&a){const i=L.fromRangeStart(r.selection.getRng());L.isTextPosition(i)&&!md(l=i)&&!fd(l)&&(ol(r,((t,e)=>{return L.isTextPosition(e)?(o=e,eh(n=t)&&o.container()===n?((r,s)=>{const a=oh(r.data.substr(0,s.offset())),i=oh(r.data.substr(s.offset()));return(a.text+i.text).length>0?(rh(r),L(r,s.offset()-a.count)):s})(n,o):sh(n,o)):((n,o)=>o.container()===n.parentNode?((r,s)=>{const a=s.container(),i=((l,d)=>{const c=cf(l,d);return-1===c?C.none():C.some(c)})(Ae(a.childNodes),r).map(l=>l<s.offset()?L(a,s.offset()-1):s).getOr(s);return qo(r),i})(n,o):sh(n,o))(t,e);var n,o})(a,i)),s.set(null))}var l})(t,e),((r,s,a,i)=>{if(s.selection.isCollapsed()){const l=ct(i,r);H(l,d=>{const c=L.fromRangeStart(s.selection.getRng());Rn(r,s.getBody(),c).bind(u=>pC(s,a,u))})}})(n,t,e,o.parents))}),e})(t);return(n=t).on("keyup compositionstart",Z(BR,n)),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=vt.os.isMacOS()||vt.os.isiOS();la([{keyCode:tt.RIGHT,action:gt(zC,s,!0)},{keyCode:tt.LEFT,action:gt(zC,s,!1)},{keyCode:tt.UP,action:gt(jC,s,!1)},{keyCode:tt.DOWN,action:gt(jC,s,!0)},...l?[{keyCode:tt.UP,action:gt(sl,s,!1),metaKey:!0,shiftKey:!0},{keyCode:tt.DOWN,action:gt(sl,s,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:tt.RIGHT,action:gt(r1,s,!0)},{keyCode:tt.LEFT,action:gt(r1,s,!1)},{keyCode:tt.UP,action:gt(s1,s,!1)},{keyCode:tt.DOWN,action:gt(s1,s,!0)},{keyCode:tt.RIGHT,action:gt(KC,s,!0)},{keyCode:tt.LEFT,action:gt(KC,s,!1)},{keyCode:tt.UP,action:gt(GC,s,!1)},{keyCode:tt.DOWN,action:gt(GC,s,!0)},{keyCode:tt.RIGHT,action:gt(hC,s,a,!0)},{keyCode:tt.LEFT,action:gt(hC,s,a,!1)},{keyCode:tt.RIGHT,ctrlKey:!l,altKey:l,action:gt(xR,s,a)},{keyCode:tt.LEFT,ctrlKey:!l,altKey:l,action:gt(kR,s,a)},{keyCode:tt.UP,action:gt($C,s,!1)},{keyCode:tt.DOWN,action:gt($C,s,!0)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{let r=!1;n.on("keydown",s=>{r=s.keyCode===tt.BACKSPACE,s.isDefaultPrevented()||((a,i,l)=>{const d=l.keyCode===tt.BACKSPACE?"deleteContentBackward":"deleteContentForward";WC([{keyCode:tt.BACKSPACE,action:gt(TC,a)},{keyCode:tt.BACKSPACE,action:gt(Wu,a,!1)},{keyCode:tt.DELETE,action:gt(Wu,a,!0)},{keyCode:tt.BACKSPACE,action:gt($u,a,!1)},{keyCode:tt.DELETE,action:gt($u,a,!0)},{keyCode:tt.BACKSPACE,action:gt(em,a,i,!1)},{keyCode:tt.DELETE,action:gt(em,a,i,!0)},{keyCode:tt.BACKSPACE,action:gt(Qc,a,!1)},{keyCode:tt.DELETE,action:gt(Qc,a,!0)},{keyCode:tt.BACKSPACE,action:gt(Ku,a,!1)},{keyCode:tt.DELETE,action:gt(Ku,a,!0)},{keyCode:tt.BACKSPACE,action:gt(rm,a,!1)},{keyCode:tt.DELETE,action:gt(rm,a,!0)},{keyCode:tt.BACKSPACE,action:gt(ju,a,!1)},{keyCode:tt.DELETE,action:gt(ju,a,!0)},{keyCode:tt.BACKSPACE,action:gt(zu,a,!1)},{keyCode:tt.DELETE,action:gt(zu,a,!0)},{keyCode:tt.BACKSPACE,action:gt(nm,a,!1)},{keyCode:tt.DELETE,action:gt(nm,a,!0)}],l).filter(c=>a.selection.isEditable()).each(c=>{l.preventDefault(),Em(a,d).isDefaultPrevented()||(c(),km(a,d))})})(n,o,s)}),n.on("keyup",s=>{s.isDefaultPrevented()||((a,i,l)=>{const d=Xn(),c=d.os,u=d.browser,g=c.isMacOS()?[{keyCode:tt.BACKSPACE,altKey:!0,action:gt(ia,a)},{keyCode:tt.DELETE,altKey:!0,action:gt(ia,a)}]:[{keyCode:tt.BACKSPACE,ctrlKey:!0,action:gt(ia,a)},{keyCode:tt.DELETE,ctrlKey:!0,action:gt(ia,a)}];c.isMacOS()&&l&&g.push({keyCode:u.isFirefox()?224:91,action:gt(ia,a)}),la([{keyCode:tt.BACKSPACE,action:gt(Hy,a)},{keyCode:tt.DELETE,action:gt(Hy,a)},...g],i)})(n,s,r),r=!1})})(t,e),(n=>{n.on("keydown",o=>{var r,s,a;o.keyCode===tt.ENTER&&(r=n,(s=o).isDefaultPrevented()||(s.preventDefault(),(a=r.undoManager).typing&&(a.typing=!1,a.add()),r.undoManager.transact(()=>{j1(r,s)})))})})(t),(n=>{n.on("keydown",o=>{var r,s;o.isDefaultPrevented()||(s=o,WC([{keyCode:tt.SPACEBAR,action:gt(AA,r=n)}],s).each(a=>{s.preventDefault(),Em(r,"insertText",{data:" "}).isDefaultPrevented()||(a(),km(r,"insertText",{data:" "}))}))})})(t),(n=>{n.on("input",o=>{o.isComposing||(r=>{const s=N(r.getBody());r.selection.isCollapsed()&&((t,e)=>{const n=e.container();if(!j(n))return C.none();if((o=>{const r=o.container();return j(r)&&re(r.data,Jt)})(e)){const o=i0(t,n,!1)||(r=>{const s=r.data,a=(i=>{const l=i.split("");return yt(l,(d,c)=>hi(d)&&c>0&&c<l.length-1&&tc(l[c-1])&&tc(l[c+1])?" ":d).join("")})(s);return a!==s&&(r.data=a,!0)})(n)||l0(t,n,!1);return is(o,e)}if(Uc(t,e)){const o=i0(t,n,!0)||l0(t,n,!0);return is(o,e)}return C.none()})(s,L.fromRangeStart(r.selection.getRng())).each(a=>{r.selection.setRng(a.toRange())})})(n)})})(t),(n=>{n.on("keydown",o=>{var s;o.isDefaultPrevented()||(s=o,la([...OA(n)],s).each(a=>{s.preventDefault()}))})})(t),((n,o)=>{n.on("keydown",r=>{r.isDefaultPrevented()||((s,a,i)=>{const l=vt.os.isMacOS()||vt.os.isiOS();la([{keyCode:tt.END,action:gt(HC,s,!0)},{keyCode:tt.HOME,action:gt(HC,s,!1)},...l?[]:[{keyCode:tt.HOME,action:gt(sl,s,!1),ctrlKey:!0,shiftKey:!0},{keyCode:tt.END,action:gt(sl,s,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:tt.END,action:gt(YC,s,!0)},{keyCode:tt.HOME,action:gt(YC,s,!1)},{keyCode:tt.END,action:gt(rl,s,!0,a)},{keyCode:tt.HOME,action:gt(rl,s,!1,a)}],i).each(d=>{i.preventDefault()})})(n,o,r)})})(t,e),((n,o)=>{if(SA.os.isMacOS())return;const r=Kt(!1);n.on("keydown",s=>{$1(s)&&V1(r,n,!0)}),n.on("keyup",s=>{var a,i,l;s.isDefaultPrevented()||(l=s,la([{keyCode:tt.PAGE_UP,action:gt(rl,a=n,!1,i=o)},{keyCode:tt.PAGE_DOWN,action:gt(rl,a,!0,i)}],l)),$1(s)&&r.get()&&(V1(r,n,!1),n.nodeChanged())})})(t,e),e}var n};class BA{constructor(e){let n;this.lastPath=[],this.editor=e;const o=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",r=>{const s=e.selection.getRng(),a={startContainer:s.startContainer,startOffset:s.startOffset,endContainer:s.endContainer,endOffset:s.endOffset};"nodechange"!==r.type&&vc(a,n)||e.dispatch("SelectionChange"),n=a}),e.on("contextmenu",()=>{e.dispatch("SelectionChange")}),e.on("SelectionChange",()=>{const r=e.selection.getStart(!0);r&&vi(e)&&!o.isSameElementPath(r)&&e.dom.isChildOf(r,e.getBody())&&e.nodeChanged({selectionChange:!0})}),e.on("mouseup",r=>{!r.isDefaultPrevented()&&vi(e)&&("IMG"===e.selection.getNode().nodeName?$e.setEditorTimeout(e,()=>{e.nodeChanged()}):e.nodeChanged())})}nodeChanged(e={}){const n=this.editor.selection;let o;if(this.editor.initialized&&n&&!ME(this.editor)&&!this.editor.mode.isReadOnly()){const r=this.editor.getBody();o=n.getStart(!0)||r,o.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(o,r)||(o=r);const s=[];this.editor.dom.getParent(o,a=>a===r||(s.push(a),!1)),this.editor.dispatch("NodeChange",{...e,element:o,parents:s})}}isSameElementPath(e){let n;const o=this.editor,r=ns(o.dom.getParents(e,jt,o.getBody()));if(r.length===this.lastPath.length){for(n=r.length;n>=0&&r[n]===this.lastPath[n];n--);if(-1===n)return this.lastPath=r,!0}return this.lastPath=r,!1}}const vl=G("x-tinymce/html"),Om="\x3c!-- x-tinymce/html --\x3e",DA=t=>Om+t,W1=t=>-1!==t.indexOf(Om),K1="%MCEPASTEBIN%",Tm=t=>t.dom.get("mcepastebin"),PA=t=>Y(t)&&"mcepastebin"===t.id,G1=t=>t===K1,Y1=(t,e)=>($.each(e,n=>{t=ka(n,RegExp)?t.replace(n,""):t.replace(n[0],n[1])}),t),X1=t=>Y1(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(e,n,o)=>n||o?Jt:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),Q1=(t,e)=>({content:t,cancelled:e}),Bm=(t,e)=>(t.insertContent(e,{merge:ZE(t),paste:!0}),!0),Dm=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),LA=(t,e,n)=>{return!(t.selection.isCollapsed()||!Dm(e)||(o=t,r=e,s=n,o.undoManager.extra(()=>{s(o,r)},()=>{o.execCommand("mceInsertLink",!1,r)}),0));var o,r,s},MA=(t,e,n)=>{return o=t,!(!Dm(r=e)||!It(th(o),s=>xf(r.toLowerCase(),`.${s.toLowerCase()}`)))&&((o,r,s)=>(o.undoManager.extra(()=>{s(o,r)},()=>{o.insertContent('<img src="'+r+'">')}),!0))(t,e,n);var o,r},IA=(t=>{let e=0;return()=>"mceclip"+e++})(),J1=(t,e,n,o)=>{const r=((l,d,c)=>{const u=l.dispatch("PastePreProcess",{content:d,internal:c}),g=((p,f)=>{const h=Ir({sanitize:qd(p)},p.schema);h.addNodeFilter("meta",b=>{$.each(b,v=>{v.remove()})});const m=h.parse(f,{forced_root_block:!1,isRootContent:!0});return uo({validate:!0},p.schema).serialize(m)})(l,u.content);return l.hasEventListeners("PastePostProcess")&&!u.isDefaultPrevented()?((p,f,h)=>{const m=p.dom.create("div",{style:"display:none"},f),b=p.dispatch("PastePostProcess",{node:m,internal:h});return Q1(b.node.innerHTML,b.isDefaultPrevented())})(l,g,c):Q1(g,u.isDefaultPrevented())})(t,e,n);var s,a,l,d;r.cancelled||(s=t,a=r.content,o||!tS(s)?Bm(s,a):(l=s,d=a,$.each([LA,MA,Bm],c=>!c(l,d,Bm))))},yl=(t,e,n)=>{const o=n||W1(e);J1(t,e.replace(Om,""),o,!1)},Pm=(t,e)=>{const n=t.dom.encode(e).replace(/\r\n/g,"\n"),o=((r,s,a)=>{const i=r.split(/\n\n/),l=((u,g)=>{let p="<"+u;const f=$l(g,(h,m)=>m+'="'+oo.encodeAllRaw(h)+'"');return f.length&&(p+=" "+f.join(" ")),p+">"})(s,a),d="</"+s+">",c=yt(i,u=>u.split(/\n/).join("<br />"));return 1===c.length?c[0]:yt(c,u=>l+u+d).join("")})(Bg(n,nS(t)),Te(t),Bs(t));J1(t,o,!1,!0)},Z1=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const o=t.types[n];try{e[o]=t.getData(o)}catch{e[o]=""}}return e},bo=(t,e)=>e in t&&t[e].length>0,tw=t=>bo(t,"text/html")||bo(t,"text/plain"),ew=(t,e,n)=>{const o="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(di(t)&&o){const s=((a,i)=>{const l=i.items?fn(Ae(i.items),c=>"file"===c.kind?[c.getAsFile()]:[]):[],d=i.files?Ae(i.files):[];return ct(l.length>0?l:d,(c=>{const u=th(c);return g=>te(g.type,"image/")&&It(u,p=>(f=>{const h=f.toLowerCase(),m={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return $.hasOwn(m,h)?"image/"+m[h]:"image/"+h})(p)===g.type)})(a))})(t,o);if(s.length>0)return e.preventDefault(),(r=s,Promise.all(yt(r,a=>Ev(a).then(i=>({file:a,uri:i}))))).then(a=>{n&&t.selection.setRng(n),H(a,i=>{var l,d;l=t,vu((d=i).uri).each(({data:c,type:u,base64Encoded:g})=>{const p=g?c:btoa(c),f=d.file,h=l.editorUpload.blobCache,b=h.getByData(p,u)??((v,y,w,k)=>{const x=IA(),S=$p(v)&&Y(w.name),E=S?((T,P)=>{const O=P.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return Y(O)?T.dom.encode(O[1]):void 0})(v,w.name):x,D=y.create(x,w,k,E,S?w.name:void 0);return y.add(D),D})(l,h,f,p);yl(l,`<img src="${b.blobUri()}">`,!1)})})}),!0}return!1},Lm=(t,e,n,o)=>{let r=X1(n);const s=bo(e,vl())||W1(n),a=!s&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(r),i=Dm(r);(G1(r)||!r.length||a&&!i)&&(o=!0),(o||i)&&(r=bo(e,"text/plain")&&a?e["text/plain"]:(l=>{const d=ro(),c=Ir({},d);let u="";const g=d.getVoidElements(),p=$.makeMap("script noscript style textarea video audio iframe object"," "),f=d.getBlockElements(),h=m=>{const b=m.name,v=m;if("br"!==b){if("wbr"!==b)if(g[b]&&(u+=" "),p[b])u+=" ";else{if(3===m.type&&(u+=m.value),!(m.name in d.getVoidElements())){let y=m.firstChild;if(y)do{h(y)}while(y=y.next)}f[b]&&v.next&&(u+="\n","p"===b&&(u+="\n"))}}else u+="\n"};return l=Y1(l,[/<!\[[^\]]+\]>/g]),h(c.parse(l)),u})(r)),G1(r)||(o?Pm(t,r):yl(t,r,s))},nw=(t,e,n,o)=>{((r,s,a)=>{if(!r)return!1;try{return r.clearData(),r.setData("text/html",s),r.setData("text/plain",a),r.setData(vl(),s),!0}catch{return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),o()):n(e.html,o)},ow=t=>(e,n)=>{const{dom:o,selection:r}=t,s=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=o.create("div",{contenteditable:"true"},e);o.setStyles(s,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),s.appendChild(a),o.add(t.getBody(),s);const i=r.getRng();a.focus();const l=o.createRng();l.selectNodeContents(a),r.setRng(l),$e.setEditorTimeout(t,()=>{r.setRng(i),o.remove(s),n()},0)},rw=t=>({html:DA(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),sw=t=>{return!t.selection.isCollapsed()||!!(e=t).dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody());var e},aw=(t,e)=>{var n,o;return Xo.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(o=e.clientY)&&void 0!==o?o:0,t.getDoc())},iw=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},UA=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,lw=t=>$.trim(t).replace(UA,bi).toLowerCase(),zA=(t,e,n)=>{const o=QE(t);if(n||"all"===o||!JE(t))return e;const r=o?o.split(/[, ]/):[];if(r&&"none"!==o){const s=t.dom,a=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(i,l,d,c)=>{const u=s.parseStyle(s.decode(d)),g={};for(let f=0;f<r.length;f++){const h=u[r[f]];let m=h,b=s.getStyle(a,r[f],!0);/color/.test(r[f])&&(m=lw(m),b=lw(b)),b!==m&&(g[r[f]]=h)}const p=s.serializeStyle(g,"span");return p?l+' style="'+p+'"'+c:l+c})}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(s,a,i,l)=>a+' style="'+i+'"'+l)},HA=Lt,dw=j,$A=t=>Nt(t.dom),cw=t=>e=>wt(N(t),e),uw=(t,e)=>Ao(N(t),$A,cw(e)),mw=(t,e,n)=>{const o=new qt(t,e),r=n?o.next.bind(o):o.prev.bind(o);let s=t;for(let a=n?t:r();a&&!HA(a);a=r())Ye(a)&&(s=a);return s};var Vr;!function(t){t.Before="before",t.After="after"}(Vr||(Vr={}));const qA=(t,e)=>Math.abs(t.left-e),WA=(t,e)=>Math.abs(t.right-e),GA=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),Mm=(t,e,n)=>{const o=d=>Ye(d.node)?C.some(d):Q(d.node)?Mm(Ae(d.node.childNodes),e,n):C.none(),r=(d,c)=>{const u=ko(d,(g,p)=>c(g,e,n)-c(p,e,n));return((g,p)=>{if(g.length>=2){const f=o(g[0]).getOr(g[0]),h=o(g[1]).getOr(g[1]);if(Math.abs(p(f,e,n)-p(h,e,n))<2){if(j(f.node))return C.some(f);if(j(h.node))return C.some(h)}}return C.none()})(u,c).orThunk(()=>ur(u,o))},[s,a]=((t,e)=>{return(n=ct(t,n=>{return(o=e)>=(r=n).top&&o<=r.bottom;var o,r}),Re(n,(o,r)=>o.fold(()=>C.some(r),s=>{const a=Math.min(r.left,s.left),i=Math.min(r.top,s.top),l=Math.max(r.right,s.right),d=Math.max(r.bottom,s.bottom);return C.some({top:i,right:l,bottom:d,left:a,width:l-a,height:d-i})}),C.none())).fold(()=>[[],t],n=>{const{pass:o,fail:r}=Zr(t,s=>((a,i)=>{const l=(d=a,c=i,Math.max(0,Math.min(d.bottom,c.bottom)-Math.max(d.top,c.top))/Math.min(a.height,i.height));var d,c;return((d,c)=>d.top<c.bottom&&d.bottom>c.top)(a,i)&&l>.5})(s,n));return[o,r]});var n})(iC(t),n),{pass:i,fail:l}=Zr(a,d=>d.top<n);return r(s,GA).orThunk(()=>r(l,mp)).orThunk(()=>r(i,mp))},fw=(t,e,n)=>((o,r,s)=>{const a=N(o),l=((t,e,n)=>C.from(t.dom.elementFromPoint(e,n)).map(cs))(In(a),r,s).filter(d=>Mn(a,d)).getOr(a);return((d,c,u,g)=>{const p=(f,h)=>{const m=ct(f.dom.childNodes,Ea(b=>Q(b)&&b.classList.contains("mce-drag-container")));return h.fold(()=>Mm(m,u,g),b=>{const v=ct(m,y=>y!==b.dom);return Mm(v,u,g)}).orThunk(()=>(wt(f,d)?C.none():td(f)).bind(b=>p(b,C.some(f))))};return p(c,C.none())})(a,l,r,s)})(t,e,n).filter(o=>Ls(o.node)).map(o=>{return{node:(r=o).node,position:qA(r,s=e)<WA(r,s)?Vr.Before:Vr.After};var r,s}),gw=t=>{var e,n;const o=t.getBoundingClientRect(),r=t.ownerDocument,s=r.documentElement,a=r.defaultView;return{top:o.top+(null!==(e=a?.scrollY)&&void 0!==e?e:0)-s.clientTop,left:o.left+(null!==(n=a?.scrollX)&&void 0!==n?n:0)-s.clientLeft}},pw=t=>({target:t,srcElement:t}),Im=t=>(e,n)=>{return o=t,r=e,s=pw(n),{...r,dataTransfer:null,type:o,...s};var o,r,s},YA=Im("dragstart"),XA=Im("drop"),hw=Im("dragend"),bw=Nt,JA=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(bw,on),ZA=(t,e,n,o)=>{const r=t.dom,s=e.cloneNode(!0);r.setStyles(s,{width:n,height:o}),r.setAttrib(s,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),r.setStyles(s,{margin:0,boxSizing:"border-box"}),a.appendChild(s),a},Cl=(t,e)=>n=>()=>{n.scroll({[t]:("left"===t?n.scrollX:n.scrollY)+e,behavior:"smooth"})},vw=Cl("left",-32),yw=Cl("left",32),Cw=Cl("top",-32),ww=Cl("top",32),xw=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},kw=(t,e,n)=>{t.on(o=>{if(o.intervalId.clear(),o.dragging){const r=n.fold(()=>(t=>((e,n)=>{const o=df("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,srcElement:null,target:null,timeStamp:0,type:"dragend",composedPath:o,initEvent:o,preventDefault:bt,stopImmediatePropagation:bt,stopPropagation:bt,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:o,initMouseEvent:o,getModifierState:o,dataTransfer:null,...n}})(0,pw(t)))(o.element),s=>hw(s,o.element));e.dispatch("dragend",r)}}),Ew(t)},Ew=t=>{t.on(e=>{e.intervalId.clear(),xw(e.ghost)}),t.clear()},ha=Nt,Sw=(t,e)=>tr(t.getBody(),e),nO=t=>{const e=t.selection,n=t.dom,o=t.getBody(),r=((t,e,n,o)=>{const r=so();let s,a;const i=Te(t),l=t.dom,d=()=>{(c=>{var u,g;const p=se(N(c),"*[contentEditable=false],video,audio,embed,object");for(let f=0;f<p.length;f++){const h=p[f].dom;let m=h.previousSibling;if(Ya(m)){const b=m.data;1===b.length?null===(u=m.parentNode)||void 0===u||u.removeChild(m):m.deleteData(b.length-1,1)}m=h.nextSibling,Ga(m)&&(1===m.data.length?null===(g=m.parentNode)||void 0===g||g.removeChild(m):m.deleteData(0,1))}})(e),a&&(qo(a),a=null),r.on(c=>{l.remove(c.caret),r.clear()}),s&&(clearInterval(s),s=void 0)};return{show:(c,u)=>{let g;if(d(),pS(u))return null;if(!n(u))return a=((p,f)=>{var h;const m=(null!==(h=p.ownerDocument)&&void 0!==h?h:document).createTextNode(ae),b=p.parentNode;if(f){const v=p.previousSibling;if(Cr(v)){if(Fe(v))return v;if(Ya(v))return v.splitText(v.data.length-1)}b?.insertBefore(m,p)}else{const v=p.nextSibling;if(Cr(v)){if(Fe(v))return v;if(Ga(v))return v.splitText(1),v}p.nextSibling?b?.insertBefore(m,p.nextSibling):b?.appendChild(m)}return m})(u,c),g=u.ownerDocument.createRange(),Ps(a.nextSibling)?(g.setStart(a,0),g.setEnd(a,0)):(g.setStart(a,1),g.setEnd(a,1)),g;{const p=((m,b,v)=>{var y;const w=(null!==(y=b.ownerDocument)&&void 0!==y?y:document).createElement(m);w.setAttribute("data-mce-caret",v?"before":"after"),w.setAttribute("data-mce-bogus","all"),w.appendChild(Wa().dom);const k=b.parentNode;return v?k?.insertBefore(w,b):b.nextSibling?k?.insertBefore(w,b.nextSibling):k?.appendChild(w),w})(i,u,c),f=ah(e,u,c);l.setStyle(p,"top",f.top),a=p;const h=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(h,{...f}),l.add(e,h),r.set({caret:h,element:u,before:c}),c&&l.addClass(h,"mce-visual-caret-before"),s=setInterval(()=>{r.on(m=>{o()?l.toggleClass(m.caret,"mce-visual-caret-hidden"):l.addClass(m.caret,"mce-visual-caret-hidden")})},500),g=u.ownerDocument.createRange(),g.setStart(p,0),g.setEnd(p,0)}return g},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on(c=>{const u=ah(e,c.element,c.before);l.setStyles(c.caret,{...u})})},destroy:()=>clearInterval(s)}})(t,o,n.isBlock,()=>Qo(t)),s="sel-"+n.uniqueId(),a="data-mce-selected";let i;const l=m=>m!==o&&(ha(m)||vn(m))&&n.isChildOf(m,o)&&n.isEditable(m.parentNode),d=(m,b,v,y=!0)=>t.dispatch("ShowCaret",{target:b,direction:m,before:v}).isDefaultPrevented()?null:(y&&e.scrollIntoView(b,-1===m),r.show(v,b)),c=m=>Fe(m)||Ga(m)||Ya(m),u=m=>c(m.startContainer)||c(m.endContainer),p=(m,b)=>{if(!m)return null;if(m.collapsed){if(!u(m)){const k=b?1:-1,x=Us(k,o,m),S=x.getNode(!b);if(Y(S)){if(Ls(S))return d(k,S,!!b&&!x.isAtEnd(),!1);if(no(S)&&Nt(S.nextSibling)){const _=n.createRng();return _.setStart(S,0),_.setEnd(S,0),_}}const E=x.getNode(b);if(Y(E)){if(Ls(E))return d(k,E,!b&&!x.isAtEnd(),!1);if(no(E)&&Nt(E.previousSibling)){const _=n.createRng();return _.setStart(E,1),_.setEnd(E,1),_}}}return null}let v=m.startContainer,y=m.startOffset;const w=m.endOffset;if(j(v)&&0===y&&ha(v.parentNode)&&(v=v.parentNode,y=n.nodeIndex(v),v=v.parentNode),!Q(v))return null;if(w===y+1&&v===m.endContainer){const k=v.childNodes[y];if(l(k))return(x=>{const S=x.cloneNode(!0),E=t.dispatch("ObjectSelected",{target:x,targetClone:S});if(E.isDefaultPrevented())return null;const _=((T,P)=>{const O=N(t.getBody()),F=t.getDoc(),q=gs(O,"#"+s).getOrThunk(()=>{const st=Da('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',F);return Xt(st,"id",s),Vt(O,st),st}),W=n.createRng();vr(q),To(q,[hr(Jt,F),N(P),hr(Jt,F)]),W.setStart(q.dom.firstChild,1),W.setEnd(q.dom.lastChild,0),Ma(q,{top:n.getPos(T,t.getBody()).y+"px"}),wb(q);const ot=e.getSel();return ot&&(ot.removeAllRanges(),ot.addRange(W)),W})(x,E.targetClone),D=N(x);return H(se(N(t.getBody()),"*[data-mce-selected]"),T=>{wt(D,T)||ee(T,a)}),n.getAttrib(x,a)||x.setAttribute(a,"1"),i=x,h(),_})(k)}return null},f=()=>{i&&i.removeAttribute(a),gs(N(t.getBody()),"#"+s).each(Ot),i=null},h=()=>{r.hide()};return Nn(t)||(t.on("click",m=>{n.isEditable(m.target)||(m.preventDefault(),t.focus())}),t.on("blur NewBlock",f),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",m=>{const b=m.target,v=Sw(t,b);ha(v)?(m.preventDefault(),oa(t,v).each(p)):l(b)&&oa(t,b).each(p)},!0),t.on("mousedown",m=>{const b=m.target;if(b!==o&&"HTML"!==b.nodeName&&!n.isChildOf(b,o)||!((y,w,k)=>{const x=N(y.getBody()),S=y.inline?x:N(In(x).dom.documentElement),E=((_,D,T,P)=>{const O=D.dom.getBoundingClientRect();return{x:T-(_?O.left+D.dom.clientLeft+UN(D):0),y:P-(_?O.top+D.dom.clientTop+FN(D):0)}})(y.inline,S,w,k);return((_,D,T)=>{const P=MN(_),O=IN(_);return D>=0&&T>=0&&D<=P&&T<=O})(S,E.x,E.y)})(t,m.clientX,m.clientY))return;f(),h();const v=Sw(t,b);ha(v)?(m.preventDefault(),oa(t,v).each(p)):fw(o,m.clientX,m.clientY).each(y=>{var w;m.preventDefault(),(w=d(1,y.node,y.position===Vr.Before,!1))&&e.setRng(w),Q(v)?v.focus():t.getBody().focus()})}),t.on("keypress",m=>{tt.modifierPressed(m)||ha(e.getNode())&&m.preventDefault()}),t.on("GetSelectionRange",m=>{let b=m.range;if(i){if(!i.parentNode)return void(i=null);b=b.cloneRange(),b.selectNode(i),m.range=b}}),t.on("SetSelectionRange",m=>{m.range=(m=>{const b=t.schema.getVoidElements(),v=n.createRng(),y=m.startContainer,w=m.startOffset,k=m.endContainer,x=m.endOffset;return pt(b,y.nodeName.toLowerCase())?0===w?v.setStartBefore(y):v.setStartAfter(y):v.setStart(y,w),pt(b,k.nodeName.toLowerCase())?0===x?v.setEndBefore(k):v.setEndAfter(k):v.setEnd(k,x),v})(m.range);const b=p(m.range,m.forward);b&&(m.range=b)}),t.on("AfterSetSelectionRange",m=>{const b=m.range,v=b.startContainer.parentElement;var y,w;u(b)||Q(y=v)&&"mcepastebin"===y.id||h(),Y(w=v)&&n.hasClass(w,"mce-offscreen-selection")||f()}),(t=>{const e=so(),n=Et.DOM,o=document,r=(l=e,d=t,c=>{if(0===c.button){const u=$t(d.dom.getParents(c.target),JA).getOr(null);if(Y(u)&&(g=d.dom,p=d.getBody(),bw(f=u)&&f!==p&&g.isEditable(f.parentElement))){const g=d.dom.getPos(u),p=d.getBody(),f=d.getDoc().documentElement;l.set({element:u,dragging:!1,screenX:c.screenX,screenY:c.screenY,maxX:(d.inline?p.scrollWidth:f.offsetWidth)-2,maxY:(d.inline?p.scrollHeight:f.offsetHeight)-2,relX:c.pageX-g.x,relY:c.pageY-g.y,width:u.offsetWidth,height:u.offsetHeight,ghost:ZA(d,u,u.offsetWidth,u.offsetHeight),intervalId:Hk(100)})}}var g,p,f}),s=((t,e)=>{const n=oi((r,s)=>{return i=r,l=s,(a=e)._selectionOverrides.hideFakeCaret(),void fw(a.getBody(),i,l).fold(()=>a.selection.placeCaretAt(i,l),d=>{const c=a._selectionOverrides.showCaret(1,d.node,d.position===Vr.Before,!1);c?a.selection.setRng(c):a.selection.placeCaretAt(i,l)});var a,i,l},0);e.on("remove",n.cancel);const o=t;return r=>t.on(s=>{const a=Math.max(Math.abs(r.screenX-s.screenX),Math.abs(r.screenY-s.screenY));if(!s.dragging&&a>10){if(e.dispatch("dragstart",YA(r,s.element)).isDefaultPrevented())return;s.dragging=!0,e.focus()}if(s.dragging){const d=r.currentTarget===e.getDoc().documentElement,c=((u,g)=>({pageX:g.pageX-u.relX,pageY:g.pageY+5}))(s,(g=r,p=(m=u=e).inline?gw(m.getBody()):{left:0,top:0},f=(m=>{const b=m.getBody();return m.inline?{left:b.scrollLeft,top:b.scrollTop}:{left:0,top:0}})(u),h=((m,b)=>{if(b.target.ownerDocument!==m.getDoc()){const v=gw(m.getContentAreaContainer()),y=(w=>{const k=w.getBody(),x=w.getDoc().documentElement;return w.inline?{left:k.scrollLeft,top:k.scrollTop}:{left:k.scrollLeft||x.scrollLeft,top:k.scrollTop||x.scrollTop}})(m);return{left:b.pageX-v.left+y.left,top:b.pageY-v.top+y.top}}return{left:b.pageX,top:b.pageY}})(u,g),{pageX:h.left-p.left+f.left,pageY:h.top-p.top+f.top}));i=s.ghost,l=e.getBody(),i.parentNode!==l&&l.appendChild(i),((u,g,p,f,h,m,b,v,y,w,k,x)=>{let S=0,E=0;u.style.left=g.pageX+"px",u.style.top=g.pageY+"px",g.pageX+p>h&&(S=g.pageX+p-h),g.pageY+f>m&&(E=g.pageY+f-m),u.style.width=p-S+"px",u.style.height=f-E+"px";const _=y.clientHeight,D=y.clientWidth,T=b+y.getBoundingClientRect().top,P=v+y.getBoundingClientRect().left;k.on(O=>{O.intervalId.clear(),O.dragging&&x&&(b+8>=_?O.intervalId.set(ww(w)):b-8<=0?O.intervalId.set(Cw(w)):v+8>=D?O.intervalId.set(yw(w)):v-8<=0?O.intervalId.set(vw(w)):T+16>=window.innerHeight?O.intervalId.set(ww(window)):T-16<=0?O.intervalId.set(Cw(window)):P+16>=window.innerWidth?O.intervalId.set(yw(window)):P-16<=0&&O.intervalId.set(vw(window)))})})(s.ghost,c,s.width,s.height,s.maxX,s.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),o,d),n.throttle(r.clientX,r.clientY)}var u,g,m,p,f,h,i,l})})(e,t),a=((l,d)=>c=>{l.on(u=>{var g,p,f,h;if(u.intervalId.clear(),u.dragging){if(p=d,f=(p=>{const f=p.getSel();if(Y(f)){const h=f.getRangeAt(0).startContainer;return j(h)?h.parentNode:h}return null})(d.selection),h=u.element,!zt(f)&&f!==h&&!p.dom.isChildOf(f,h)&&p.dom.isEditable(f)){const p=(h=>{const m=h.cloneNode(!0);return m.removeAttribute("data-mce-selected"),m})(u.element),f=null!==(g=d.getDoc().elementFromPoint(c.clientX,c.clientY))&&void 0!==g?g:d.getBody();d.dispatch("drop",XA(c,f)).isDefaultPrevented()||d.undoManager.transact(()=>{((h,m)=>{const b=h.getParent(m.parentNode,h.isBlock);xw(m),b&&b!==h.getRoot()&&h.isEmpty(b)&&Lo(N(b))})(d.dom,u.element),d.insertContent(d.dom.getOuterHTML(p)),d._selectionOverrides.hideFakeCaret()})}d.dispatch("dragend",hw(c,d.getBody()))}}),Ew(l)})(e,t),i=((l,d)=>c=>kw(l,d,C.some(c)))(e,t);var l,d;t.on("mousedown",r),t.on("mousemove",s),t.on("mouseup",a),n.bind(o,"mousemove",s),n.bind(o,"mouseup",i),t.on("remove",()=>{n.unbind(o,"mousemove",s),n.unbind(o,"mouseup",i)}),t.on("keydown",l=>{l.keyCode===tt.ESC&&kw(e,t,C.none())})})(m=t),FE(m)&&(b=>{const v=k=>{if(!k.isDefaultPrevented()){const x=k.dataTransfer;x&&(St(x.types,"Files")||x.files.length>0)&&(k.preventDefault(),"drop"===k.type&&Xi(b,"Dropped file type is not supported"))}},y=k=>{Ai(b,k.target)&&v(k)},w=()=>{const k=Et.DOM,x=b.dom,S=document,E=b.inline?b.getBody():b.getDoc(),_=["drop","dragover"];H(_,D=>{k.bind(S,D,y),x.bind(E,D,v)}),b.on("remove",()=>{H(_,D=>{k.unbind(S,D,y),x.unbind(E,D,v)})})};b.on("init",()=>{$e.setEditorTimeout(b,w,0)})})(m),(m=>{const b=oi(()=>{if(!m.removed&&m.getBody().contains(document.activeElement)){const v=m.selection.getRng();if(v.collapsed){const y=Hu(m,v,!1);m.selection.setRng(y)}}},0);m.on("focus",()=>{b.throttle()}),m.on("blur",()=>{b.cancel()})})(t),(m=>{m.on("init",()=>{m.on("focusin",b=>{const v=b.target;if(vn(v)){const y=tr(m.getBody(),v),w=Nt(y)?y:v;m.selection.getNode()!==w&&oa(m,w).each(k=>m.selection.setRng(k))}})})})(t)),{showCaret:d,showBlockCaretContainer:m=>{m.hasAttribute("data-mce-caret")&&(gd(m),e.scrollIntoView(m))},hideFakeCaret:h,destroy:()=>{r.destroy(),i=null}};var m},oO=(t,e)=>{let n=e;for(let o=t.previousSibling;j(o);o=o.previousSibling)n+=o.data.length;return n},_w=(t,e,n,o,r)=>{if(j(n)&&(o<0||o>n.data.length))return[];const s=r&&j(n)?[oO(n,o)]:[o];let a=n;for(;a!==e&&a.parentNode;)s.push(t.nodeIndex(a,r)),a=a.parentNode;return a===e?s.reverse():[]},Fm=(t,e,n,o,r,s,a=!1)=>({start:_w(t,e,n,o,a),end:_w(t,e,r,s,a)}),Nw=(t,e)=>{const n=e.slice(),o=n.pop();return Ze(o)?Re(n,(r,s)=>r.bind(a=>C.from(a.childNodes[s])),C.some(t)).bind(r=>j(r)&&(o<0||o>r.data.length)?C.none():C.some({node:r,offset:o})):C.none()},Rw=(t,e)=>Nw(t,e.start).bind(({node:n,offset:o})=>Nw(t,e.end).map(({node:r,offset:s})=>{const a=document.createRange();return a.setStart(n,o),a.setEnd(r,s),a})),qr=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const o=e.parentNode;t.remove(e),qr(t,o,n)}},wl=(t,e,n,o=!0)=>{const r=e.startContainer.parentNode,s=e.endContainer.parentNode;e.deleteContents(),o&&!n(e.startContainer)&&(j(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),j(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),qr(t,r,n),r!==s&&qr(t,s,n))},Um=(t,e)=>C.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),Aw=(t,e,n)=>{const o=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:Lp(o).concat(t.blockPatterns),inlinePatterns:Mp(o).concat(t.inlinePatterns)}},Ow=(t,e,n,o)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,o),r.toString()},Tw=(t,e,n)=>{((o,r,s)=>{if(j(o)&&0>=o.length)return C.some(cn(o,0));{const a=Ho(al);return C.from(a.forwards(o,0,il(o),s)).map(i=>cn(i.container,0))}})(e,0,e).each(o=>{const r=o.container;d1(r,n.start.length,e).each(i=>{const l=t.createRng();l.setStart(r,0),l.setEnd(i.container,i.offset),wl(t,l,d=>d===e)});const s=N(r),a=$a(s);var i,l;/^\s[^\s]/.test(a)&&(i=s,l=a.slice(1),cd.set(i,l))})},Bw=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),xl=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},Dw=(t,e,n)=>{const o=Rw(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=o.startContainer,s=o.endContainer,a=0===o.endOffset?s:s.splitText(o.endOffset),i=0===o.startOffset?r:r.splitText(o.startOffset),l=i.parentNode;return{prefix:e,end:a.parentNode.insertBefore(Bw(t,e+"-end"),a),start:l.insertBefore(Bw(t,e+"-start"),i)}},Pw=(t,e,n)=>{qr(t,t.get(e.prefix+"-end"),n),qr(t,t.get(e.prefix+"-start"),n)},zm=t=>0===t.start.length,Lw=(t,e,n,o)=>{const r=e.start;var s;return cm(t,o.container,o.offset,(s=r,(a,i)=>{const l=a.data.substring(0,i),d=l.lastIndexOf(s.charAt(s.length-1)),c=l.lastIndexOf(s);return-1!==c?c+s.length:-1!==d?d+1:-1}),n).bind(a=>{var i,l;const d=null!==(l=null===(i=n.textContent)||void 0===i?void 0:i.indexOf(r))&&void 0!==l?l:-1;if(-1!==d&&a.offset>=d+r.length){const c=t.createRng();return c.setStart(a.container,a.offset-r.length),c.setEnd(a.container,a.offset),C.some(c)}return dm(a.container,a.offset-r.length,n).map(u=>{const g=t.createRng();return g.setStart(u.container,u.offset),g.setEnd(a.container,a.offset),g}).filter(u=>u.toString()===r).orThunk(()=>Lw(t,e,n,cn(a.container,0)))})},rO=(t,e,n,o)=>{const r=t.dom,s=r.getRoot(),a=n.pattern,i=n.position.container,l=n.position.offset;return dm(i,l-n.pattern.end.length,e).bind(d=>{const c=Fm(r,s,d.container,d.offset,i,l,o);if(zm(a))return C.some({matches:[{pattern:a,startRng:c,endRng:c}],position:d});{const u=kl(t,n.remainingPatterns,d.container,d.offset,e,o),g=u.getOr({matches:[],position:d}),p=g.position;return((h,m,b,v,y,w=!1)=>{if(0===m.start.length&&!w){const k=h.createRng();return k.setStart(b,v),k.setEnd(b,v),C.some(k)}return lm(b,v,y).bind(k=>Lw(h,m,y,k).bind(x=>{var S;return w&&(x.endContainer===k.container&&x.endOffset===k.offset||0===k.offset&&(null===(S=x.endContainer.textContent)||void 0===S?void 0:S.length)===x.endOffset)?C.none():C.some(x)}))})(r,a,p.container,p.offset,e,u.isNone()).map(h=>{const m=((b,v,y,w=!1)=>Fm(b,v,y.startContainer,y.startOffset,y.endContainer,y.endOffset,w))(r,s,h,o);return{matches:g.matches.concat([{pattern:a,startRng:m,endRng:c}]),position:cn(h.startContainer,h.startOffset)}})}})},kl=(t,e,n,o,r,s)=>{const a=t.dom;return lm(n,o,a.getRoot()).bind(i=>{const l=Ow(a,r,n,o);for(let d=0;d<e.length;d++){const c=e[d];if(!xf(l,c.end))continue;const u=e.slice();u.splice(d,1);const g=rO(t,r,{pattern:c,remainingPatterns:u,position:i},s);if(g.isNone()&&o>0)return kl(t,e,n,o-1,r,s);if(g.isSome())return g}return C.none()})},Mw=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?H(e.format,o=>{t.formatter.apply(o)}):t.execCommand(e.cmd,!1,e.value)},Iw=(t,e,n,o,r,s)=>{var a;return((i,l)=>{const d=Yn(i,c=>It(l,u=>c.pattern.start===u.pattern.start&&c.pattern.end===u.pattern.end));return i.length===l.length?d?i:l:i.length>l.length?i:l})(kl(t,r.inlinePatterns,n,o,e,s).fold(()=>[],i=>i.matches),kl(t,(a=r.inlinePatterns,ko(a,(i,l)=>l.end.length-i.end.length)),n,o,e,s).fold(()=>[],i=>i.matches))},Fw=(t,e)=>{if(0===e.length)return;const n=t.dom,o=t.selection.getBookmark(),r=((s,a)=>{const i=ap("mce_textpattern"),l=ts(a,(d,c)=>{const u=Dw(s,i+`_end${d.length}`,c.endRng);return d.concat([{...c,endMarker:u}])},[]);return ts(l,(d,c)=>{const u=l.length-d.length-1,g=zm(c.pattern)?c.endMarker:Dw(s,i+`_start${u}`,c.startRng);return d.concat([{...c,startMarker:g}])},[])})(n,e);H(r,s=>{const a=n.getParent(s.startMarker.start,n.isBlock),i=l=>l===a;zm(s.pattern)?((l,d,c,u)=>{const g=xl(l.dom,c);wl(l.dom,g,u),Mw(l,d,g)})(t,s.pattern,s.endMarker,i):((l,d,c,u,g)=>{const p=l.dom,f=xl(p,u),h=xl(p,c);wl(p,h,g),wl(p,f,g);const b=xl(p,{prefix:c.prefix,start:c.end,end:u.start});Mw(l,d,b)})(t,s.pattern,s.startMarker,s.endMarker,i),Pw(n,s.endMarker,i),Pw(n,s.startMarker,i)}),t.selection.moveToBookmark(o)},Uw=(t,e,n)=>{for(let o=0;o<t.length;o++)if(n(t[o],e))return!0;return!1},jm=Et.DOM,iO=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,Hm=t=>os(t,e=>!1===me(e)),zw=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return Hm({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),remove_trailing_brs:e("remove_trailing_brs"),inline_styles:e("inline_styles"),root_name:iO(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},jw=t=>{const e=t.options.get;return Hm({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},Hw=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,$w=t=>{const e=Hw(t),n=Kp(t),o=t.contentCSS,r=()=>{e.unloadAll(o),t.inline||t.ui.styleSheetLoader.unloadAll(n)},s=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let l="";$.each(t.contentStyles,d=>{l+=d+"\r\n"}),t.dom.addStyle(l)}const a=Promise.all(((l,d,c)=>{const u=[Hw(l).loadAll(d)];return l.inline?u:u.concat([l.ui.styleSheetLoader.loadAll(c)])})(t,o,n)).then(s).catch(s),i=vE(t);return i&&((l,d)=>{const c=N(l.getBody()),u=rd(Jn(c)),g=Qt("style");Xt(g,"type","text/css"),Vt(g,hr(d)),Vt(u,g),l.on("remove",()=>{Ot(g)})})(t,i),a},$m=t=>{var e;!0!==t.removed&&(Nn(e=t)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"}),(e=>{e.bindPendingEventDelegates(),e.initialized=!0,e.dispatch("Init"),e.focus(!0),(o=>{const r=o.dom.getRoot();o.inline||vi(o)&&o.selection.getStart(!0)!==r||he(r).each(s=>{const a=s.getNode(),i=zn(a)?he(a).getOr(s):s;o.selection.setRng(i.toRange())})})(e),e.nodeChanged({initial:!0});const n=$E(e);Ct(n)&&n.call(e,e),(o=>{const r=qE(o);r&&$e.setEditorTimeout(o,()=>{let s;s=!0===r?o:o.editorManager.get(r),s&&!s.destroyed&&(s.focus(),s.selection.scrollIntoView())},100)})(e)})(t))},Vw=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(jm.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const o=t.getBody();var a,i;o.disabled=!0,t.readonly=Xp(t),t.readonly||(t.inline&&"static"===jm.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,t.editorUpload=(t=>{const e=(()=>{let h=[];const m=y=>{if(!y.blob||!y.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const w=y.id||"blobid"+jN+++(()=>{const E=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+E()+E()+E()})(),k=y.name||w,x=y.blob;var S;return{id:G(w),name:G(k),filename:G(y.filename||k+"."+(S=x.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[S.toLowerCase()]||"dat")),blob:G(x),base64:G(y.base64),blobUri:G(y.blobUri||URL.createObjectURL(x)),uri:G(y.uri)}},b=y=>$t(h,y).getOrUndefined(),v=y=>b(w=>w.id()===y);return{create:(y,w,k,x,S)=>{if(at(y))return m({id:y,name:x,filename:S,blob:w,base64:k});if(le(y))return m(y);throw new Error("Unknown input type")},add:y=>{v(y.id())||h.push(y)},get:v,getByUri:y=>b(w=>w.blobUri()===y),getByData:(y,w)=>b(k=>k.base64()===y&&k.blob().type===w),findFirst:b,removeByUri:y=>{h=ct(h,w=>w.blobUri()!==y||(URL.revokeObjectURL(w.blobUri()),!1))},destroy:()=>{H(h,y=>{URL.revokeObjectURL(y.blobUri())}),h=[]}}})();let n,o;const r=wy(),s=[],a=h=>m=>t.selection?h(m):[],i=(h,m,b)=>{let v=0;do{v=h.indexOf(m,v),-1!==v&&(h=h.substring(0,v)+b+h.substr(v+m.length),v+=b.length-m.length+1)}while(-1!==v);return h},l=(h,m,b)=>(h=i(h,`src="${m}"`,`src="${b}"${b===vt.transparentSrc?' data-mce-placeholder="1"':""}`),i(h,'data-mce-src="'+m+'"','data-mce-src="'+b+'"')),d=(h,m)=>{H(t.undoManager.data,b=>{"fragmented"===b.type?b.fragments=yt(b.fragments,v=>l(v,h,m)):b.content=l(b.content,h,m)})},c=()=>(n||(n=ky(t,r)),p().then(a(h=>{const m=yt(h,b=>b.blobInfo);return n.upload(m,xy(t)).then(a(b=>{const v=[];let y=!1;const w=yt(b,(k,x)=>{const{blobInfo:S,image:E}=h[x];let _=!1;return k.status&&lE(t)?(k.url&&!re(E.src,k.url)&&(y=!0),e.removeByUri(E.src),Nn(t)||((D,T)=>{const P=t.convertURL(T,"src");var O;d(D.src,T),Qn(N(D),{src:$p(t)?(O=T,O+(-1===O.indexOf("?")?"?":"&")+(new Date).getTime()):T,"data-mce-src":P})})(E,k.url)):k.error&&(k.error.remove&&(d(E.src,vt.transparentSrc),v.push(E),_=!0),Xi(t,rn.translate(["Failed to upload image: {0}",k.error.message]))),{element:E,status:k.status,uploadUri:k.url,blobInfo:S,removed:_}});return v.length>0&&!Nn(t)?t.undoManager.transact(()=>{H(v,k=>{t.dom.remove(k),e.removeByUri(k.src)})}):y&&t.undoManager.dispatchChange(),w}))}))),u=()=>Hp(t)?c():Promise.resolve([]),g=h=>Yn(s,m=>m(h)),p=()=>(o||(o=((t,e)=>{const n={};return{findAll:(o,r=jt)=>{const s=ct((i=o)?Ae(i.getElementsByTagName("img")):[],i=>{const l=i.src;return!i.hasAttribute("data-mce-bogus")&&!i.hasAttribute("data-mce-placeholder")&&!(!l||l===vt.transparentSrc)&&(te(l,"blob:")?!t.isUploaded(l)&&r(i):!!te(l,"data:")&&r(i))}),a=yt(s,i=>{const l=i.src;if(pt(n,l))return n[l].then(d=>at(d)?d:{image:i,blobInfo:d.blobInfo});{const d=((c,u)=>{const g=()=>Promise.reject("Invalid data URI");if(te(u,"blob:")){const h=c.getByUri(u);return Y(h)?Promise.resolve(h):(p=u,te(p,"blob:")?(m=p,fetch(m).then(b=>b.ok?b.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${m} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))):te(p,"data:")?(f=p,new Promise((m,b)=>{vu(f).bind(({type:v,data:y,base64Encoded:w})=>kv(v,y,w)).fold(()=>b("Invalid data URI"),m)})):Promise.reject("Unknown URI format")).then(m=>Ev(m).then(b=>Sv(b,!1,v=>C.some(_v(c,m,v))).getOrThunk(g)))}var m,p,f;return te(u,"data:")?Nv(c,u).fold(g,h=>Promise.resolve(h)):Promise.reject("Unknown image data format")})(e,l).then(c=>(delete n[l],{image:i,blobInfo:c})).catch(c=>(delete n[l],c));return n[l]=d,d}});var i;return Promise.all(a)}}})(r,e)),o.findAll(t.getBody(),g).then(a(h=>{const m=ct(h,b=>at(b)?(Xi(t,b),!1):"blob"!==b.uriType);return Nn(t)||H(m,b=>{d(b.image.src,b.blobInfo.blobUri()),b.image.src=b.blobInfo.blobUri(),b.image.removeAttribute("data-mce-src")}),m}))),f=h=>h.replace(/src="(blob:[^"]+)"/g,(m,b)=>{const v=r.getResultUri(b);if(v)return'src="'+v+'"';let y=e.getByUri(b);return y||(y=Re(t.editorManager.get(),(w,k)=>w||k.editorUpload&&k.editorUpload.blobCache.getByUri(b),void 0)),y?'src="data:'+y.blob().type+";base64,"+y.base64()+'"':m});return t.on("SetContent",()=>{Hp(t)?u():p()}),t.on("RawSaveContent",h=>{h.content=f(h.content)}),t.on("GetContent",h=>{h.source_view||"raw"===h.format||"tree"===h.format||(h.content=f(h.content))}),t.on("PostRender",()=>{t.parser.addNodeFilter("img",h=>{H(h,m=>{const b=m.attr("src");if(!b||e.getByUri(b))return;const v=r.getResultUri(b);v&&m.attr("src",v)})})}),{blobCache:e,addFilter:h=>{s.push(h)},uploadImages:c,uploadImagesAuto:u,scanForImages:p,destroy:()=>{e.destroy(),r.destroy(),o=n=null}}})(t),t.schema=ro(jw(t)),t.dom=Et(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:gE(t),referrerPolicy:Hd(t),onSetAttrib:a=>{t.dispatch("SetAttrib",a)}}),t.parser=(a=>{const i=Ir(zw(a),a.schema);return i.addAttributeFilter("src,href,style,tabindex",(l,d)=>{const c=a.dom,u="data-mce-"+d;let g=l.length;for(;g--;){const p=l[g];let f=p.attr(d);if(f&&!p.attr(u)){if(0===f.indexOf("data:")||0===f.indexOf("blob:"))continue;"style"===d?(f=c.serializeStyle(c.parseStyle(f),p.name),f.length||(f=null),p.attr(u,f),p.attr(d,f)):"tabindex"===d?(p.attr(u,f),p.attr(d,null)):p.attr(u,a.convertURL(f,d,p.name))}}}),i.addNodeFilter("script",l=>{let d=l.length;for(;d--;){const c=l[d],u=c.attr("type")||"no/type";0!==u.indexOf("mce-")&&c.attr("type","mce-"+u)}}),lS(a)&&i.addNodeFilter("#cdata",l=>{var d;let c=l.length;for(;c--;){const u=l[c];u.type=8,u.name="#comment",u.value="[CDATA["+a.dom.encode(null!==(d=u.value)&&void 0!==d?d:"")+"]]"}}),i.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",l=>{let d=l.length;const c=a.schema.getNonEmptyElements();for(;d--;){const u=l[d];u.isEmpty(c)&&0===u.getAll("br").length&&u.append(new be("br",1))}}),i})(t),t.serializer=uy((a=>{const i=a.options.get;return{...zw(a),...jw(a),...Hm({url_converter:i("url_converter"),url_converter_scope:i("url_converter_scope"),element_format:i("element_format"),entities:i("entities"),entity_encoding:i("entity_encoding"),indent:i("indent"),indent_after:i("indent_after"),indent_before:i("indent_before")})}})(t),t),t.selection=cy(t.dom,t.getWin(),t.serializer,t),t.annotator=Gh(t),t.formatter=_y(t),t.undoManager=Ry(t),t._nodeChangeDispatcher=new BA(t),t._selectionOverrides=nO(t),(a=>{const i=so(),l=Kt(!1),d=Td(c=>{a.dispatch("longpress",{...c,type:"longpress"}),l.set(!0)},400);a.on("touchstart",c=>{DC(c).each(u=>{d.cancel();const g={x:u.clientX,y:u.clientY,target:c.target};d.throttle(c),l.set(!1),i.set(g)})},!0),a.on("touchmove",c=>{d.cancel(),DC(c).each(u=>{i.on(g=>{((p,f)=>{const h=Math.abs(p.clientX-f.x),m=Math.abs(p.clientY-f.y);return h>5||m>5})(u,g)&&(i.clear(),l.set(!1),a.dispatch("longpresscancel"))})})},!0),a.on("touchend touchcancel",c=>{d.cancel(),"touchcancel"!==c.type&&i.get().filter(u=>u.target.isEqualNode(c.target)).each(()=>{l.get()?c.preventDefault():a.dispatch("tap",{...c,type:"tap"})})},!0)})(t),(i=a=t).on("click",l=>{i.dom.getParent(l.target,"details")&&l.preventDefault()}),(i=>{i.parser.addNodeFilter("details",l=>{H(l,d=>{d.attr("data-mce-open",d.attr("open")),d.attr("open","open")})}),i.serializer.addNodeFilter("details",l=>{H(l,d=>{const c=d.attr("data-mce-open");d.attr("open",at(c)?c:null),d.attr("data-mce-open",null)})})})(a),(a=>{const i="contenteditable",l=" "+$.trim(aS(a))+" ",d=" "+$.trim(Zp(a))+" ",c=MC(l),u=MC(d),g=iS(a);g.length>0&&a.on("BeforeSetContent",p=>{((f,h,m)=>{let b=h.length,v=m.content;if("raw"!==m.format){for(;b--;)v=v.replace(h[b],TR(f,v,Zp(f)));m.content=v}})(a,g,p)}),a.parser.addAttributeFilter("class",p=>{let f=p.length;for(;f--;){const h=p[f];c(h)?h.attr(i,"true"):u(h)&&h.attr(i,"false")}}),a.serializer.addAttributeFilter(i,p=>{let f=p.length;for(;f--;){const h=p[f];(c(h)||u(h))&&(g.length>0&&h.attr("data-mce-content")?(h.name="#text",h.type=3,h.raw=!0,h.value=h.attr("data-mce-content")):h.attr(i,null))}})})(t),Nn(t)||((a=>{a.on("mousedown",i=>{i.detail>=3&&(i.preventDefault(),(t=>{const e=((n,o)=>{const r=L.fromRangeStart(n).getNode(),s=(c=o,Ao(N(r),u=>on(u.dom)||Ie(u),cw(c)).getOr(N(c)).dom),a=mw(r,s,!1),i=mw(r,s,!0),l=document.createRange();var c;return uw(a,s).fold(()=>{dw(a)?l.setStart(a,0):l.setStartBefore(a)},d=>l.setStartBefore(d.dom)),uw(i,s).fold(()=>{dw(i)?l.setEnd(i,i.data.length):l.setEndAfter(i)},d=>l.setEndAfter(d.dom)),l})(t.selection.getRng(),t.getBody());t.selection.setRng(nu(e))})(a))})})(t),(a=>{(i=>{const l=[",",".",";",":","!","?"],d=[32],c=()=>{return p=rS(i),f=sS(i),{inlinePatterns:Mp(p),blockPatterns:Lp(p),dynamicPatternsLookup:f};var p,f},u=()=>i.options.isSet("text_patterns_lookup");i.on("keydown",p=>{if(13===p.keyCode&&!tt.modifierPressed(p)&&i.selection.isCollapsed()){const f=c();(f.inlinePatterns.length>0||f.blockPatterns.length>0||u())&&((t,e)=>{const n=t.selection.getRng();return Um(t,n).map(o=>{var r;const s=Math.max(0,n.startOffset),a=Aw(e,o,null!==(r=o.textContent)&&void 0!==r?r:""),i=Iw(t,o,n.startContainer,s,a,!0),l=((d,c,u,g)=>{var p;const f=d.dom,h=Te(d);if(!f.is(c,h))return[];const m=null!==(p=c.textContent)&&void 0!==p?p:"";return((b,v)=>{const y=ko(b,(x,S)=>S.start.length-x.start.length),w=v.replace(Jt," ");return $t(y,k=>0===v.indexOf(k.start)||0===w.indexOf(k.start))})(u.blockPatterns,m).map(b=>$.trim(m).length===b.start.length?[]:[{pattern:b,range:Fm(f,f.getRoot(),c,0,c,0,!0)}]).getOr([])})(t,o,a);return(l.length>0||i.length>0)&&(t.undoManager.add(),t.undoManager.extra(()=>{t.execCommand("mceInsertNewLine")},()=>{t.insertContent("\ufeff"),Fw(t,i),((u,g)=>{if(0===g.length)return;const p=u.selection.getBookmark();H(g,f=>((h,m)=>{const v=m.pattern,y=Rw(h.dom.getRoot(),m.range).getOrDie("Unable to resolve path range");return Um(h,y).each(w=>{"block-format"===v.type?((k,x)=>{const S=x.get(k);return Ht(S)&&we(S).exists(E=>pt(E,"block"))})(v.format,h.formatter)&&h.undoManager.transact(()=>{Tw(h.dom,w,v),h.formatter.apply(v.format)}):"block-command"===v.type&&h.undoManager.transact(()=>{Tw(h.dom,w,v),h.execCommand(v.cmd,!1,v.value)})}),!0})(u,f)),u.selection.moveToBookmark(p)})(t,l);const d=t.selection.getRng(),c=lm(d.startContainer,d.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),c.each(u=>{const g=u.container;"\ufeff"===g.data.charAt(u.offset-1)&&(g.deleteData(u.offset-1,1),qr(t.dom,g.parentNode,p=>p===t.dom.getRoot()))})}),!0)}).getOr(!1)})(i,f)&&p.preventDefault()}},!0);const g=()=>{if(i.selection.isCollapsed()){const p=c();(p.inlinePatterns.length>0||u())&&((f,h)=>{const m=f.selection.getRng();Um(f,m).map(b=>{const v=Math.max(0,m.startOffset-1),y=Ow(f.dom,b,m.startContainer,v),w=Aw(h,b,y),k=Iw(f,b,m.startContainer,v,w,!1);k.length>0&&f.undoManager.transact(()=>{Fw(f,k)})})})(i,p)}};i.on("keyup",p=>{Uw(d,p,(f,h)=>f===h.keyCode&&!tt.modifierPressed(h))&&g()}),i.on("keypress",p=>{Uw(l,p,(f,h)=>f.charCodeAt(0)===h.charCode)&&$e.setEditorTimeout(i,g)})})(a)})(t));const r=TA(t);((t,e)=>{t.addCommand("delete",()=>{var n;BC(n=t,e,!1).fold(()=>{Hc(n),$c(n)},Jr)}),t.addCommand("forwardDelete",()=>{var n;BC(n=t,e,!0).fold(()=>p0(n,"ForwardDelete"),Jr)})})(t,r),(a=>{a.on("NodeChange",Z(OR,a))})(t),(a=>{var i;const l=a.dom,d=Te(a),c=null!==(i=xE(a))&&void 0!==i?i:"",u=(g,p)=>{if((m=>{if(Oy(m)){const b=m.keyCode;return!Ty(m)&&(tt.metaKeyPressed(m)||m.altKey||b>=112&&b<=123||St(GN,b))}return!1})(g))return;const f=a.getBody(),h=!(Oy(m=g)&&!(Ty(m)||"keyup"===m.type&&229===m.keyCode))&&((m,b,v)=>{if(Ft(N(b),!1)){const y=b.firstElementChild;return!y||!m.getStyle(b.firstElementChild,"padding-left")&&!m.getStyle(b.firstElementChild,"padding-right")&&v===y.nodeName.toLowerCase()}return!1})(l,f,d);var m;(""!==l.getAttrib(f,Ay)!==h||p)&&(l.setAttrib(f,Ay,h?c:null),l.setAttrib(f,"aria-placeholder",h?c:null),((m,b)=>{m.dispatch("PlaceholderToggle",{state:b})})(a,h),a.on(h?"keydown":"keyup",u),a.off(h?"keyup":"keydown",u))};gn(c)&&a.on("init",g=>{u(g,!0),a.on("change SetContent ExecCommand",u),a.on("paste",p=>$e.setEditorTimeout(a,()=>u(p)))})})(t),(t=>{const e=Kt(!1),n=Kt(eS(t)?"text":"html"),o=(r=>{const s=Kt(null);return{create:()=>((a,i)=>{const{dom:l,selection:d}=a,c=a.getBody();i.set(d.getRng());const u=l.add(a.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},K1);vt.browser.isFirefox()&&l.setStyle(u,"left","rtl"===l.getStyle(c,"direction",!0)?65535:-65535),l.bind(u,"beforedeactivate focusin focusout",g=>{g.stopPropagation()}),u.focus(),d.select(u,!0)})(r,s),remove:()=>((a,i)=>{const l=a.dom;if(Tm(a)){let d;const c=i.get();for(;d=Tm(a);)l.remove(d),l.unbind(d);c&&a.selection.setRng(c)}i.set(null)})(r,s),getEl:()=>Tm(r),getHtml:()=>(a=>{const i=a.dom,l=(g,p)=>{g.appendChild(p),i.remove(p,!0)},[d,...c]=ct(a.getBody().childNodes,PA);H(c,g=>{l(d,g)});const u=i.select("div[id=mcepastebin]",d);for(let g=u.length-1;g>=0;g--){const p=i.create("div");d.insertBefore(p,u[g]),l(p,u[g])}return d?d.innerHTML:""})(r),getLastRng:s.get}})(t);var r,s,a;r=t,(vt.browser.isChromium()||vt.browser.isSafari())&&(a=zA,(s=r).on("PastePreProcess",i=>{i.content=a(s,i.content,i.internal)})),((r,s)=>{r.addCommand("mceTogglePlainTextPaste",()=>{((a,i)=>{"text"===i.get()?(i.set("html"),eb(a,!1)):(i.set("text"),eb(a,!0)),a.focus()})(r,s)}),r.addCommand("mceInsertClipboardContent",(a,i)=>{i.html&&yl(r,i.html,i.internal),i.text&&Pm(r,i.text)})})(t,n),(r=>{const s=l=>d=>{l(r,d)},a=YE(r);Ct(a)&&r.on("PastePreProcess",s(a));const i=XE(r);Ct(i)&&r.on("PastePostProcess",s(i))})(t),t.on("PreInit",()=>{(r=>{r.on("cut",(s=>a=>{!a.isDefaultPrevented()&&sw(s)&&nw(a,rw(s),ow(s),()=>{if(vt.browser.isChromium()||vt.browser.isFirefox()){const i=s.selection.getRng();$e.setEditorTimeout(s,()=>{s.selection.setRng(i),s.execCommand("Delete")},0)}else s.execCommand("Delete")})})(r)),r.on("copy",(s=>a=>{!a.isDefaultPrevented()&&sw(s)&&nw(a,rw(s),ow(s),bt)})(r))})(t),((r,s)=>{GE(r)&&r.on("dragend dragover draggesture dragdrop drop drag",a=>{a.preventDefault(),a.stopPropagation()}),di(r)||r.on("drop",a=>{const i=a.dataTransfer;i&&It(i.files,d=>/^image\//.test(d.type))&&a.preventDefault()}),r.on("drop",a=>{if(a.isDefaultPrevented())return;const i=aw(r,a);if(zt(i))return;const l=Z1(a.dataTransfer),d=bo(l,vl());if((!tw(l)||(p=>{const f=p["text/plain"];return!!f&&0===f.indexOf("file://")})(l))&&ew(r,a,i))return;const c=l[vl()],u=c||l["text/html"]||l["text/plain"],g=((p,f,h,m)=>{const b=p.getParent(h,v=>Io(f,v));if(b&&pt(m,"text/html")){const v=(new DOMParser).parseFromString(m["text/html"],"text/html").body;return!Ge(v.querySelector(b.nodeName.toLowerCase()))}return!1})(r.dom,r.schema,i.startContainer,l);s.get()&&!g||u&&(a.preventDefault(),$e.setEditorTimeout(r,()=>{r.undoManager.transact(()=>{c&&r.execCommand("Delete"),iw(r,i);const p=X1(u);l["text/html"]?yl(r,p,d):Pm(r,p)})}))}),r.on("dragstart",a=>{s.set(!0)}),r.on("dragover dragend",a=>{di(r)&&!s.get()&&(a.preventDefault(),iw(r,aw(r,a))),"dragend"===a.type&&s.set(!1)})})(t,e),((t,e,n)=>{((o,r,s)=>{let a;o.on("keydown",i=>{var l;(tt.metaKeyPressed(l=i)&&86===l.keyCode||l.shiftKey&&45===l.keyCode)&&!i.isDefaultPrevented()&&(a=i.shiftKey&&86===i.keyCode)}),o.on("paste",i=>{if(i.isDefaultPrevented()||(c=i,vt.os.isAndroid()&&0===(null===(g=null===(u=c.clipboardData)||void 0===u?void 0:u.items)||void 0===g?void 0:g.length)))return;var c,u,g;const l="text"===s.get()||a;a=!1;const d=Z1(i.clipboardData);!tw(d)&&ew(o,i,r.getLastRng()||o.selection.getRng())||(bo(d,"text/html")?(i.preventDefault(),Lm(o,d,d["text/html"],l)):bo(d,"text/plain")&&bo(d,"text/uri-list")?(i.preventDefault(),Lm(o,d,d["text/plain"],l)):(r.create(),$e.setEditorTimeout(o,()=>{const c=r.getHtml();r.remove(),Lm(o,d,c,l)},0)))})})(t,e,n),(o=>{const r=a=>te(a,"webkit-fake-url"),s=a=>te(a,"data:");o.parser.addNodeFilter("img",(a,i,l)=>{if(!di(o)&&!0===(null===(c=l.data)||void 0===c?void 0:c.paste))for(const d of a){const c=d.attr("src");at(c)&&!d.attr("data-mce-object")&&c!==vt.transparentSrc&&(r(c)||!oS(o)&&s(c))&&d.remove()}var c})})(t)})(t,o,n)})})(t);const s=(a=>{const i=a;return(l=a,Rt(l.plugins,"rtc").bind(d=>C.from(d.setup))).fold(()=>(i.rtcInstance=ry(a),C.none()),l=>(i.rtcInstance=(()=>{const d=G(null),c=G("");return{init:{bindEvents:bt},undoManager:{beforeChange:bt,add:d,undo:d,redo:d,clear:bt,reset:bt,hasUndo:Bt,hasRedo:Bt,transact:d,ignore:bt,extra:bt},formatter:{match:Bt,matchAll:G([]),matchNode:G(void 0),canApply:Bt,closest:c,apply:bt,remove:bt,toggle:bt,formatChanged:G({unbind:bt})},editor:{getContent:c,setContent:G({content:"",html:""}),insertContent:G(""),addVisual:bt},selection:{getContent:c},autocompleter:{addDecoration:bt,removeDecoration:bt},raw:{getModel:G(C.none())}}})(),C.some(()=>l().then(d=>(i.rtcInstance=(c=>{const u=y=>le(y)?y:{},{init:g,undoManager:p,formatter:f,editor:h,selection:m,autocompleter:b,raw:v}=c;return{init:{bindEvents:g.bindEvents},undoManager:{beforeChange:p.beforeChange,add:p.add,undo:p.undo,redo:p.redo,clear:p.clear,reset:p.reset,hasUndo:p.hasUndo,hasRedo:p.hasRedo,transact:(y,w,k)=>p.transact(k),ignore:(y,w)=>p.ignore(w),extra:(y,w,k,x)=>p.extra(k,x)},formatter:{match:(y,w,k,x)=>f.match(y,u(w),x),matchAll:f.matchAll,matchNode:f.matchNode,canApply:y=>f.canApply(y),closest:y=>f.closest(y),apply:(y,w,k)=>f.apply(y,u(w)),remove:(y,w,k,x)=>f.remove(y,u(w)),toggle:(y,w,k)=>f.toggle(y,u(w)),formatChanged:(y,w,k,x,S)=>f.formatChanged(w,k,x,S)},editor:{getContent:y=>h.getContent(y),setContent:(y,w)=>({content:h.setContent(y,w),html:""}),insertContent:(y,w)=>(h.insertContent(y),""),addVisual:h.addVisual},selection:{getContent:(y,w)=>m.getContent(w)},autocompleter:{addDecoration:b.addDecoration,removeDecoration:b.removeDecoration},raw:{getModel:()=>C.some(v.getRawModel())}}})(d),d.rtc.isRemote)))));var l})(t);(a=>{const i=a.getDoc(),l=a.getBody();a.dispatch("PreInit"),WE(a)||(i.body.spellcheck=!1,jm.setAttrib(l,"spellcheck","false")),a.quirks=(t=>{const e=$.each,n=tt.BACKSPACE,o=tt.DELETE,r=t.dom,s=t.selection,a=t.parser,i=vt.browser,l=i.isFirefox(),d=i.isChromium()||i.isSafari(),c=vt.deviceType.isiPhone()||vt.deviceType.isiPad(),u=vt.os.isMacOS()||vt.os.isiOS(),g=(T,P)=>{try{t.getDoc().execCommand(T,!1,String(P))}catch{}},p=T=>T.isDefaultPrevented(),f=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",T=>{let P;if(T.target===t.getDoc().documentElement)if(P=s.getRng(),t.getBody().focus(),"mousedown"===T.type){if(Fe(P.startContainer))return;s.placeCaretAt(T.clientX,T.clientY)}else s.setRng(P)})},m=()=>{Range.prototype.getClientRects||t.on("mousedown",T=>{if(!p(T)&&"HTML"===T.target.nodeName){const P=t.getBody();P.blur(),$e.setEditorTimeout(t,()=>{P.focus()})}})},b=()=>{const T=Jp(t);t.on("click",P=>{const O=P.target;/^(IMG|HR)$/.test(O.nodeName)&&r.isEditable(O.parentNode)&&(P.preventDefault(),t.selection.select(O),t.nodeChanged()),"A"===O.nodeName&&r.hasClass(O,T)&&0===O.childNodes.length&&r.isEditable(O.parentNode)&&(P.preventDefault(),s.select(O))})},v=()=>{t.on("keydown",T=>{if(!p(T)&&T.keyCode===n&&s.isCollapsed()&&0===s.getRng().startOffset){const P=s.getNode().previousSibling;if(P&&P.nodeName&&"table"===P.nodeName.toLowerCase())return T.preventDefault(),!1}return!0})},y=()=>{Xp(t)||t.on("BeforeExecCommand mousedown",()=>{g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),Gp(t)||g("enableObjectResizing",!1)})},w=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},k=()=>{t.inline||t.on("keydown",()=>{document.activeElement===document.body&&t.getWin().focus()})},x=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",T=>{let P;"HTML"===T.target.nodeName&&(P=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(P),t.selection.normalize(),t.nodeChanged())}))},S=()=>{u&&t.on("keydown",T=>{!tt.metaKeyPressed(T)||T.shiftKey||37!==T.keyCode&&39!==T.keyCode||(T.preventDefault(),t.selection.getSel().modify("move",37===T.keyCode?"backward":"forward","lineboundary"))})},E=()=>{t.on("click",T=>{let P=T.target;do{if("A"===P.tagName)return void T.preventDefault()}while(P=P.parentNode)}),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},_=()=>{t.on("init",()=>{t.dom.bind(t.getBody(),"submit",T=>{T.preventDefault()})})},D=bt;return Nn(t)?(d&&(h(),b(),_(),f(),c&&(k(),x(),E())),l&&(m(),y(),w(),S())):(t.on("keydown",T=>{if(p(T)||T.keyCode!==tt.BACKSPACE)return;let P=s.getRng();const O=P.startContainer,F=P.startOffset,q=r.getRoot();let W=O;if(P.collapsed&&0===F){for(;W.parentNode&&W.parentNode.firstChild===W&&W.parentNode!==q;)W=W.parentNode;"BLOCKQUOTE"===W.nodeName&&(t.formatter.toggle("blockquote",void 0,W),P=r.createRng(),P.setStart(O,0),P.setEnd(O,0),s.setRng(P))}}),(()=>{const T=P=>{const O=r.create("body"),F=P.cloneContents();return O.appendChild(F),s.serializer.serialize(O,{format:"html"})};t.on("keydown",P=>{const O=P.keyCode;if(!p(P)&&(O===o||O===n)&&t.selection.isEditable()){const F=t.selection.isCollapsed(),q=t.getBody();if(F&&!r.isEmpty(q)||!F&&!(W=>{const ot=T(W),st=r.createRng();return st.selectNode(t.getBody()),ot===T(st)})(t.selection.getRng()))return;P.preventDefault(),t.setContent(""),q.firstChild&&r.isBlock(q.firstChild)?t.selection.setCursorLocation(q.firstChild,0):t.selection.setCursorLocation(q,0),t.nodeChanged()}})})(),vt.windowsPhone||t.on("keyup focusin mouseup",T=>{tt.modifierPressed(T)||(P=>{const O=P.getBody(),F=P.selection.getRng();return F.startContainer===F.endContainer&&F.startContainer===O&&0===F.startOffset&&F.endOffset===O.childNodes.length})(t)||s.normalize()},!0),d&&(h(),b(),t.on("init",()=>{g("DefaultParagraphSeparator",Te(t))}),_(),v(),a.addNodeFilter("br",T=>{let P=T.length;for(;P--;)"Apple-interchange-newline"===T[P].attr("class")&&T[P].remove()}),c?(k(),x(),E()):f()),l&&(t.on("keydown",T=>{if(!p(T)&&T.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(s.isCollapsed()&&0===s.getRng().startOffset){const P=s.getNode(),O=P.previousSibling;if("HR"===P.nodeName)return r.remove(P),void T.preventDefault();O&&O.nodeName&&"hr"===O.nodeName.toLowerCase()&&(r.remove(O),T.preventDefault())}}}),m(),(()=>{const T=()=>{const O=r.getAttribs(s.getStart().cloneNode(!1));return()=>{const F=s.getStart();F!==t.getBody()&&(r.setAttrib(F,"style",null),e(O,q=>{F.setAttributeNode(q.cloneNode(!0))}))}},P=()=>!s.isCollapsed()&&r.getParent(s.getStart(),r.isBlock)!==r.getParent(s.getEnd(),r.isBlock);t.on("keypress",O=>{let F;return!(!(p(O)||8!==O.keyCode&&46!==O.keyCode)&&P()&&(F=T(),t.getDoc().execCommand("delete",!1),F(),O.preventDefault(),1))}),r.bind(t.getDoc(),"cut",O=>{if(!p(O)&&P()){const F=T();$e.setEditorTimeout(t,()=>{F()})}})})(),y(),t.on("SetContent ExecCommand",T=>{"setcontent"!==T.type&&"mceInsertLink"!==T.command||e(r.select("a:not([data-mce-block])"),P=>{var O;let F=P.parentNode;const q=r.getRoot();if(F?.lastChild===P){for(;F&&!r.isBlock(F);){if((null===(O=F.parentNode)||void 0===O?void 0:O.lastChild)!==F||F===q)return;F=F.parentNode}r.add(F,"br",{"data-mce-bogus":1})}})}),w(),S(),v())),{refreshContentEditable:D,isHidden:()=>{if(!l||t.removed)return!1;const T=t.selection.getSel();return!T||!T.rangeCount||0===T.rangeCount}}})(a),a.dispatch("PostRender");const d=yE(a);void 0!==d&&(l.dir=d);const c=KE(a);c&&a.on("BeforeSetContent",u=>{$.each(c,g=>{u.content=u.content.replace(g,p=>"\x3c!--mce:protected "+escape(p)+"--\x3e")})}),a.on("SetContent",()=>{a.addVisual(a.getBody())}),a.on("compositionstart compositionend",u=>{a.composing="compositionstart"===u.type})})(t),s.fold(()=>{$w(t).then(()=>$m(t))},a=>{t.setProgressState(!0),$w(t).then(()=>{a().then(i=>{t.setProgressState(!1),$m(t),sy(t)},i=>{t.notificationManager.open({type:"error",text:String(i)}),$m(t),sy(t)})})})},lO=jt,Vm=Et.DOM,qw=Et.DOM,Ww=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),Kw=t=>{const e=t.getElement();return t.inline?Ww(null):(n=>{const o=qw.create("div");return qw.insertAfter(o,n),Ww(o,o)})(e)},dO=async t=>{t.dispatch("ScriptsLoaded"),(n=>{const o=$.trim(Vp(n)),r=n.ui.registry.getAll().icons,s={...Yi.get("default").icons,...Yi.get(o).icons};_t(s,(a,i)=>{pt(r,i)||n.ui.registry.addIcon(i,a)})})(t),(n=>{const o=_r(n);if(at(o)){const r=rr.get(o);n.theme=r(n,rr.urls[o])||{},Ct(n.theme.init)&&n.theme.init(n,rr.urls[o]||n.documentBaseUrl.replace(/\/$/,""))}else n.theme={}})(t),(n=>{const o=$d(n),r=Fr.get(o);n.model=r(n,Fr.urls[o])})(t),(n=>{const o=[];H(li(n),r=>{((s,a,i)=>{const l=Ur.get(i),d=Ur.urls[i]||s.documentBaseUrl.replace(/\/$/,"");if(i=$.trim(i),l&&-1===$.inArray(a,i)){if(s.plugins[i])return;try{const c=l(s,d)||{};s.plugins[i]=c,Ct(c.init)&&(c.init(s,d),a.push(i))}catch(c){((u,g,p)=>{const f=rn.translate(["Failed to initialize plugin: {0}",g]);Xh(u,"PluginLoadError",{message:f}),Qi(f,p),Xi(u,f)})(s,i,c)}}})(n,o,r.replace(/^\-/,""))})})(t);const e=await(n=>{const o=n.getElement();return n.orgDisplay=o.style.display,at(_r(n))?(r=>{const s=r.theme.renderUI;return s?s():Kw(r)})(n):Ct(_r(n))?(r=>{const s=r.getElement(),a=_r(r)(r,s);return a.editorContainer.nodeType&&(a.editorContainer.id=a.editorContainer.id||r.id+"_parent"),a.iframeContainer&&a.iframeContainer.nodeType&&(a.iframeContainer.id=a.iframeContainer.id||r.id+"_iframecontainer"),a.height=a.iframeHeight?a.iframeHeight:s.offsetHeight,a})(n):Kw(n)})(t);var n,o;((n,o)=>{const r={show:C.from(o.show).getOr(bt),hide:C.from(o.hide).getOr(bt),isEnabled:C.from(o.isEnabled).getOr(jt),setEnabled:s=>{n.mode.isReadOnly()||C.from(o.setEnabled).each(a=>a(s))}};n.ui={...n.ui,...r}})(t,C.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(n=t).contentCSS=n.contentCSS.concat(Cy(o=n,bE(o)),(o=>Cy(o,Kp(o)))(n)),t.inline?Vw(t):((n,o)=>{((r,s)=>{const a=r.translate("Rich Text Area"),i=Ln(N(r.getElement()),"tabindex").bind(Oa),l=((d,c,u,g)=>{const p=Qt("iframe");return g.each(f=>Xt(p,"tabindex",f)),Qn(p,u),Qn(p,{id:d+"_ifr",frameBorder:"0",allowTransparency:"true",title:c}),pr(p,"tox-edit-area__iframe"),p})(r.id,a,Jk(r),i).dom;l.onload=()=>{l.onload=null,r.dispatch("load")},r.contentAreaContainer=s.iframeContainer,r.iframeElement=l,r.iframeHTML=(d=>{let c=Zk(d)+"<html><head>";zp(d)!==d.documentBaseUrl&&(c+='<base href="'+d.documentBaseURI.getURI()+'" />'),c+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const u=tE(d),g=eE(d),p=d.translate(jE(d));return jp(d)&&(c+='<meta http-equiv="Content-Security-Policy" content="'+jp(d)+'" />'),c+=`</head><body id="${u}" class="mce-content-body ${g}" data-id="${d.id}" aria-label="${p}"><br></body></html>`,c})(r),Vm.add(s.iframeContainer,l)})(n,o),o.editorContainer&&(o.editorContainer.style.display=n.orgDisplay,n.hidden=Vm.isHidden(o.editorContainer)),n.getElement().style.display="none",Vm.setAttrib(n.id,"aria-hidden","true"),n.getElement().style.visibility=n.orgVisibility,(r=>{const s=r.iframeElement,a=((t,e,n,o)=>((r,s,a,i,l)=>{const d=(c=a,u=i,g=>{c(g)&&u((p=>{const f=N(og(p).getOr(p.target)),h=()=>p.stopPropagation(),m=()=>p.preventDefault(),b=xo(m,h);return{target:f,x:p.clientX,y:p.clientY,stop:h,prevent:m,kill:b,raw:p}})(g))});var c,u;return r.dom.addEventListener(s,d,!1),{unbind:Z(rk,r,s,d,!1)}})(t,"load",n,()=>{a.unbind(),r.contentDocument=s.contentDocument,Vw(r)}))(N(s),0,lO);if(vt.browser.isFirefox()){const l=r.getDoc();l.open(),l.write(r.iframeHTML),l.close()}else s.srcdoc=r.iframeHTML})(n)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},sr=Et.DOM,Gw=t=>"-"===t.charAt(0),Yw=(t,e,n)=>C.from(e).filter(o=>gn(o)&&!Yi.has(o)).map(o=>({url:`${t.editorManager.baseURL}/icons/${o}/icons${n}.js`,name:C.some(o)})),Xw=Xn().deviceType,Qw=Xw.isPhone(),uO=Xw.isTablet(),ba=t=>{if(zt(t))return[];{const e=Ht(t)?t:t.split(/[ ,]/),n=yt(e,fr);return ct(n,gn)}},qm=(t,e)=>pt(t.sections(),e),fO=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:Rt(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),gO=(t,e)=>{var n;const o=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?$.extend({},t.external_plugins,o):o},bO=(t,e)=>{const n=t.selection,o=t.dom;return/^ | $/.test(e)?((r,s,a)=>{const i=N(r.getRoot());return a=Gs(i,L.fromRangeStart(s))?a.replace(/^ /,"&nbsp;"):a.replace(/^&nbsp;/," "),Ys(i,L.fromRangeEnd(s))?a.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):a.replace(/&nbsp;(<br( \/)?>)?$/," ")})(o,n.getRng(),e):e},El=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:o}=(r=>{if("string"!=typeof r){const s=$.extend({paste:r.paste,data:{paste:r.paste}},r);return{content:r.content,details:s}}return{content:r,details:{}}})(e);Au(t,{...o,content:bO(t,n),format:"html",set:!1,selection:!0}).each(r=>{const s=(i=r.content,l=o,Mu(t).editor.insertContent(i,l));var i,l;Ou(t,s,r),t.addVisual()})}},vO={"font-size":"size","font-family":"face"},yO=Ql("font"),Jw=t=>(e,n)=>C.from(n).map(N).filter(xe).bind(o=>{return(r=t,s=e,a=o.dom,au(N(a),i=>{return Ia(l=i,r).orThunk(()=>yO(l)?Rt(vO,r).bind(d=>Ln(l,d)):C.none());var l},i=>wt(N(s),i))).or(((r,s)=>C.from(Et.DOM.getStyle(s,r,!0)))(t,o.dom));var r,s,a}).getOr(""),CO=Jw("font-size"),wO=xo(t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),Jw("font-family")),xO=t=>he(t.getBody()).bind(e=>{const n=e.container();return C.from(j(n)?n.parentNode:n)}),Wm=(t,e)=>{return n=t,o=lf(C.some,e),(r=n,C.from(r.selection.getRng()).bind(s=>{const a=r.getBody();return s.startContainer===a&&0===s.startOffset?C.none():C.from(r.selection.getStart(!0))})).orThunk(Z(xO,n)).map(N).filter(xe).bind(o);var n,o,r},Zw=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const o=$.explode(t.options.get("font_size_style_values")),r=$.explode(t.options.get("font_size_classes"));return r.length>0?r[n-1]||e:o[n-1]||e}return e}return e},kO=t=>{const e=t.split(/\s*,\s*/);return yt(e,n=>-1===n.indexOf(" ")||te(n,'"')||te(n,"'")?n:`'${n}'`).join(",")},SO=["toggleview"],tx=t=>St(SO,t.toLowerCase());class ex{constructor(e){this.commands={state:{},exec:{},value:{}},this.editor=e}execCommand(e,n=!1,o,r){const s=this.editor,a=e.toLowerCase(),i=r?.skip_focus;if(s.removed||("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||i?Ec(d=s).each(c=>d.selection.setRng(c)):s.focus()),s.dispatch("BeforeExecCommand",{command:e,ui:n,value:o}).isDefaultPrevented()))return!1;var d;const l=this.commands.exec[a];return!!Ct(l)&&(l(a,n,o),s.dispatch("ExecCommand",{command:e,ui:n,value:o}),!0)}queryCommandState(e){if(!tx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const n=e.toLowerCase(),o=this.commands.state[n];return!!Ct(o)&&o(n)}queryCommandValue(e){if(!tx(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const n=e.toLowerCase(),o=this.commands.value[n];return Ct(o)?o(n):""}addCommands(e,n="exec"){const o=this.commands;_t(e,(r,s)=>{H(s.toLowerCase().split(","),a=>{o[n][a]=r})})}addCommand(e,n,o){const r=e.toLowerCase();this.commands.exec[r]=(s,a,i)=>n.call(o??this.editor,a,i)}queryCommandSupported(e){const n=e.toLowerCase();return!!this.commands.exec[n]}addQueryStateHandler(e,n,o){this.commands.state[e.toLowerCase()]=()=>n.call(o??this.editor)}addQueryValueHandler(e,n,o){this.commands.value[e.toLowerCase()]=()=>n.call(o??this.editor)}}const Wr="data-mce-contenteditable",Km=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch{}},Sl=(t,e)=>{t.dom.contentEditable=e?"true":"false"},ar=t=>t.readonly,nx=t=>{t.parser.addAttributeFilter("contenteditable",e=>{ar(t)&&H(e,n=>{n.attr(Wr,n.attr("contenteditable")),n.attr("contenteditable","false")})}),t.serializer.addAttributeFilter(Wr,e=>{ar(t)&&H(e,n=>{n.attr("contenteditable",n.attr(Wr))})}),t.serializer.addTempAttr(Wr)},NO=["copy"],RO=$.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class Gm{constructor(e){this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Bt}static isNative(e){return!!RO[e.toLowerCase()]}fire(e,n){return this.dispatch(e,n)}dispatch(e,n){const o=e.toLowerCase(),r=_d(o,n??{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(r);const s=this.bindings[o];if(s)for(let a=0,i=s.length;a<i;a++){const l=s[a];if(!l.removed){if(l.once&&this.off(o,l.func),r.isImmediatePropagationStopped())return r;if(!1===l.func.call(this.scope,r))return r.preventDefault(),r}}return r}on(e,n,o,r){if(!1===n&&(n=Bt),n){const s={func:n,removed:!1};r&&$.extend(s,r);const a=e.toLowerCase().split(" ");let i=a.length;for(;i--;){const l=a[i];let d=this.bindings[l];d||(d=[],this.toggleEvent(l,!0)),d=o?[s,...d]:[...d,s],this.bindings[l]=d}}return this}off(e,n){if(e){const o=e.toLowerCase().split(" ");let r=o.length;for(;r--;){const s=o[r];let a=this.bindings[s];if(!s)return _t(this.bindings,(i,l)=>{this.toggleEvent(l,!1),delete this.bindings[l]}),this;if(a){if(n){const i=Zr(a,l=>l.func===n);a=i.fail,this.bindings[s]=a,H(i.pass,l=>{l.removed=!0})}else a.length=0;a.length||(this.toggleEvent(e,!1),delete this.bindings[s])}}}else _t(this.bindings,(o,r)=>{this.toggleEvent(r,!1)}),this.bindings={};return this}once(e,n,o){return this.on(e,n,o,{once:!0})}has(e){e=e.toLowerCase();const n=this.bindings[e];return!(!n||0===n.length)}}const va=t=>(t._eventDispatcher||(t._eventDispatcher=new Gm({scope:t,toggleEvent:(e,n)=>{Gm.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),Ym={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const o=this;if(o.removed&&"remove"!==t&&"detach"!==t)return _d(t.toLowerCase(),e??{},o);const r=va(o).dispatch(t,e);if(!1!==n&&o.parent){let s=o.parent();for(;s&&!r.isPropagationStopped();)s.dispatch(t,r,!1),s=s.parent?s.parent():void 0}return r},on(t,e,n){return va(this).on(t,e,n)},off(t,e){return va(this).off(t,e)},once(t,e){return va(this).once(t,e)},hasEventListeners(t){return va(this).has(t)}},_l=Et.DOM;let ir;const Nl=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=Yp(t);return n?(t.eventRoot||(t.eventRoot=_l.select(n)[0]),t.eventRoot):t.getBody()},ox=(t,e,n)=>{var o;(o=t).hidden||ar(o)?ar(t)&&((o,r)=>{if("click"!==r.type||tt.metaKeyPressed(r))St(NO,r.type)&&o.dispatch(r.type,r);else{const s=N(r.target);(a=o,i=s,Oo(i,"a",l=>wt(l,N(a.getBody()))).bind(l=>Ln(l,"href"))).each(a=>{if(r.preventDefault(),/^#/.test(a)){const i=o.dom.select(`${a},[name="${wf(a,"#")}"]`);i.length&&o.selection.scrollIntoView(i[0],!0)}else window.open(a,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}var a,i})(t,n):t.dispatch(e,n)},rx=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=Nl(t,e);if(Yp(t)){if(ir||(ir={},t.editorManager.on("removeEditor",()=>{t.editorManager.activeEditor||ir&&(_t(ir,(r,s)=>{t.dom.unbind(Nl(t,s))}),ir=null)})),ir[e])return;const o=r=>{const s=r.target,a=t.editorManager.get();let i=a.length;for(;i--;){const l=a[i].getBody();(l===s||_l.isChildOf(s,l))&&ox(a[i],e,r)}};ir[e]=o,_l.bind(n,e,o)}else{const o=r=>{ox(t,e,r)};_l.bind(n,e,o),t.delegates[e]=o}},sx={...Ym,bindPendingEventDelegates(){const t=this;$.each(t._pendingNativeEvents,e=>{rx(t,e)})},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?rx(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(Nl(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(_t(t.delegates,(o,r)=>{t.dom.unbind(Nl(t,r),r,o)}),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},AO=t=>at(t)?{value:t.split(/[ ,]/),valid:!0}:cr(t,at)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},ax=(t,e)=>t+(as(e.message)?"":`. ${e.message}`),ix=t=>t.valid,Xm=(t,e,n="")=>{const o=e(t);return wo(o)?o?{value:t,valid:!0}:{valid:!1,message:n}:o},OO=["design","readonly"],lx=(t,e,n,o)=>{const r=n[e.get()],s=n[o];try{s.activate()}catch(a){return void console.error(`problem while activating editor mode ${o}:`,a)}var a;r.deactivate(),r.editorReadOnly!==s.editorReadOnly&&((t,e)=>{const n=N(t.getBody());var o,r,s;s=e,Zl(o=n,r="mce-content-readonly")&&!s?ds(o,r):s&&pr(o,r),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(o=>{C.from(o.selection.getNode()).each(r=>{r.removeAttribute("data-mce-selected")})})(t),t.readonly=!0,Sl(n,!1),H(se(n,'*[contenteditable="true"]'),o=>{Xt(o,Wr,"true"),Sl(o,!1)})):(t.readonly=!1,Sl(n,!0),H(se(n,'*[data-mce-contenteditable="true"]'),o=>{ee(o,Wr),Sl(o,!0)}),Km(t,"StyleWithCSS",!1),Km(t,"enableInlineTableEditing",!1),Km(t,"enableObjectResizing",!1),(o=>Qo(o)||(r=>{const s=Jn(N(r.getElement()));return xc(s).filter(a=>!_c(a.dom)&&Ai(r,a.dom)).isSome()})(o))(t)&&t.focus(),(o=>{o.selection.setRng(o.selection.getRng())})(t),t.nodeChanged())})(t,s.editorReadOnly),e.set(o),(a=t).dispatch("SwitchMode",{mode:o})},Qm=$.each,Jm=$.explode,TO={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},dx=$.makeMap("alt,ctrl,shift,meta,access"),BO=t=>{const e={},n=vt.os.isMacOS()||vt.os.isiOS();Qm(Jm(t.toLowerCase(),"+"),s=>{s in dx?e[s]=!0:/^[0-9]{2,}$/.test(s)?e.keyCode=parseInt(s,10):(e.charCode=s.charCodeAt(0),e.keyCode=TO[s]||s.toUpperCase().charCodeAt(0))});const o=[e.keyCode];let r;for(r in dx)e[r]?o.push(r):e[r]=!1;return e.id=o.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class cx{constructor(e){this.shortcuts={},this.pendingPatterns=[],this.editor=e;const n=this;e.on("keyup keypress keydown",o=>{!n.hasModifier(o)&&!n.isFunctionKey(o)||o.isDefaultPrevented()||(Qm(n.shortcuts,r=>{n.matchShortcut(o,r)&&(n.pendingPatterns=r.subpatterns.slice(0),"keydown"===o.type&&n.executeShortcutAction(r))}),n.matchShortcut(o,n.pendingPatterns[0])&&(1===n.pendingPatterns.length&&"keydown"===o.type&&n.executeShortcutAction(n.pendingPatterns[0]),n.pendingPatterns.shift()))})}add(e,n,o,r){const s=this,a=s.normalizeCommandFunc(o);return Qm(Jm($.trim(e)),i=>{const l=s.createShortcut(i,n,a,r);s.shortcuts[l.id]=l}),!0}remove(e){const n=this.createShortcut(e);return!!this.shortcuts[n.id]&&(delete this.shortcuts[n.id],!0)}normalizeCommandFunc(e){const n=this,o=e;return"string"==typeof o?()=>{n.editor.execCommand(o,!1,null)}:$.isArray(o)?()=>{n.editor.execCommand(o[0],o[1],o[2])}:o}createShortcut(e,n,o,r){const s=$.map(Jm(e,">"),BO);return s[s.length-1]=$.extend(s[s.length-1],{func:o,scope:r||this.editor}),$.extend(s[0],{desc:this.editor.translate(n),subpatterns:s.slice(1)})}hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}matchShortcut(e,n){return!!n&&n.ctrl===e.ctrlKey&&n.meta===e.metaKey&&n.alt===e.altKey&&n.shift===e.shiftKey&&!!(e.keyCode===n.keyCode||e.charCode&&e.charCode===n.charCode)&&(e.preventDefault(),!0)}executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}const DO=()=>{const t=(()=>{const e={},n={},o={},r={},s={},a={},i={},l={},d=(c,u)=>(g,p)=>{c[g.toLowerCase()]={...p,type:u}};return{addButton:d(e,"button"),addGroupToolbarButton:d(e,"grouptoolbarbutton"),addToggleButton:d(e,"togglebutton"),addMenuButton:d(e,"menubutton"),addSplitButton:d(e,"splitbutton"),addMenuItem:d(n,"menuitem"),addNestedMenuItem:d(n,"nestedmenuitem"),addToggleMenuItem:d(n,"togglemenuitem"),addAutocompleter:d(o,"autocompleter"),addContextMenu:d(s,"contextmenu"),addContextToolbar:d(a,"contexttoolbar"),addContextForm:d(a,"contextform"),addSidebar:d(i,"sidebar"),addView:d(l,"views"),addIcon:(c,u)=>r[c.toLowerCase()]=u,getAll:()=>({buttons:e,menuItems:n,icons:r,popups:o,contextMenus:s,contextToolbars:a,sidebars:i,views:l})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},lr=Et.DOM,ux=$.extend,PO=$.each;class Rl{constructor(e,n,o){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this.editorManager=o,this.documentBaseUrl=o.documentBaseURL,ux(this,sx);const r=this;this.id=e,this.hidden=!1;const s=((t,e,n,o,r)=>{var s;const a=t?{mobile:fO(null!==(s=r.mobile)&&void 0!==s?s:{},e)}:{},i=((t,e)=>{const n=((s,a)=>{const i={},l={};return gf(s,(d,c)=>St(t,c),Hl(i),Hl(l)),{t:i,f:l}})(e);return r=n.f,{sections:G(n.t),options:G(r)};var r})(["mobile"],gm(a,r)),l=$.extend(n,o,i.options(),t&&qm(i,"mobile")?((d,c,u={})=>{const g=d.sections(),p=Rt(g,c).getOr({});return $.extend({},u,p)})(i,"mobile"):{},{external_plugins:gO(o,i.options())});return((d,c,u,g)=>{const p=ba(u.forced_plugins),f=ba(g.plugins),h=qm(v=c,"mobile")?v.sections().mobile:{},m=((v,y,w,k)=>v&&qm(y,"mobile")?k:w)(d,c,f,h.plugins?ba(h.plugins):f),b=((v,y)=>[...ba(v),...ba(y)])(p,m);var v;return $.extend(g,{forced_plugins:p,plugins:b})})(t,i,o,l)})(Qw||uO,Qw,f=n,o.defaultOptions,f);var f;this.options=((p,f)=>{const h={},m={},b=(y,w,k)=>{const x=Xm(w,k);return ix(x)?(m[y]=x.value,!0):(console.warn(ax(`Invalid value passed for the ${y} option`,x)),!1)},v=y=>pt(h,y);return{register:(y,w)=>{const k=at(w.processor)?(S=>{const E=(()=>{switch(S){case"array":return Ht;case"boolean":return wo;case"function":return Ct;case"number":return Ze;case"object":return le;case"string":return at;case"string[]":return AO;case"object[]":return _=>cr(_,le);case"regexp":return _=>ka(_,RegExp);default:return jt}})();return _=>Xm(_,E,`The value must be a ${S}.`)})(w.processor):w.processor,x=((S,E,_)=>{if(!me(E)){const D=Xm(E,_);if(ix(D))return D.value;console.error(ax(`Invalid default value passed for the "${S}" option`,D))}})(y,w.default,k);h[y]={...w,default:x,processor:k},Rt(m,y).orThunk(()=>Rt(f,y)).each(S=>b(y,S,k))},isRegistered:v,get:y=>Rt(m,y).orThunk(()=>Rt(h,y).map(w=>w.default)).getOrUndefined(),set:(y,w)=>{if(v(y)){const k=h[y];return k.immutable?(console.error(`"${y}" is an immutable option and cannot be updated`),!1):b(y,w,k.processor)}return console.warn(`"${y}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:y=>{const w=v(y);return w&&delete m[y],w},isSet:y=>pt(m,y)}})(0,s),(p=>{const f=p.options.register;f("id",{processor:"string",default:p.id}),f("selector",{processor:"string"}),f("target",{processor:"object"}),f("suffix",{processor:"string"}),f("cache_suffix",{processor:"string"}),f("base_url",{processor:"string"}),f("referrer_policy",{processor:"string",default:""}),f("language_load",{processor:"boolean",default:!0}),f("inline",{processor:"boolean",default:!1}),f("iframe_attrs",{processor:"object",default:{}}),f("doctype",{processor:"string",default:"<!DOCTYPE html>"}),f("document_base_url",{processor:"string",default:p.documentBaseUrl}),f("body_id",{processor:Up(p,"tinymce"),default:"tinymce"}),f("body_class",{processor:Up(p),default:""}),f("content_security_policy",{processor:"string",default:""}),f("br_in_pre",{processor:"boolean",default:!0}),f("forced_root_block",{processor:h=>{const m=at(h)&&gn(h);return m?{value:h,valid:m}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),f("forced_root_block_attrs",{processor:"object",default:{}}),f("newline_behavior",{processor:h=>{const m=St(["block","linebreak","invert","default"],h);return m?{value:h,valid:m}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),f("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),f("no_newline_selector",{processor:"string",default:""}),f("keep_styles",{processor:"boolean",default:!0}),f("end_container_on_empty_block",{processor:h=>wo(h)||at(h)?{valid:!0,value:h}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),f("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),f("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),f("font_size_classes",{processor:"string",default:""}),f("automatic_uploads",{processor:"boolean",default:!0}),f("images_reuse_filename",{processor:"boolean",default:!1}),f("images_replace_blob_uris",{processor:"boolean",default:!0}),f("icons",{processor:"string",default:""}),f("icons_url",{processor:"string",default:""}),f("images_upload_url",{processor:"string",default:""}),f("images_upload_base_path",{processor:"string",default:""}),f("images_upload_credentials",{processor:"boolean",default:!1}),f("images_upload_handler",{processor:"function"}),f("language",{processor:"string",default:"en"}),f("language_url",{processor:"string",default:""}),f("entity_encoding",{processor:"string",default:"named"}),f("indent",{processor:"boolean",default:!0}),f("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),f("indent_use_margin",{processor:"boolean",default:!1}),f("indentation",{processor:"string",default:"40px"}),f("content_css",{processor:h=>{const m=!1===h||at(h)||cr(h,at);return m?at(h)?{value:yt(h.split(","),fr),valid:m}:Ht(h)?{value:h,valid:m}:!1===h?{value:[],valid:m}:{value:h,valid:m}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Vd(p)?[]:["default"]}),f("content_style",{processor:"string"}),f("content_css_cors",{processor:"boolean",default:!1}),f("font_css",{processor:h=>{const m=at(h)||cr(h,at);return m?{value:Ht(h)?h:yt(h.split(","),fr),valid:m}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),f("inline_boundaries",{processor:"boolean",default:!0}),f("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),f("object_resizing",{processor:h=>{const m=wo(h)||at(h);return m?!1===h||zd.isiPhone()||zd.isiPad()?{value:"",valid:m}:{value:!0===h?"table,img,figure.image,div,video,iframe":h,valid:m}:{valid:!1,message:"Must be boolean or a string"}},default:!Xk}),f("resize_img_proportional",{processor:"boolean",default:!0}),f("event_root",{processor:"object"}),f("service_message",{processor:"string"}),f("theme",{processor:h=>!1===h||at(h)||Ct(h),default:"silver"}),f("theme_url",{processor:"string"}),f("formats",{processor:"object"}),f("format_empty_lines",{processor:"boolean",default:!1}),f("format_noneditable_selector",{processor:"string",default:""}),f("preview_styles",{processor:h=>{const m=!1===h||at(h);return m?{value:!1===h?"":h,valid:m}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),f("custom_ui_selector",{processor:"string",default:""}),f("hidden_input",{processor:"boolean",default:!0}),f("submit_patch",{processor:"boolean",default:!0}),f("encoding",{processor:"string"}),f("add_form_submit_trigger",{processor:"boolean",default:!0}),f("add_unload_trigger",{processor:"boolean",default:!0}),f("custom_undo_redo_levels",{processor:"number",default:0}),f("disable_nodechange",{processor:"boolean",default:!1}),f("readonly",{processor:"boolean",default:!1}),f("plugins",{processor:"string[]",default:[]}),f("external_plugins",{processor:"object"}),f("forced_plugins",{processor:"string[]"}),f("model",{processor:"string",default:p.hasPlugin("rtc")?"plugin":"dom"}),f("model_url",{processor:"string"}),f("block_unsupported_drop",{processor:"boolean",default:!0}),f("visual",{processor:"boolean",default:!0}),f("visual_table_class",{processor:"string",default:"mce-item-table"}),f("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),f("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),f("setup",{processor:"function"}),f("init_instance_callback",{processor:"function"}),f("url_converter",{processor:"function",default:p.convertURL}),f("url_converter_scope",{processor:"object",default:p}),f("urlconverter_callback",{processor:"function"}),f("allow_conditional_comments",{processor:"boolean",default:!1}),f("allow_html_data_urls",{processor:"boolean",default:!1}),f("allow_svg_data_urls",{processor:"boolean"}),f("allow_html_in_named_anchor",{processor:"boolean",default:!1}),f("allow_script_urls",{processor:"boolean",default:!1}),f("allow_unsafe_link_target",{processor:"boolean",default:!1}),f("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),f("fix_list_elements",{processor:"boolean",default:!1}),f("preserve_cdata",{processor:"boolean",default:!1}),f("remove_trailing_brs",{processor:"boolean"}),f("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),f("element_format",{processor:"string",default:"html"}),f("entities",{processor:"string"}),f("schema",{processor:"string",default:"html5"}),f("convert_urls",{processor:"boolean",default:!0}),f("relative_urls",{processor:"boolean",default:!0}),f("remove_script_host",{processor:"boolean",default:!0}),f("custom_elements",{processor:"string"}),f("extended_valid_elements",{processor:"string"}),f("invalid_elements",{processor:"string"}),f("invalid_styles",{processor:jd}),f("valid_children",{processor:"string"}),f("valid_classes",{processor:jd}),f("valid_elements",{processor:"string"}),f("valid_styles",{processor:jd}),f("verify_html",{processor:"boolean",default:!0}),f("auto_focus",{processor:h=>at(h)||!0===h}),f("browser_spellcheck",{processor:"boolean",default:!1}),f("protect",{processor:"array"}),f("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),f("deprecation_warnings",{processor:"boolean",default:!0}),f("a11y_advanced_options",{processor:"boolean",default:!1}),f("api_key",{processor:"string"}),f("paste_block_drop",{processor:"boolean",default:!1}),f("paste_data_images",{processor:"boolean",default:!0}),f("paste_preprocess",{processor:"function"}),f("paste_postprocess",{processor:"function"}),f("paste_webkit_styles",{processor:"string",default:"none"}),f("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),f("paste_merge_formats",{processor:"boolean",default:!0}),f("smart_paste",{processor:"boolean",default:!0}),f("paste_as_text",{processor:"boolean",default:!1}),f("paste_tab_spaces",{processor:"number",default:4}),f("text_patterns",{processor:h=>cr(h,le)||!1===h?{value:Ip(!1===h?[]:h),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),f("text_patterns_lookup",{processor:h=>{return Ct(h)?{value:(m=h,b=>{const v=m(b);return Ip(v)}),valid:!0}:{valid:!1,message:"Must be a single function"};var m},default:h=>[]}),f("noneditable_class",{processor:"string",default:"mceNonEditable"}),f("editable_class",{processor:"string",default:"mceEditable"}),f("noneditable_regexp",{processor:h=>cr(h,Fp)?{value:h,valid:!0}:Fp(h)?{value:[h],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),f("table_tab_navigation",{processor:"boolean",default:!0}),f("highlight_on_focus",{processor:"boolean",default:!1}),f("xss_sanitization",{processor:"boolean",default:!0}),p.on("ScriptsLoaded",()=>{f("directionality",{processor:"string",default:rn.isRtl()?"rtl":void 0}),f("placeholder",{processor:"string",default:Qk.getAttrib(p.getElement(),"placeholder")})})})(r);const a=this.options.get;a("deprecation_warnings")&&((p,f)=>{((h,m)=>{const b=(t=>{const e=fy(t,RN),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),ko(e)})(h),v=(t=>gy(t,ON))(m),y=v.length>0,w=b.length>0,k="mobile"===m.theme;if(y||w||k){const x="\n- ",S=k?`\n\nThemes:${x}mobile`:"",E=y?`\n\nPlugins:${x}${v.join(x)}`:"",_=w?`\n\nOptions:${x}${b.join(x)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+S+E+_)}})(p,f),((h,m)=>{const b=(t=>fy(t,AN))(h),v=(t=>gy(t,my.map(e=>e.name)))(m),y=v.length>0,w=b.length>0;if(y||w){const k="\n- ",x=y?`\n\nPlugins:${k}${v.map(LN).join(k)}`:"",S=w?`\n\nOptions:${k}${b.join(k)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+x+S)}})(p,f)})(n,s);const i=a("suffix");i&&(o.suffix=i),this.suffix=o.suffix;const l=a("base_url");l&&o._setBaseUrl(l),this.baseUri=o.baseURI;const d=Hd(r);d&&(Hn.ScriptLoader._setReferrerPolicy(d),Et.DOM.styleSheetLoader._setReferrerPolicy(d));const c=Qp(r);Y(c)&&Et.DOM.styleSheetLoader._setContentCssCors(c),de.languageLoad=a("language_load"),de.baseURL=o.baseURL,this.setDirty(!1),this.documentBaseURI=new dn(zp(r),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Vd(r),this.hasVisual=UE(r),this.shortcuts=new cx(this),this.editorCommands=new ex(this),(t=>{var e;(t=>{(e=>{const n=o=>()=>{H("left,center,right,justify".split(","),r=>{o!==r&&e.formatter.remove("align"+r)}),"none"!==o&&(e.formatter.toggle("align"+o,void 0),e.nodeChanged())};e.editorCommands.addCommands({JustifyLeft:n("left"),JustifyCenter:n("center"),JustifyRight:n("right"),JustifyFull:n("justify"),JustifyNone:n("none")})})(t),(e=>{const n=o=>()=>{const r=e.selection,s=r.isCollapsed()?[e.dom.getParent(r.getNode(),e.dom.isBlock)]:r.getSelectedBlocks();return It(s,a=>Y(e.formatter.matchNode(a,o)))};e.editorCommands.addCommands({JustifyLeft:n("alignleft"),JustifyCenter:n("aligncenter"),JustifyRight:n("alignright"),JustifyFull:n("alignjustify")},"state")})(t)})(t),(e=t).editorCommands.addCommands({"Cut,Copy,Paste":n=>{const o=e.getDoc();let r;try{o.execCommand(n)}catch{r=!0}if("paste"!==n||o.queryCommandEnabled(n)||(r=!0),r||!o.queryCommandSupported(n)){let s=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(vt.os.isMacOS()||vt.os.isiOS())&&(s=s.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:s,type:"error"})}}}),(e=>{e.editorCommands.addCommands({mceAddUndoLevel:()=>{e.undoManager.add()},mceEndUndoLevel:()=>{e.undoManager.add()},Undo:()=>{e.undoManager.undo()},Redo:()=>{e.undoManager.redo()}})})(t),(e=>{e.editorCommands.addCommands({mceSelectNodeDepth:(n,o,r)=>{let s=0;e.dom.getParent(e.selection.getNode(),a=>!Q(a)||s++!==r||(e.selection.select(a),!1),e.getBody())},mceSelectNode:(n,o,r)=>{e.selection.select(r)},selectAll:()=>{const n=e.dom.getParent(e.selection.getStart(),on);if(n){const o=e.dom.createRng();o.selectNodeContents(n),e.selection.setRng(o)}}})})(t),(e=>{e.editorCommands.addCommands({mceCleanup:()=>{const n=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(n)},insertImage:(n,o,r)=>{El(e,e.dom.createHTML("img",{src:r}))},insertHorizontalRule:()=>{e.execCommand("mceInsertContent",!1,"<hr>")},insertText:(n,o,r)=>{El(e,e.dom.encode(r))},insertHTML:(n,o,r)=>{El(e,r)},mceInsertContent:(n,o,r)=>{El(e,r)},mceSetContent:(n,o,r)=>{e.setContent(r)},mceReplaceContent:(n,o,r)=>{e.execCommand("mceInsertContent",!1,r.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:()=>{e.setContent("")}})})(t),(e=>{const n=(o,r,s)=>{const a=at(s)?{href:s}:s,i=e.dom.getParent(e.selection.getNode(),"a");le(a)&&at(a.href)&&(a.href=a.href.replace(/ /g,"%20"),i&&a.href||e.formatter.remove("link"),a.href&&e.formatter.apply("link",a,i))};e.editorCommands.addCommands({unlink:()=>{if(e.selection.isCollapsed()){const o=e.dom.getParent(e.selection.getStart(),"a");o&&e.dom.remove(o,!0)}else e.formatter.remove("link")},mceInsertLink:n,createLink:n})})(t),(e=>{e.editorCommands.addCommands({Indent:()=>{AC(e,"indent")},Outdent:()=>{OC(e)}}),e.editorCommands.addCommands({Outdent:()=>_C(e)},"state")})(t),(e=>{e.editorCommands.addCommands({insertParagraph:()=>{bl(P1,e)},mceInsertNewLine:(n,o,r)=>{j1(e,r)},InsertLineBreak:(n,o,r)=>{bl(I1,e)}})})(t),(e=>{var n;(n=e).editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{n.getDoc().execCommand(o);const r=n.dom.getParent(n.selection.getNode(),"ol,ul");if(r){const s=r.parentNode;if(s&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(s.nodeName)){const a=n.selection.getBookmark();n.dom.split(s,r),n.selection.moveToBookmark(a)}}}}),(n=>{n.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":o=>{const r=n.dom.getParent(n.selection.getNode(),"ul,ol");return r&&("insertunorderedlist"===o&&"UL"===r.tagName||"insertorderedlist"===o&&"OL"===r.tagName)}},"state")})(e)})(t),(e=>{(n=>{const o=(r,s)=>{n.formatter.toggle(r,s),n.nodeChanged()};n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>{o(r)},"ForeColor,HiliteColor":(r,s,a)=>{o(r,{value:a})},BackColor:(r,s,a)=>{o("hilitecolor",{value:a})},FontName:(r,s,a)=>{((i,l)=>{const d=Zw(i,l);i.formatter.toggle("fontname",{value:kO(d)}),i.nodeChanged()})(n,a)},FontSize:(r,s,a)=>{var i;(i=n).formatter.toggle("fontsize",{value:Zw(i,a)}),i.nodeChanged()},LineHeight:(r,s,a)=>{var i;(i=n).formatter.toggle("lineheight",{value:String(a)}),i.nodeChanged()},Lang:(r,s,a)=>{var i;o(r,{value:a.code,customValue:null!==(i=a.customCode)&&void 0!==i?i:null})},RemoveFormat:r=>{n.formatter.remove(r)},mceBlockQuote:()=>{o("blockquote")},FormatBlock:(r,s,a)=>{o(at(a)?a:"p")},mceToggleFormat:(r,s,a)=>{o(a)}})})(e),(n=>{const o=r=>n.formatter.match(r);n.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":r=>o(r),mceBlockQuote:()=>o("blockquote")},"state"),n.editorCommands.addQueryValueHandler("FontName",()=>{return Wm(r=n,s=>wO(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("FontSize",()=>{return Wm(r=n,s=>CO(r.getBody(),s.dom)).getOr("");var r}),n.editorCommands.addQueryValueHandler("LineHeight",()=>{return Wm(r=n,s=>{const a=N(r.getBody());return au(s,l=>Ia(l,"line-height"),Z(wt,a)).getOrThunk(()=>{const l=parseFloat(bn(s,"line-height")),d=parseFloat(bn(s,"font-size"));return String(l/d)})}).getOr("");var r})})(e)})(t),(e=>{e.editorCommands.addCommands({mceRemoveNode:(n,o,r)=>{const s=r??e.selection.getNode();if(s!==e.getBody()){const a=e.selection.getBookmark();e.dom.remove(s,!0),e.selection.moveToBookmark(a)}},mcePrint:()=>{e.getWin().print()},mceFocus:(n,o,r)=>{var s;(s=e).removed||(!0===r?Ac(s):(i=>{const l=i.selection,d=i.getBody();let c=l.getRng();i.quirks.refreshContentEditable(),Y(i.bookmark)&&!Qo(i)&&Ec(i).each(g=>{i.selection.setRng(g),c=g});const u=(g=i,p=l.getNode(),g.dom.getParent(p,f=>"true"===g.dom.getContentEditable(f)));var g,p;if(u&&i.dom.isChildOf(u,d))return Rc(u),Nb(i,c),void Ac(i);i.inline||(vt.browser.isOpera()||Rc(d),i.getWin().focus()),(vt.browser.isFirefox()||i.inline)&&(Rc(d),Nb(i,c)),Ac(i)})(s))},mceToggleVisualAid:()=>{e.hasVisual=!e.hasVisual,e.addVisual()}})})(t)})(this);const u=a("cache_suffix");u&&(vt.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:DO(),styleSheetLoader:void 0,show:bt,hide:bt,setEnabled:bt,isEnabled:jt},this.mode=(p=>{const f=Kt("design"),h=Kt({design:{activate:bt,deactivate:bt,editorReadOnly:!1},readonly:{activate:bt,deactivate:bt,editorReadOnly:!0}});return(m=p).serializer?nx(m):m.on("PreInit",()=>{nx(m)}),(m=>{m.on("ShowCaret",b=>{ar(m)&&b.preventDefault()}),m.on("ObjectSelected",b=>{ar(m)&&b.preventDefault()})})(p),{isReadOnly:()=>ar(p),set:m=>((b,v,y,w)=>{if(w!==y.get()){if(!pt(v,w))throw new Error(`Editor mode '${w}' is invalid`);b.initialized?lx(b,y,v,w):b.on("init",()=>lx(b,y,v,w))}})(p,h.get(),f,m),get:()=>f.get(),register:(m,b)=>{h.set(((v,y,w)=>{if(St(OO,y))throw new Error(`Cannot override default mode ${y}`);return{...v,[y]:{...w,deactivate:()=>{try{w.deactivate()}catch(k){console.error(`problem while deactivating editor mode ${y}:`,k)}}}}})(h.get(),m,b))}};var m})(r),o.dispatch("SetupEditor",{editor:this});const g=HE(r);Ct(g)&&g.call(r,r)}render(){(e=>{const n=e.id;rn.setCode(qp(e));const o=()=>{sr.unbind(window,"ready",o),e.render()};if(!Uo.Event.domLoaded)return void sr.bind(window,"ready",o);if(!e.getElement())return;const r=N(e.getElement()),s=Vf(r);var l;e.on("remove",()=>{uf(r.dom.attributes,i=>ee(r,i.name)),Qn(r,s)}),e.ui.styleSheetLoader=zg.forElement(r,{contentCssCors:Qp(l=e),referrerPolicy:Hd(l)}),Vd(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");const a=e.getElement().form||sr.getParent(n,"form");a&&(e.formElement=a,TE(e)&&!ld(e.getElement())&&(sr.insertAfter(sr.create("input",{type:"hidden",name:n}),n),e.hasHiddenInput=!0),e.formEventDelegate=i=>{e.dispatch(i.type,i)},sr.bind(a,"submit reset",e.formEventDelegate),e.on("reset",()=>{e.resetContent()}),!BE(e)||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=()=>(e.editorManager.triggerSave(),e.setDirty(!1),a._mceOldSubmit(a)))),e.windowManager=vy(e),e.notificationManager=by(e),"xml"===e.options.get("encoding")&&e.on("GetContent",i=>{i.save&&(i.content=sr.encode(i.content))}),DE(e)&&e.on("submit",()=>{e.initialized&&e.save()}),PE(e)&&(e._beforeUnload=()=>{!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),((t,e)=>{const n=Hn.ScriptLoader,o=()=>{!t.removed&&(r=>{const s=_r(r);return!at(s)||Y(rr.get(s))})(t)&&(r=>{const s=$d(r);return Y(Fr.get(s))})(t)&&dO(t)};((r,s)=>{const a=_r(r);if(at(a)&&!Gw(a)&&!pt(rr.urls,a)){const i=EE(r),l=i?r.documentBaseURI.toAbsolute(i):`themes/${a}/theme${s}.js`;rr.load(a,l).catch(()=>{ea(r,"ThemeLoadError",na("theme",l,a))})}})(t,e),((r,s)=>{const a=$d(r);if("plugin"!==a&&!pt(Fr.urls,a)){const i=SE(r),l=at(i)?r.documentBaseURI.toAbsolute(i):`models/${a}/model${s}.js`;Fr.load(a,l).catch(()=>{ea(r,"ModelLoadError",na("model",l,a))})}})(t,e),((r,s)=>{const a=qp(s),i=pE(s);if(!rn.hasCode(a)&&"en"!==a){const l=gn(i)?i:`${s.editorManager.baseURL}/langs/${a}.js`;r.add(l).catch(()=>{ea(s,"LanguageLoadError",na("language",l,a))})}})(n,t),((r,s,a)=>{const i=Yw(s,"default",a),l=(d=s,C.from(dE(d)).filter(gn).map(c=>({url:c,name:C.none()}))).orThunk(()=>Yw(s,Vp(s),""));var d;H((d=>{const c=[],u=g=>{c.push(g)};for(let g=0;g<d.length;g++)d[g].each(u);return c})([i,l]),d=>{r.add(d.url).catch(()=>{var c,u,g;c=s,u=d.url,g=d.name.getOrUndefined(),ea(c,"IconsLoadError",na("icons",u,g))})})})(n,t,e),((r,s)=>{const a=(i,l)=>{Ur.load(i,l).catch(()=>{ea(r,"PluginLoadError",na("plugin",l,i))})};_t(IE(r),(i,l)=>{a(l,i),r.options.set("plugins",li(r).concat(l))}),H(li(r),i=>{!(i=$.trim(i))||Ur.urls[i]||Gw(i)||a(i,`plugins/${i}/plugin${s}.js`)})})(t,e),n.loadQueue().then(o,o)})(e,e.suffix)})(this)}focus(e){this.execCommand("mceFocus",!1,e)}hasFocus(){return Qo(this)}translate(e){return rn.translate(e)}getParam(e,n,o){const r=this.options;return r.isRegistered(e)||(Y(o)?r.register(e,{processor:o,default:n}):r.register(e,{processor:jt,default:n})),r.isSet(e)||me(n)?r.get(e):n}hasPlugin(e,n){return!(!St(li(this),e)||n&&void 0===Ur.get(e))}nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}addCommand(e,n,o){this.editorCommands.addCommand(e,n,o)}addQueryStateHandler(e,n,o){this.editorCommands.addQueryStateHandler(e,n,o)}addQueryValueHandler(e,n,o){this.editorCommands.addQueryValueHandler(e,n,o)}addShortcut(e,n,o,r){this.shortcuts.add(e,n,o,r)}execCommand(e,n,o,r){return this.editorCommands.execCommand(e,n,o,r)}queryCommandState(e){return this.editorCommands.queryCommandState(e)}queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}show(){const e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(lr.show(e.getContainer()),lr.hide(e.id)),e.load(),e.dispatch("show"))}hide(){const e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(lr.hide(e.getContainer()),lr.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(e,n){this.dispatch("ProgressState",{state:e,time:n})}load(e={}){const n=this,o=n.getElement();if(n.removed)return"";if(o){const r={...e,load:!0},s=ld(o)?o.value:o.innerHTML,a=n.setContent(s,r);return r.no_events||n.dispatch("LoadContent",{...r,element:o}),a}return""}save(e={}){const n=this;let o=n.getElement();if(!o||!n.initialized||n.removed)return"";const r={...e,save:!0,element:o};let s=n.getContent(r);const a={...r,content:s};if(a.no_events||n.dispatch("SaveContent",a),"raw"===a.format&&n.dispatch("RawSaveContent",a),s=a.content,ld(o))o.value=s;else{!e.is_removing&&n.inline||(o.innerHTML=s);const i=lr.getParent(n.id,"form");i&&PO(i.elements,l=>l.name!==n.id||(l.value=s,!1))}return a.element=r.element=o=null,!1!==a.set_dirty&&n.setDirty(!1),s}setContent(e,n){return Iu(this,e,n)}getContent(e){return((n,o={})=>{const r=(s=o,a=o.format?o.format:"html",{...s,format:a,get:!0,getInner:!0});var s,a;return Wv(n,r).fold(fe,s=>{const a=(l=s,Mu(n).editor.getContent(l));var l;return Kv(n,a,s)})})(this,e)}insertContent(e,n){n&&(e=ux({content:e},n)),this.execCommand("mceInsertContent",!1,e)}resetContent(e){void 0===e?Iu(this,this.startContent,{format:"raw"}):Iu(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(e){const n=!this.isNotDirty;this.isNotDirty=!e,e&&e!==n&&this.dispatch("dirty")}getContainer(){const e=this;return e.container||(e.container=e.editorContainer||lr.get(e.id+"_parent")),e.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=lr.get(this.id)),this.targetElm}getWin(){const e=this;if(!e.contentWindow){const n=e.iframeElement;n&&(e.contentWindow=n.contentWindow)}return e.contentWindow}getDoc(){const e=this;if(!e.contentDocument){const n=e.getWin();n&&(e.contentDocument=n.document)}return e.contentDocument}getBody(){var e,n;const o=this.getDoc();return null!==(n=null!==(e=this.bodyElement)&&void 0!==e?e:o?.body)&&void 0!==n?n:null}convertURL(e,n,o){const r=this,s=r.options.get,a=VE(r);return Ct(a)?a.call(r,e,o,!0,n):!s("convert_urls")||"link"===o||le(o)&&"LINK"===o.nodeName||0===e.indexOf("file:")||0===e.length?e:s("relative_urls")?r.documentBaseURI.toRelative(e):e=r.documentBaseURI.toAbsolute(e,s("remove_script_host"))}addVisual(e){((n,o)=>{var s;s=o,Mt(this).editor.addVisual(s)})(0,e)}remove(){(e=>{if(!e.removed){const{_selectionOverrides:n,editorUpload:o}=e,r=e.getBody(),s=e.getElement();r&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&Y(s?.nextSibling)&&Ki.remove(s.nextSibling),e.dispatch("remove"),e.editorManager.remove(e),!e.inline&&r&&Ki.setStyle((a=e).id,"display",a.orgDisplay),(a=>{a.dispatch("detach")})(e),Ki.remove(e.getContainer()),Gi(n),Gi(o),e.destroy()}var a})(this)}destroy(e){((n,o)=>{const{selection:r,dom:s}=n;n.destroyed||(o||n.removed?(o||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),Gi(r),Gi(s)),(a=>{const i=a.formElement;i&&(i._mceOldSubmit&&(i.submit=i._mceOldSubmit,delete i._mceOldSubmit),Ki.unbind(i,"submit reset",a.formEventDelegate))})(n),(a=>{const i=a;i.contentAreaContainer=i.formElement=i.container=i.editorContainer=null,i.bodyElement=i.contentDocument=i.contentWindow=null,i.iframeElement=i.targetElm=null;const l=a.selection;l&&(i.selection=l.win=l.dom=l.dom.doc=null)})(n),n.destroyed=!0):n.remove())})(this,e)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const Kr=Et.DOM,Al=$.each;let Ol,mx=!1,ve=[];const Tl=t=>{const e=t.type;Al(vo.get(),n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}})},fx=t=>{if(t!==mx){const e=Et.DOM;t?(e.bind(window,"resize",Tl),e.bind(window,"scroll",Tl)):(e.unbind(window,"resize",Tl),e.unbind(window,"scroll",Tl)),mx=t}},gx=t=>{const e=ve;return ve=ct(ve,n=>t!==n),vo.activeEditor===t&&(vo.activeEditor=ve.length>0?ve[0]:null),vo.focusedEditor===t&&(vo.focusedEditor=null),e.length!==ve.length},LO="CSS1Compat"!==document.compatMode,vo={...Ym,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"4.2",releaseDate:"2023-04-26",i18n:rn,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",o=dn.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const a=document.getElementsByTagName("script");for(let i=0;i<a.length;i++){const l=a[i].src||"";if(""===l)continue;const d=l.substring(l.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(l)){-1!==d.indexOf(".min")&&(n=".min"),e=l.substring(0,l.lastIndexOf("/"));break}}if(!e&&document.currentScript){const i=document.currentScript.src;-1!==i.indexOf(".min")&&(n=".min"),e=i.substring(0,i.lastIndexOf("/"))}}var s;t.baseURL=new dn(o).toAbsolute(e),t.documentBaseURL=o,t.baseURI=new dn(t.baseURL),t.suffix=n,(s=t).on("AddEditor",Z(JS,s)),s.on("RemoveEditor",Z(ZS,s))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const o=t.plugin_base_urls;void 0!==o&&_t(o,(r,s)=>{de.PluginManager.urls[s]=r})},init(t){const e=this;let n;const o=$.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=a=>{n=a};const s=()=>{let a=0;const i=[];let l;var d;Kr.unbind(window,"ready",s),(d=>{const c=t.onpageload;c&&c.apply(e,[])})(),l=((d,c)=>{const u=[],g=Ct(c)?p=>It(u,f=>c(f,p)):p=>St(u,p);for(let p=0,f=d.length;p<f;p++){const h=d[p];g(h)||u.push(h)}return u})((d=t,vt.browser.isIE()||vt.browser.isEdge()?(Qi("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):LO?(Qi("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):at(d.selector)?Kr.select(d.selector):Y(d.target)?[d.target]:[])),$.each(l,d=>{var c;(c=e.get(d.id))&&c.initialized&&!(c.getContainer()||c.getBody()).parentNode&&(gx(c),c.unbindAllNativeEvents(),c.destroy(!0),c.removed=!0)}),l=$.grep(l,d=>!e.get(d.id)),0===l.length?r([]):Al(l,d=>{t.inline&&d.tagName.toLowerCase()in o?Qi("Could not initialize inline editor on invalid inline target element",d):((c,u,g)=>{const p=new Rl(c,u,e);i.push(p),p.on("init",()=>{++a===l.length&&r(i)}),p.targetElm=p.targetElm||g,p.render()})((c=>{let u=c.id;return u||(u=Rt(c,"name").filter(g=>!Kr.get(g)).getOrThunk(Kr.uniqueId),c.setAttribute("id",u)),u})(d),t,d)})};return Kr.bind(window,"ready",s),new Promise(a=>{n?a(n):r=i=>{a(i)}})},get(t){return 0===arguments.length?ve.slice(0):at(t)?$t(ve,e=>e.id===t).getOr(null):Ze(t)&&ve[t]?ve[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&ve.push(t),fx(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),Ol||(Ol=o=>{const r=e.dispatch("BeforeUnload");if(r.returnValue)return o.preventDefault(),o.returnValue=r.returnValue,r.returnValue},window.addEventListener("beforeunload",Ol))),t},createEditor(t,e){return this.add(new Rl(t,e,this))},remove(t){const e=this;let n;if(t){if(!at(t))return n=t,Ge(e.get(n.id))?null:(gx(n)&&e.dispatch("RemoveEditor",{editor:n}),0===ve.length&&window.removeEventListener("beforeunload",Ol),n.remove(),fx(ve.length>0),n);Al(Kr.select(t),o=>{n=e.get(o.id),n&&e.remove(n)})}else for(let o=ve.length-1;o>=0;o--)e.remove(ve[o])},execCommand(t,e,n){var o;const r=this,s=le(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(t){case"mceAddEditor":return r.get(s)||new Rl(s,n.options,r).render(),!0;case"mceRemoveEditor":{const a=r.get(s);return a&&a.remove(),!0}case"mceToggleEditor":{const a=r.get(s);return a?(a.isHidden()?a.show():a.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{Al(ve,t=>{t.save()})},addI18n:(t,e)=>{rn.add(t,e)},translate:t=>rn.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new dn(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new dn(this.baseURL)}};vo.setup();const MO=(()=>{const t=so();return{FakeClipboardItem:e=>({items:e,types:Oe(e),getType:n=>Rt(e,n).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),px=Math.min,Gr=Math.max,Bl=Math.round,hx=(t,e,n)=>{let o=e.x,r=e.y;const s=t.w,a=t.h,i=e.w,l=e.h,d=(n||"").split("");return"b"===d[0]&&(r+=l),"r"===d[1]&&(o+=i),"c"===d[0]&&(r+=Bl(l/2)),"c"===d[1]&&(o+=Bl(i/2)),"b"===d[3]&&(r-=a),"r"===d[4]&&(o-=s),"c"===d[3]&&(r-=Bl(a/2)),"c"===d[4]&&(o-=Bl(s/2)),Yr(o,r,s,a)},Yr=(t,e,n,o)=>({x:t,y:e,w:n,h:o}),IO={inflate:(t,e,n)=>Yr(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:hx,findBestRelativePosition:(t,e,n,o)=>{for(let r=0;r<o.length;r++){const s=hx(t,e,o[r]);if(s.x>=n.x&&s.x+s.w<=n.w+n.x&&s.y>=n.y&&s.y+s.h<=n.h+n.y)return o[r]}return null},intersect:(t,e)=>{const n=Gr(t.x,e.x),o=Gr(t.y,e.y),r=px(t.x+t.w,e.x+e.w),s=px(t.y+t.h,e.y+e.h);return r-n<0||s-o<0?null:Yr(n,o,r-n,s-o)},clamp:(t,e,n)=>{let o=t.x,r=t.y,s=t.x+t.w,a=t.y+t.h;const i=e.x+e.w,l=e.y+e.h,d=Gr(0,e.x-o),c=Gr(0,e.y-r),u=Gr(0,s-i),g=Gr(0,a-l);return o+=d,r+=c,n&&(s+=d,a+=c,o-=u,r-=g),s-=u,a-=g,Yr(o,r,s-o,a-r)},create:Yr,fromClientRect:t=>Yr(t.left,t.top,t.width,t.height)},FO=(()=>{const t={},e={};return{load:(n,o)=>{const r=`Script at URL "${o}" failed to load`,s=`Script at URL "${o}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const a=new Promise((i,l)=>{const d=((c,u,g=1e3)=>{let p=!1,f=null;const h=v=>(...y)=>{p||(p=!0,null!==f&&(clearTimeout(f),f=null),v.apply(null,y))},m=h(c),b=h(u);return{start:(...v)=>{p||null!==f||(f=setTimeout(()=>b.apply(null,v),g))},resolve:m,reject:b}})(i,l);e[n]=d.resolve,Hn.ScriptLoader.loadScript(o).then(()=>d.start(s),()=>d.reject(r))});return t[n]=a,a}},add:(n,o)=>{void 0!==e[n]&&(e[n](o),delete e[n]),t[n]=Promise.resolve(o)},unload:n=>{delete t[n]}}})();let ya;try{const t="__storage_test__";ya=window.localStorage,ya.setItem(t,t),ya.removeItem(t)}catch{ya=(()=>{let e={},n=[];const o={getItem:r=>e[r]||null,setItem:(r,s)=>{n.push(r),e[r]=String(s)},key:r=>n[r],removeItem:r=>{n=n.filter(s=>s===r),delete e[r]},clear:()=>{n=[],e={}},length:0};return Object.defineProperty(o,"length",{get:()=>n.length,configurable:!1,enumerable:!1}),o})()}const UO={geom:{Rect:IO},util:{Delay:$e,Tools:$,VK:tt,URI:dn,EventDispatcher:Gm,Observable:Ym,I18n:rn,LocalStorage:ya,ImageUploader:t=>{const e=wy(),n=ky(t,e);return{upload:(o,r=!0)=>n.upload(o,r?xy(t):void 0)}}},dom:{EventUtils:Uo,TreeWalker:qt,TextSeeker:Ho,DOMUtils:Et,ScriptLoader:Hn,RangeUtils:Xo,Serializer:uy,StyleSheetLoader:Ug,ControlSelection:ob,BookmarkManager:Hs,Selection:cy,Event:Uo.Event},html:{Styles:Sd,Entities:oo,Node:be,Schema:ro,DomParser:Ir,Writer:jb,Serializer:uo},Env:vt,AddOnManager:de,Annotator:Gh,Formatter:_y,UndoManager:Ry,EditorCommands:ex,WindowManager:vy,NotificationManager:by,EditorObservable:sx,Shortcuts:cx,Editor:Rl,FocusManager:_b,EditorManager:vo,DOM:Et.DOM,ScriptLoader:Hn.ScriptLoader,PluginManager:Ur,ThemeManager:rr,ModelManager:Fr,IconManager:Yi,Resource:FO,FakeClipboard:MO,trim:$.trim,isArray:$.isArray,is:$.is,toArray:$.toArray,makeMap:$.makeMap,each:$.each,map:$.map,grep:$.grep,inArray:$.inArray,extend:$.extend,walk:$.walk,resolve:$.resolve,explode:$.explode,_addCacheSuffix:$._addCacheSuffix},bx=$.extend(vo,UO);(t=>{window.tinymce=t,window.tinyMCE=t})(bx),(t=>{if("object"==typeof module)try{module.exports=t}catch{}})(bx)}();